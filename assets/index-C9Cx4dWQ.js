var Pd=Object.defineProperty;var Nd=(t,e,n)=>e in t?Pd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lt=(t,e,n)=>Nd(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ai=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ld(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qu={exports:{}},lo={},Xu={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hr=Symbol.for("react.element"),bd=Symbol.for("react.portal"),zd=Symbol.for("react.fragment"),Ad=Symbol.for("react.strict_mode"),Rd=Symbol.for("react.profiler"),Od=Symbol.for("react.provider"),Id=Symbol.for("react.context"),Dd=Symbol.for("react.forward_ref"),Ud=Symbol.for("react.suspense"),Bd=Symbol.for("react.memo"),Gd=Symbol.for("react.lazy"),gl=Symbol.iterator;function Vd(t){return t===null||typeof t!="object"?null:(t=gl&&t[gl]||t["@@iterator"],typeof t=="function"?t:null)}var Ku={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ju=Object.assign,Zu={};function Qn(t,e,n){this.props=t,this.context=e,this.refs=Zu,this.updater=n||Ku}Qn.prototype.isReactComponent={};Qn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ec(){}ec.prototype=Qn.prototype;function da(t,e,n){this.props=t,this.context=e,this.refs=Zu,this.updater=n||Ku}var ha=da.prototype=new ec;ha.constructor=da;Ju(ha,Qn.prototype);ha.isPureReactComponent=!0;var yl=Array.isArray,tc=Object.prototype.hasOwnProperty,pa={current:null},nc={key:!0,ref:!0,__self:!0,__source:!0};function rc(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)tc.call(e,r)&&!nc.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Hr,type:t,key:o,ref:s,props:i,_owner:pa.current}}function Fd(t,e){return{$$typeof:Hr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ma(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hr}function jd(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vl=/\/+/g;function Lo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jd(""+t.key):e.toString(36)}function xi(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Hr:case bd:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Lo(s,0):r,yl(i)?(n="",t!=null&&(n=t.replace(vl,"$&/")+"/"),xi(i,e,n,"",function(u){return u})):i!=null&&(ma(i)&&(i=Fd(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(vl,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",yl(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Lo(o,a);s+=xi(o,e,n,l,i)}else if(l=Vd(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Lo(o,a++),s+=xi(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ei(t,e,n){if(t==null)return t;var r=[],i=0;return xi(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Wd(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ne={current:null},ki={transition:null},Hd={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:ki,ReactCurrentOwner:pa};function ic(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:ei,forEach:function(t,e,n){ei(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ei(t,function(){e++}),e},toArray:function(t){return ei(t,function(e){return e})||[]},only:function(t){if(!ma(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};F.Component=Qn;F.Fragment=zd;F.Profiler=Rd;F.PureComponent=da;F.StrictMode=Ad;F.Suspense=Ud;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hd;F.act=ic;F.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ju({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=pa.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tc.call(e,l)&&!nc.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Hr,type:t.type,key:i,ref:o,props:r,_owner:s}};F.createContext=function(t){return t={$$typeof:Id,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Od,_context:t},t.Consumer=t};F.createElement=rc;F.createFactory=function(t){var e=rc.bind(null,t);return e.type=t,e};F.createRef=function(){return{current:null}};F.forwardRef=function(t){return{$$typeof:Dd,render:t}};F.isValidElement=ma;F.lazy=function(t){return{$$typeof:Gd,_payload:{_status:-1,_result:t},_init:Wd}};F.memo=function(t,e){return{$$typeof:Bd,type:t,compare:e===void 0?null:e}};F.startTransition=function(t){var e=ki.transition;ki.transition={};try{t()}finally{ki.transition=e}};F.unstable_act=ic;F.useCallback=function(t,e){return Ne.current.useCallback(t,e)};F.useContext=function(t){return Ne.current.useContext(t)};F.useDebugValue=function(){};F.useDeferredValue=function(t){return Ne.current.useDeferredValue(t)};F.useEffect=function(t,e){return Ne.current.useEffect(t,e)};F.useId=function(){return Ne.current.useId()};F.useImperativeHandle=function(t,e,n){return Ne.current.useImperativeHandle(t,e,n)};F.useInsertionEffect=function(t,e){return Ne.current.useInsertionEffect(t,e)};F.useLayoutEffect=function(t,e){return Ne.current.useLayoutEffect(t,e)};F.useMemo=function(t,e){return Ne.current.useMemo(t,e)};F.useReducer=function(t,e,n){return Ne.current.useReducer(t,e,n)};F.useRef=function(t){return Ne.current.useRef(t)};F.useState=function(t){return Ne.current.useState(t)};F.useSyncExternalStore=function(t,e,n){return Ne.current.useSyncExternalStore(t,e,n)};F.useTransition=function(){return Ne.current.useTransition()};F.version="18.3.1";Xu.exports=F;var $=Xu.exports;const $d=Ld($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd=$,Yd=Symbol.for("react.element"),Qd=Symbol.for("react.fragment"),Xd=Object.prototype.hasOwnProperty,Kd=qd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jd={key:!0,ref:!0,__self:!0,__source:!0};function oc(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Xd.call(e,r)&&!Jd.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Yd,type:t,key:o,ref:s,props:i,_owner:Kd.current}}lo.Fragment=Qd;lo.jsx=oc;lo.jsxs=oc;Qu.exports=lo;var N=Qu.exports,fs={},sc={exports:{}},Fe={},ac={exports:{}},lc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,I){var D=L.length;L.push(I);e:for(;0<D;){var H=D-1>>>1,Q=L[H];if(0<i(Q,I))L[H]=I,L[D]=Q,D=H;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var I=L[0],D=L.pop();if(D!==I){L[0]=D;e:for(var H=0,Q=L.length,We=Q>>>1;H<We;){var ke=2*(H+1)-1,Ze=L[ke],He=ke+1,mt=L[He];if(0>i(Ze,D))He<Q&&0>i(mt,Ze)?(L[H]=mt,L[He]=D,H=He):(L[H]=Ze,L[ke]=D,H=ke);else if(He<Q&&0>i(mt,D))L[H]=mt,L[He]=D,H=He;else break e}}return I}function i(L,I){var D=L.sortIndex-I.sortIndex;return D!==0?D:L.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,p=null,v=3,k=!1,S=!1,x=!1,R=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(L){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=L)r(u),I.sortIndex=I.expirationTime,e(l,I);else break;I=n(u)}}function w(L){if(x=!1,y(L),!S)if(n(l)!==null)S=!0,ne(E);else{var I=n(u);I!==null&&oe(w,I.startTime-L)}}function E(L,I){S=!1,x&&(x=!1,d(T),T=-1),k=!0;var D=v;try{for(y(I),p=n(l);p!==null&&(!(p.expirationTime>I)||L&&!V());){var H=p.callback;if(typeof H=="function"){p.callback=null,v=p.priorityLevel;var Q=H(p.expirationTime<=I);I=t.unstable_now(),typeof Q=="function"?p.callback=Q:p===n(l)&&r(l),y(I)}else r(l);p=n(l)}if(p!==null)var We=!0;else{var ke=n(u);ke!==null&&oe(w,ke.startTime-I),We=!1}return We}finally{p=null,v=D,k=!1}}var M=!1,b=null,T=-1,O=5,z=-1;function V(){return!(t.unstable_now()-z<O)}function q(){if(b!==null){var L=t.unstable_now();z=L;var I=!0;try{I=b(!0,L)}finally{I?U():(M=!1,b=null)}}else M=!1}var U;if(typeof h=="function")U=function(){h(q)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Y=K.port2;K.port1.onmessage=q,U=function(){Y.postMessage(null)}}else U=function(){R(q,0)};function ne(L){b=L,M||(M=!0,U())}function oe(L,I){T=R(function(){L(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){S||k||(S=!0,ne(E))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(v){case 1:case 2:case 3:var I=3;break;default:I=v}var D=v;v=I;try{return L()}finally{v=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,I){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var D=v;v=L;try{return I()}finally{v=D}},t.unstable_scheduleCallback=function(L,I,D){var H=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?H+D:H):D=H,L){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=D+Q,L={id:c++,callback:I,priorityLevel:L,startTime:D,expirationTime:Q,sortIndex:-1},D>H?(L.sortIndex=D,e(u,L),n(l)===null&&L===n(u)&&(x?(d(T),T=-1):x=!0,oe(w,D-H))):(L.sortIndex=Q,e(l,L),S||k||(S=!0,ne(E))),L},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(L){var I=v;return function(){var D=v;v=I;try{return L.apply(this,arguments)}finally{v=D}}}})(lc);ac.exports=lc;var Zd=ac.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eh=$,Ve=Zd;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uc=new Set,Mr={};function hn(t,e){Vn(t,e),Vn(t+"Capture",e)}function Vn(t,e){for(Mr[t]=e,t=0;t<e.length;t++)uc.add(e[t])}var Et=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ds=Object.prototype.hasOwnProperty,th=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_l={},wl={};function nh(t){return ds.call(wl,t)?!0:ds.call(_l,t)?!1:th.test(t)?wl[t]=!0:(_l[t]=!0,!1)}function rh(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ih(t,e,n,r){if(e===null||typeof e>"u"||rh(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Le(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xe[t]=new Le(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xe[e]=new Le(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xe[t]=new Le(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xe[t]=new Le(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xe[t]=new Le(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xe[t]=new Le(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xe[t]=new Le(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xe[t]=new Le(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xe[t]=new Le(t,5,!1,t.toLowerCase(),null,!1,!1)});var ga=/[\-:]([a-z])/g;function ya(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ga,ya);xe[e]=new Le(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ga,ya);xe[e]=new Le(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ga,ya);xe[e]=new Le(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xe[t]=new Le(t,1,!1,t.toLowerCase(),null,!1,!1)});xe.xlinkHref=new Le("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xe[t]=new Le(t,1,!1,t.toLowerCase(),null,!0,!0)});function va(t,e,n,r){var i=xe.hasOwnProperty(e)?xe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ih(e,n,i,r)&&(n=null),r||i===null?nh(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pt=eh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ti=Symbol.for("react.element"),vn=Symbol.for("react.portal"),_n=Symbol.for("react.fragment"),_a=Symbol.for("react.strict_mode"),hs=Symbol.for("react.profiler"),cc=Symbol.for("react.provider"),fc=Symbol.for("react.context"),wa=Symbol.for("react.forward_ref"),ps=Symbol.for("react.suspense"),ms=Symbol.for("react.suspense_list"),xa=Symbol.for("react.memo"),bt=Symbol.for("react.lazy"),dc=Symbol.for("react.offscreen"),xl=Symbol.iterator;function tr(t){return t===null||typeof t!="object"?null:(t=xl&&t[xl]||t["@@iterator"],typeof t=="function"?t:null)}var le=Object.assign,bo;function dr(t){if(bo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bo=e&&e[1]||""}return`
`+bo+t}var zo=!1;function Ao(t,e){if(!t||zo)return"";zo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{zo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dr(t):""}function oh(t){switch(t.tag){case 5:return dr(t.type);case 16:return dr("Lazy");case 13:return dr("Suspense");case 19:return dr("SuspenseList");case 0:case 2:case 15:return t=Ao(t.type,!1),t;case 11:return t=Ao(t.type.render,!1),t;case 1:return t=Ao(t.type,!0),t;default:return""}}function gs(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _n:return"Fragment";case vn:return"Portal";case hs:return"Profiler";case _a:return"StrictMode";case ps:return"Suspense";case ms:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fc:return(t.displayName||"Context")+".Consumer";case cc:return(t._context.displayName||"Context")+".Provider";case wa:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xa:return e=t.displayName||null,e!==null?e:gs(t.type)||"Memo";case bt:e=t._payload,t=t._init;try{return gs(t(e))}catch{}}return null}function sh(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gs(e);case 8:return e===_a?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $t(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hc(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ah(t){var e=hc(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ni(t){t._valueTracker||(t._valueTracker=ah(t))}function pc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hc(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ri(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ys(t,e){var n=e.checked;return le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kl(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$t(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mc(t,e){e=e.checked,e!=null&&va(t,"checked",e,!1)}function vs(t,e){mc(t,e);var n=$t(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_s(t,e.type,n):e.hasOwnProperty("defaultValue")&&_s(t,e.type,$t(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sl(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _s(t,e,n){(e!=="number"||Ri(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hr=Array.isArray;function Rn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$t(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ws(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function El(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(hr(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$t(n)}}function gc(t,e){var n=$t(e.value),r=$t(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Tl(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xs(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yc(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ri,vc=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ri=ri||document.createElement("div"),ri.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ri.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lh=["Webkit","ms","Moz","O"];Object.keys(yr).forEach(function(t){lh.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yr[e]=yr[t]})});function _c(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yr.hasOwnProperty(t)&&yr[t]?(""+e).trim():e+"px"}function wc(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=_c(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uh=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ks(t,e){if(e){if(uh[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function Ss(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Es=null;function ka(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ts=null,On=null,In=null;function Ml(t){if(t=Yr(t)){if(typeof Ts!="function")throw Error(P(280));var e=t.stateNode;e&&(e=po(e),Ts(t.stateNode,t.type,e))}}function xc(t){On?In?In.push(t):In=[t]:On=t}function kc(){if(On){var t=On,e=In;if(In=On=null,Ml(t),e)for(t=0;t<e.length;t++)Ml(e[t])}}function Sc(t,e){return t(e)}function Ec(){}var Ro=!1;function Tc(t,e,n){if(Ro)return t(e,n);Ro=!0;try{return Sc(t,e,n)}finally{Ro=!1,(On!==null||In!==null)&&(Ec(),kc())}}function Pr(t,e){var n=t.stateNode;if(n===null)return null;var r=po(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var Ms=!1;if(Et)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{Ms=!1}function ch(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var vr=!1,Oi=null,Ii=!1,Cs=null,fh={onError:function(t){vr=!0,Oi=t}};function dh(t,e,n,r,i,o,s,a,l){vr=!1,Oi=null,ch.apply(fh,arguments)}function hh(t,e,n,r,i,o,s,a,l){if(dh.apply(this,arguments),vr){if(vr){var u=Oi;vr=!1,Oi=null}else throw Error(P(198));Ii||(Ii=!0,Cs=u)}}function pn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mc(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cl(t){if(pn(t)!==t)throw Error(P(188))}function ph(t){var e=t.alternate;if(!e){if(e=pn(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Cl(i),t;if(o===r)return Cl(i),e;o=o.sibling}throw Error(P(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function Cc(t){return t=ph(t),t!==null?Pc(t):null}function Pc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pc(t);if(e!==null)return e;t=t.sibling}return null}var Nc=Ve.unstable_scheduleCallback,Pl=Ve.unstable_cancelCallback,mh=Ve.unstable_shouldYield,gh=Ve.unstable_requestPaint,ce=Ve.unstable_now,yh=Ve.unstable_getCurrentPriorityLevel,Sa=Ve.unstable_ImmediatePriority,Lc=Ve.unstable_UserBlockingPriority,Di=Ve.unstable_NormalPriority,vh=Ve.unstable_LowPriority,bc=Ve.unstable_IdlePriority,uo=null,ht=null;function _h(t){if(ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(uo,t,void 0,(t.current.flags&128)===128)}catch{}}var it=Math.clz32?Math.clz32:kh,wh=Math.log,xh=Math.LN2;function kh(t){return t>>>=0,t===0?32:31-(wh(t)/xh|0)|0}var ii=64,oi=4194304;function pr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ui(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=pr(a):(o&=s,o!==0&&(r=pr(o)))}else s=n&~i,s!==0?r=pr(s):o!==0&&(r=pr(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-it(e),i=1<<n,r|=t[n],e&=~i;return r}function Sh(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eh(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-it(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=Sh(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Ps(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zc(){var t=ii;return ii<<=1,!(ii&4194240)&&(ii=64),t}function Oo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $r(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-it(e),t[e]=n}function Th(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-it(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Ea(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-it(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var X=0;function Ac(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Rc,Ta,Oc,Ic,Dc,Ns=!1,si=[],Ut=null,Bt=null,Gt=null,Nr=new Map,Lr=new Map,Rt=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nl(t,e){switch(t){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Bt=null;break;case"mouseover":case"mouseout":Gt=null;break;case"pointerover":case"pointerout":Nr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lr.delete(e.pointerId)}}function rr(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Yr(e),e!==null&&Ta(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ch(t,e,n,r,i){switch(e){case"focusin":return Ut=rr(Ut,t,e,n,r,i),!0;case"dragenter":return Bt=rr(Bt,t,e,n,r,i),!0;case"mouseover":return Gt=rr(Gt,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nr.set(o,rr(Nr.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Lr.set(o,rr(Lr.get(o)||null,t,e,n,r,i)),!0}return!1}function Uc(t){var e=nn(t.target);if(e!==null){var n=pn(e);if(n!==null){if(e=n.tag,e===13){if(e=Mc(n),e!==null){t.blockedOn=e,Dc(t.priority,function(){Oc(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Si(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ls(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Es=r,n.target.dispatchEvent(r),Es=null}else return e=Yr(n),e!==null&&Ta(e),t.blockedOn=n,!1;e.shift()}return!0}function Ll(t,e,n){Si(t)&&n.delete(e)}function Ph(){Ns=!1,Ut!==null&&Si(Ut)&&(Ut=null),Bt!==null&&Si(Bt)&&(Bt=null),Gt!==null&&Si(Gt)&&(Gt=null),Nr.forEach(Ll),Lr.forEach(Ll)}function ir(t,e){t.blockedOn===e&&(t.blockedOn=null,Ns||(Ns=!0,Ve.unstable_scheduleCallback(Ve.unstable_NormalPriority,Ph)))}function br(t){function e(i){return ir(i,t)}if(0<si.length){ir(si[0],t);for(var n=1;n<si.length;n++){var r=si[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ut!==null&&ir(Ut,t),Bt!==null&&ir(Bt,t),Gt!==null&&ir(Gt,t),Nr.forEach(e),Lr.forEach(e),n=0;n<Rt.length;n++)r=Rt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rt.length&&(n=Rt[0],n.blockedOn===null);)Uc(n),n.blockedOn===null&&Rt.shift()}var Dn=Pt.ReactCurrentBatchConfig,Bi=!0;function Nh(t,e,n,r){var i=X,o=Dn.transition;Dn.transition=null;try{X=1,Ma(t,e,n,r)}finally{X=i,Dn.transition=o}}function Lh(t,e,n,r){var i=X,o=Dn.transition;Dn.transition=null;try{X=4,Ma(t,e,n,r)}finally{X=i,Dn.transition=o}}function Ma(t,e,n,r){if(Bi){var i=Ls(t,e,n,r);if(i===null)Ho(t,e,r,Gi,n),Nl(t,r);else if(Ch(i,t,e,n,r))r.stopPropagation();else if(Nl(t,r),e&4&&-1<Mh.indexOf(t)){for(;i!==null;){var o=Yr(i);if(o!==null&&Rc(o),o=Ls(t,e,n,r),o===null&&Ho(t,e,r,Gi,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Ho(t,e,r,null,n)}}var Gi=null;function Ls(t,e,n,r){if(Gi=null,t=ka(r),t=nn(t),t!==null)if(e=pn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mc(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gi=t,null}function Bc(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yh()){case Sa:return 1;case Lc:return 4;case Di:case vh:return 16;case bc:return 536870912;default:return 16}default:return 16}}var It=null,Ca=null,Ei=null;function Gc(){if(Ei)return Ei;var t,e=Ca,n=e.length,r,i="value"in It?It.value:It.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Ei=i.slice(t,1<r?1-r:void 0)}function Ti(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ai(){return!0}function bl(){return!1}function je(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ai:bl,this.isPropagationStopped=bl,this}return le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),e}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pa=je(Xn),qr=le({},Xn,{view:0,detail:0}),bh=je(qr),Io,Do,or,co=le({},qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==or&&(or&&t.type==="mousemove"?(Io=t.screenX-or.screenX,Do=t.screenY-or.screenY):Do=Io=0,or=t),Io)},movementY:function(t){return"movementY"in t?t.movementY:Do}}),zl=je(co),zh=le({},co,{dataTransfer:0}),Ah=je(zh),Rh=le({},qr,{relatedTarget:0}),Uo=je(Rh),Oh=le({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ih=je(Oh),Dh=le({},Xn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Uh=je(Dh),Bh=le({},Xn,{data:0}),Al=je(Bh),Gh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jh(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Fh[t])?!!e[t]:!1}function Na(){return jh}var Wh=le({},qr,{key:function(t){if(t.key){var e=Gh[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ti(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(t){return t.type==="keypress"?Ti(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ti(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hh=je(Wh),$h=le({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rl=je($h),qh=le({},qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),Yh=je(qh),Qh=le({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xh=je(Qh),Kh=le({},co,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jh=je(Kh),Zh=[9,13,27,32],La=Et&&"CompositionEvent"in window,_r=null;Et&&"documentMode"in document&&(_r=document.documentMode);var ep=Et&&"TextEvent"in window&&!_r,Vc=Et&&(!La||_r&&8<_r&&11>=_r),Ol=" ",Il=!1;function Fc(t,e){switch(t){case"keyup":return Zh.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wn=!1;function tp(t,e){switch(t){case"compositionend":return jc(e);case"keypress":return e.which!==32?null:(Il=!0,Ol);case"textInput":return t=e.data,t===Ol&&Il?null:t;default:return null}}function np(t,e){if(wn)return t==="compositionend"||!La&&Fc(t,e)?(t=Gc(),Ei=Ca=It=null,wn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vc&&e.locale!=="ko"?null:e.data;default:return null}}var rp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rp[t.type]:e==="textarea"}function Wc(t,e,n,r){xc(r),e=Vi(e,"onChange"),0<e.length&&(n=new Pa("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wr=null,zr=null;function ip(t){tf(t,0)}function fo(t){var e=Sn(t);if(pc(e))return t}function op(t,e){if(t==="change")return e}var Hc=!1;if(Et){var Bo;if(Et){var Go="oninput"in document;if(!Go){var Ul=document.createElement("div");Ul.setAttribute("oninput","return;"),Go=typeof Ul.oninput=="function"}Bo=Go}else Bo=!1;Hc=Bo&&(!document.documentMode||9<document.documentMode)}function Bl(){wr&&(wr.detachEvent("onpropertychange",$c),zr=wr=null)}function $c(t){if(t.propertyName==="value"&&fo(zr)){var e=[];Wc(e,zr,t,ka(t)),Tc(ip,e)}}function sp(t,e,n){t==="focusin"?(Bl(),wr=e,zr=n,wr.attachEvent("onpropertychange",$c)):t==="focusout"&&Bl()}function ap(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fo(zr)}function lp(t,e){if(t==="click")return fo(e)}function up(t,e){if(t==="input"||t==="change")return fo(e)}function cp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var st=typeof Object.is=="function"?Object.is:cp;function Ar(t,e){if(st(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ds.call(e,i)||!st(t[i],e[i]))return!1}return!0}function Gl(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vl(t,e){var n=Gl(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gl(n)}}function qc(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qc(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yc(){for(var t=window,e=Ri();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ri(t.document)}return e}function ba(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fp(t){var e=Yc(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qc(n.ownerDocument.documentElement,n)){if(r!==null&&ba(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Vl(n,o);var s=Vl(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dp=Et&&"documentMode"in document&&11>=document.documentMode,xn=null,bs=null,xr=null,zs=!1;function Fl(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zs||xn==null||xn!==Ri(r)||(r=xn,"selectionStart"in r&&ba(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xr&&Ar(xr,r)||(xr=r,r=Vi(bs,"onSelect"),0<r.length&&(e=new Pa("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xn)))}function li(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var kn={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionend:li("Transition","TransitionEnd")},Vo={},Qc={};Et&&(Qc=document.createElement("div").style,"AnimationEvent"in window||(delete kn.animationend.animation,delete kn.animationiteration.animation,delete kn.animationstart.animation),"TransitionEvent"in window||delete kn.transitionend.transition);function ho(t){if(Vo[t])return Vo[t];if(!kn[t])return t;var e=kn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qc)return Vo[t]=e[n];return t}var Xc=ho("animationend"),Kc=ho("animationiteration"),Jc=ho("animationstart"),Zc=ho("transitionend"),ef=new Map,jl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yt(t,e){ef.set(t,e),hn(e,[t])}for(var Fo=0;Fo<jl.length;Fo++){var jo=jl[Fo],hp=jo.toLowerCase(),pp=jo[0].toUpperCase()+jo.slice(1);Yt(hp,"on"+pp)}Yt(Xc,"onAnimationEnd");Yt(Kc,"onAnimationIteration");Yt(Jc,"onAnimationStart");Yt("dblclick","onDoubleClick");Yt("focusin","onFocus");Yt("focusout","onBlur");Yt(Zc,"onTransitionEnd");Vn("onMouseEnter",["mouseout","mouseover"]);Vn("onMouseLeave",["mouseout","mouseover"]);Vn("onPointerEnter",["pointerout","pointerover"]);Vn("onPointerLeave",["pointerout","pointerover"]);hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mp=new Set("cancel close invalid load scroll toggle".split(" ").concat(mr));function Wl(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hh(r,e,void 0,t),t.currentTarget=null}function tf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Wl(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Wl(i,a,u),o=l}}}if(Ii)throw t=Cs,Ii=!1,Cs=null,t}function Z(t,e){var n=e[Ds];n===void 0&&(n=e[Ds]=new Set);var r=t+"__bubble";n.has(r)||(nf(e,t,2,!1),n.add(r))}function Wo(t,e,n){var r=0;e&&(r|=4),nf(n,t,r,e)}var ui="_reactListening"+Math.random().toString(36).slice(2);function Rr(t){if(!t[ui]){t[ui]=!0,uc.forEach(function(n){n!=="selectionchange"&&(mp.has(n)||Wo(n,!1,t),Wo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ui]||(e[ui]=!0,Wo("selectionchange",!1,e))}}function nf(t,e,n,r){switch(Bc(e)){case 1:var i=Nh;break;case 4:i=Lh;break;default:i=Ma}n=i.bind(null,e,n,t),i=void 0,!Ms||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ho(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=nn(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}Tc(function(){var u=o,c=ka(n),p=[];e:{var v=ef.get(t);if(v!==void 0){var k=Pa,S=t;switch(t){case"keypress":if(Ti(n)===0)break e;case"keydown":case"keyup":k=Hh;break;case"focusin":S="focus",k=Uo;break;case"focusout":S="blur",k=Uo;break;case"beforeblur":case"afterblur":k=Uo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=Ah;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=Yh;break;case Xc:case Kc:case Jc:k=Ih;break;case Zc:k=Xh;break;case"scroll":k=bh;break;case"wheel":k=Jh;break;case"copy":case"cut":case"paste":k=Uh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Rl}var x=(e&4)!==0,R=!x&&t==="scroll",d=x?v!==null?v+"Capture":null:v;x=[];for(var h=u,y;h!==null;){y=h;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,d!==null&&(w=Pr(h,d),w!=null&&x.push(Or(h,w,y)))),R)break;h=h.return}0<x.length&&(v=new k(v,S,null,n,c),p.push({event:v,listeners:x}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",v&&n!==Es&&(S=n.relatedTarget||n.fromElement)&&(nn(S)||S[Tt]))break e;if((k||v)&&(v=c.window===c?c:(v=c.ownerDocument)?v.defaultView||v.parentWindow:window,k?(S=n.relatedTarget||n.toElement,k=u,S=S?nn(S):null,S!==null&&(R=pn(S),S!==R||S.tag!==5&&S.tag!==6)&&(S=null)):(k=null,S=u),k!==S)){if(x=zl,w="onMouseLeave",d="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(x=Rl,w="onPointerLeave",d="onPointerEnter",h="pointer"),R=k==null?v:Sn(k),y=S==null?v:Sn(S),v=new x(w,h+"leave",k,n,c),v.target=R,v.relatedTarget=y,w=null,nn(c)===u&&(x=new x(d,h+"enter",S,n,c),x.target=y,x.relatedTarget=R,w=x),R=w,k&&S)t:{for(x=k,d=S,h=0,y=x;y;y=gn(y))h++;for(y=0,w=d;w;w=gn(w))y++;for(;0<h-y;)x=gn(x),h--;for(;0<y-h;)d=gn(d),y--;for(;h--;){if(x===d||d!==null&&x===d.alternate)break t;x=gn(x),d=gn(d)}x=null}else x=null;k!==null&&Hl(p,v,k,x,!1),S!==null&&R!==null&&Hl(p,R,S,x,!0)}}e:{if(v=u?Sn(u):window,k=v.nodeName&&v.nodeName.toLowerCase(),k==="select"||k==="input"&&v.type==="file")var E=op;else if(Dl(v))if(Hc)E=up;else{E=ap;var M=sp}else(k=v.nodeName)&&k.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(E=lp);if(E&&(E=E(t,u))){Wc(p,E,n,c);break e}M&&M(t,v,u),t==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&_s(v,"number",v.value)}switch(M=u?Sn(u):window,t){case"focusin":(Dl(M)||M.contentEditable==="true")&&(xn=M,bs=u,xr=null);break;case"focusout":xr=bs=xn=null;break;case"mousedown":zs=!0;break;case"contextmenu":case"mouseup":case"dragend":zs=!1,Fl(p,n,c);break;case"selectionchange":if(dp)break;case"keydown":case"keyup":Fl(p,n,c)}var b;if(La)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else wn?Fc(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Vc&&n.locale!=="ko"&&(wn||T!=="onCompositionStart"?T==="onCompositionEnd"&&wn&&(b=Gc()):(It=c,Ca="value"in It?It.value:It.textContent,wn=!0)),M=Vi(u,T),0<M.length&&(T=new Al(T,t,null,n,c),p.push({event:T,listeners:M}),b?T.data=b:(b=jc(n),b!==null&&(T.data=b)))),(b=ep?tp(t,n):np(t,n))&&(u=Vi(u,"onBeforeInput"),0<u.length&&(c=new Al("onBeforeInput","beforeinput",null,n,c),p.push({event:c,listeners:u}),c.data=b))}tf(p,e)})}function Or(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vi(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Pr(t,n),o!=null&&r.unshift(Or(t,o,i)),o=Pr(t,e),o!=null&&r.push(Or(t,o,i))),t=t.return}return r}function gn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hl(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Pr(n,o),l!=null&&s.unshift(Or(n,l,a))):i||(l=Pr(n,o),l!=null&&s.push(Or(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var gp=/\r\n?/g,yp=/\u0000|\uFFFD/g;function $l(t){return(typeof t=="string"?t:""+t).replace(gp,`
`).replace(yp,"")}function ci(t,e,n){if(e=$l(e),$l(t)!==e&&n)throw Error(P(425))}function Fi(){}var As=null,Rs=null;function Os(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Is=typeof setTimeout=="function"?setTimeout:void 0,vp=typeof clearTimeout=="function"?clearTimeout:void 0,ql=typeof Promise=="function"?Promise:void 0,_p=typeof queueMicrotask=="function"?queueMicrotask:typeof ql<"u"?function(t){return ql.resolve(null).then(t).catch(wp)}:Is;function wp(t){setTimeout(function(){throw t})}function $o(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),br(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);br(e)}function Vt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yl(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Kn=Math.random().toString(36).slice(2),dt="__reactFiber$"+Kn,Ir="__reactProps$"+Kn,Tt="__reactContainer$"+Kn,Ds="__reactEvents$"+Kn,xp="__reactListeners$"+Kn,kp="__reactHandles$"+Kn;function nn(t){var e=t[dt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tt]||n[dt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yl(t);t!==null;){if(n=t[dt])return n;t=Yl(t)}return e}t=n,n=t.parentNode}return null}function Yr(t){return t=t[dt]||t[Tt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function po(t){return t[Ir]||null}var Us=[],En=-1;function Qt(t){return{current:t}}function te(t){0>En||(t.current=Us[En],Us[En]=null,En--)}function J(t,e){En++,Us[En]=t.current,t.current=e}var qt={},Me=Qt(qt),Re=Qt(!1),ln=qt;function Fn(t,e){var n=t.type.contextTypes;if(!n)return qt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Oe(t){return t=t.childContextTypes,t!=null}function ji(){te(Re),te(Me)}function Ql(t,e,n){if(Me.current!==qt)throw Error(P(168));J(Me,e),J(Re,n)}function rf(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(P(108,sh(t)||"Unknown",i));return le({},n,r)}function Wi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qt,ln=Me.current,J(Me,t),J(Re,Re.current),!0}function Xl(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=rf(t,e,ln),r.__reactInternalMemoizedMergedChildContext=t,te(Re),te(Me),J(Me,t)):te(Re),J(Re,n)}var vt=null,mo=!1,qo=!1;function of(t){vt===null?vt=[t]:vt.push(t)}function Sp(t){mo=!0,of(t)}function Xt(){if(!qo&&vt!==null){qo=!0;var t=0,e=X;try{var n=vt;for(X=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vt=null,mo=!1}catch(i){throw vt!==null&&(vt=vt.slice(t+1)),Nc(Sa,Xt),i}finally{X=e,qo=!1}}return null}var Tn=[],Mn=0,Hi=null,$i=0,$e=[],qe=0,un=null,wt=1,xt="";function Kt(t,e){Tn[Mn++]=$i,Tn[Mn++]=Hi,Hi=t,$i=e}function sf(t,e,n){$e[qe++]=wt,$e[qe++]=xt,$e[qe++]=un,un=t;var r=wt;t=xt;var i=32-it(r)-1;r&=~(1<<i),n+=1;var o=32-it(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,wt=1<<32-it(e)+i|n<<i|r,xt=o+t}else wt=1<<o|n<<i|r,xt=t}function za(t){t.return!==null&&(Kt(t,1),sf(t,1,0))}function Aa(t){for(;t===Hi;)Hi=Tn[--Mn],Tn[Mn]=null,$i=Tn[--Mn],Tn[Mn]=null;for(;t===un;)un=$e[--qe],$e[qe]=null,xt=$e[--qe],$e[qe]=null,wt=$e[--qe],$e[qe]=null}var Ge=null,Ue=null,re=!1,rt=null;function af(t,e){var n=Qe(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Kl(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ge=t,Ue=Vt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ge=t,Ue=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=un!==null?{id:wt,overflow:xt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qe(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ge=t,Ue=null,!0):!1;default:return!1}}function Bs(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gs(t){if(re){var e=Ue;if(e){var n=e;if(!Kl(t,e)){if(Bs(t))throw Error(P(418));e=Vt(n.nextSibling);var r=Ge;e&&Kl(t,e)?af(r,n):(t.flags=t.flags&-4097|2,re=!1,Ge=t)}}else{if(Bs(t))throw Error(P(418));t.flags=t.flags&-4097|2,re=!1,Ge=t}}}function Jl(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ge=t}function fi(t){if(t!==Ge)return!1;if(!re)return Jl(t),re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Os(t.type,t.memoizedProps)),e&&(e=Ue)){if(Bs(t))throw lf(),Error(P(418));for(;e;)af(t,e),e=Vt(e.nextSibling)}if(Jl(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ue=Vt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ue=null}}else Ue=Ge?Vt(t.stateNode.nextSibling):null;return!0}function lf(){for(var t=Ue;t;)t=Vt(t.nextSibling)}function jn(){Ue=Ge=null,re=!1}function Ra(t){rt===null?rt=[t]:rt.push(t)}var Ep=Pt.ReactCurrentBatchConfig;function sr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function di(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zl(t){var e=t._init;return e(t._payload)}function uf(t){function e(d,h){if(t){var y=d.deletions;y===null?(d.deletions=[h],d.flags|=16):y.push(h)}}function n(d,h){if(!t)return null;for(;h!==null;)e(d,h),h=h.sibling;return null}function r(d,h){for(d=new Map;h!==null;)h.key!==null?d.set(h.key,h):d.set(h.index,h),h=h.sibling;return d}function i(d,h){return d=Ht(d,h),d.index=0,d.sibling=null,d}function o(d,h,y){return d.index=y,t?(y=d.alternate,y!==null?(y=y.index,y<h?(d.flags|=2,h):y):(d.flags|=2,h)):(d.flags|=1048576,h)}function s(d){return t&&d.alternate===null&&(d.flags|=2),d}function a(d,h,y,w){return h===null||h.tag!==6?(h=es(y,d.mode,w),h.return=d,h):(h=i(h,y),h.return=d,h)}function l(d,h,y,w){var E=y.type;return E===_n?c(d,h,y.props.children,w,y.key):h!==null&&(h.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===bt&&Zl(E)===h.type)?(w=i(h,y.props),w.ref=sr(d,h,y),w.return=d,w):(w=zi(y.type,y.key,y.props,null,d.mode,w),w.ref=sr(d,h,y),w.return=d,w)}function u(d,h,y,w){return h===null||h.tag!==4||h.stateNode.containerInfo!==y.containerInfo||h.stateNode.implementation!==y.implementation?(h=ts(y,d.mode,w),h.return=d,h):(h=i(h,y.children||[]),h.return=d,h)}function c(d,h,y,w,E){return h===null||h.tag!==7?(h=an(y,d.mode,w,E),h.return=d,h):(h=i(h,y),h.return=d,h)}function p(d,h,y){if(typeof h=="string"&&h!==""||typeof h=="number")return h=es(""+h,d.mode,y),h.return=d,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ti:return y=zi(h.type,h.key,h.props,null,d.mode,y),y.ref=sr(d,null,h),y.return=d,y;case vn:return h=ts(h,d.mode,y),h.return=d,h;case bt:var w=h._init;return p(d,w(h._payload),y)}if(hr(h)||tr(h))return h=an(h,d.mode,y,null),h.return=d,h;di(d,h)}return null}function v(d,h,y,w){var E=h!==null?h.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:a(d,h,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ti:return y.key===E?l(d,h,y,w):null;case vn:return y.key===E?u(d,h,y,w):null;case bt:return E=y._init,v(d,h,E(y._payload),w)}if(hr(y)||tr(y))return E!==null?null:c(d,h,y,w,null);di(d,y)}return null}function k(d,h,y,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return d=d.get(y)||null,a(h,d,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ti:return d=d.get(w.key===null?y:w.key)||null,l(h,d,w,E);case vn:return d=d.get(w.key===null?y:w.key)||null,u(h,d,w,E);case bt:var M=w._init;return k(d,h,y,M(w._payload),E)}if(hr(w)||tr(w))return d=d.get(y)||null,c(h,d,w,E,null);di(h,w)}return null}function S(d,h,y,w){for(var E=null,M=null,b=h,T=h=0,O=null;b!==null&&T<y.length;T++){b.index>T?(O=b,b=null):O=b.sibling;var z=v(d,b,y[T],w);if(z===null){b===null&&(b=O);break}t&&b&&z.alternate===null&&e(d,b),h=o(z,h,T),M===null?E=z:M.sibling=z,M=z,b=O}if(T===y.length)return n(d,b),re&&Kt(d,T),E;if(b===null){for(;T<y.length;T++)b=p(d,y[T],w),b!==null&&(h=o(b,h,T),M===null?E=b:M.sibling=b,M=b);return re&&Kt(d,T),E}for(b=r(d,b);T<y.length;T++)O=k(b,d,T,y[T],w),O!==null&&(t&&O.alternate!==null&&b.delete(O.key===null?T:O.key),h=o(O,h,T),M===null?E=O:M.sibling=O,M=O);return t&&b.forEach(function(V){return e(d,V)}),re&&Kt(d,T),E}function x(d,h,y,w){var E=tr(y);if(typeof E!="function")throw Error(P(150));if(y=E.call(y),y==null)throw Error(P(151));for(var M=E=null,b=h,T=h=0,O=null,z=y.next();b!==null&&!z.done;T++,z=y.next()){b.index>T?(O=b,b=null):O=b.sibling;var V=v(d,b,z.value,w);if(V===null){b===null&&(b=O);break}t&&b&&V.alternate===null&&e(d,b),h=o(V,h,T),M===null?E=V:M.sibling=V,M=V,b=O}if(z.done)return n(d,b),re&&Kt(d,T),E;if(b===null){for(;!z.done;T++,z=y.next())z=p(d,z.value,w),z!==null&&(h=o(z,h,T),M===null?E=z:M.sibling=z,M=z);return re&&Kt(d,T),E}for(b=r(d,b);!z.done;T++,z=y.next())z=k(b,d,T,z.value,w),z!==null&&(t&&z.alternate!==null&&b.delete(z.key===null?T:z.key),h=o(z,h,T),M===null?E=z:M.sibling=z,M=z);return t&&b.forEach(function(q){return e(d,q)}),re&&Kt(d,T),E}function R(d,h,y,w){if(typeof y=="object"&&y!==null&&y.type===_n&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ti:e:{for(var E=y.key,M=h;M!==null;){if(M.key===E){if(E=y.type,E===_n){if(M.tag===7){n(d,M.sibling),h=i(M,y.props.children),h.return=d,d=h;break e}}else if(M.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===bt&&Zl(E)===M.type){n(d,M.sibling),h=i(M,y.props),h.ref=sr(d,M,y),h.return=d,d=h;break e}n(d,M);break}else e(d,M);M=M.sibling}y.type===_n?(h=an(y.props.children,d.mode,w,y.key),h.return=d,d=h):(w=zi(y.type,y.key,y.props,null,d.mode,w),w.ref=sr(d,h,y),w.return=d,d=w)}return s(d);case vn:e:{for(M=y.key;h!==null;){if(h.key===M)if(h.tag===4&&h.stateNode.containerInfo===y.containerInfo&&h.stateNode.implementation===y.implementation){n(d,h.sibling),h=i(h,y.children||[]),h.return=d,d=h;break e}else{n(d,h);break}else e(d,h);h=h.sibling}h=ts(y,d.mode,w),h.return=d,d=h}return s(d);case bt:return M=y._init,R(d,h,M(y._payload),w)}if(hr(y))return S(d,h,y,w);if(tr(y))return x(d,h,y,w);di(d,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,h!==null&&h.tag===6?(n(d,h.sibling),h=i(h,y),h.return=d,d=h):(n(d,h),h=es(y,d.mode,w),h.return=d,d=h),s(d)):n(d,h)}return R}var Wn=uf(!0),cf=uf(!1),qi=Qt(null),Yi=null,Cn=null,Oa=null;function Ia(){Oa=Cn=Yi=null}function Da(t){var e=qi.current;te(qi),t._currentValue=e}function Vs(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Un(t,e){Yi=t,Oa=Cn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ae=!0),t.firstContext=null)}function Ke(t){var e=t._currentValue;if(Oa!==t)if(t={context:t,memoizedValue:e,next:null},Cn===null){if(Yi===null)throw Error(P(308));Cn=t,Yi.dependencies={lanes:0,firstContext:t}}else Cn=Cn.next=t;return e}var rn=null;function Ua(t){rn===null?rn=[t]:rn.push(t)}function ff(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ua(e)):(n.next=i.next,i.next=n),e.interleaved=n,Mt(t,r)}function Mt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zt=!1;function Ba(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function df(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function St(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ft(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,W&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Mt(t,n)}return i=r.interleaved,i===null?(e.next=e,Ua(r)):(e.next=i.next,i.next=e),r.interleaved=e,Mt(t,n)}function Mi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ea(t,n)}}function eu(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Qi(t,e,n,r){var i=t.updateQueue;zt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var p=i.baseState;s=0,c=u=l=null,a=o;do{var v=a.lane,k=a.eventTime;if((r&v)===v){c!==null&&(c=c.next={eventTime:k,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,x=a;switch(v=e,k=n,x.tag){case 1:if(S=x.payload,typeof S=="function"){p=S.call(k,p,v);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=x.payload,v=typeof S=="function"?S.call(k,p,v):S,v==null)break e;p=le({},p,v);break e;case 2:zt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[a]:v.push(a))}else k={eventTime:k,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=k,l=p):c=c.next=k,s|=v;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;v=a,a=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(c===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);fn|=s,t.lanes=s,t.memoizedState=p}}function tu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(P(191,i));i.call(r)}}}var Qr={},pt=Qt(Qr),Dr=Qt(Qr),Ur=Qt(Qr);function on(t){if(t===Qr)throw Error(P(174));return t}function Ga(t,e){switch(J(Ur,e),J(Dr,t),J(pt,Qr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xs(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xs(e,t)}te(pt),J(pt,e)}function Hn(){te(pt),te(Dr),te(Ur)}function hf(t){on(Ur.current);var e=on(pt.current),n=xs(e,t.type);e!==n&&(J(Dr,t),J(pt,n))}function Va(t){Dr.current===t&&(te(pt),te(Dr))}var se=Qt(0);function Xi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yo=[];function Fa(){for(var t=0;t<Yo.length;t++)Yo[t]._workInProgressVersionPrimary=null;Yo.length=0}var Ci=Pt.ReactCurrentDispatcher,Qo=Pt.ReactCurrentBatchConfig,cn=0,ae=null,he=null,ge=null,Ki=!1,kr=!1,Br=0,Tp=0;function Se(){throw Error(P(321))}function ja(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!st(t[n],e[n]))return!1;return!0}function Wa(t,e,n,r,i,o){if(cn=o,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ci.current=t===null||t.memoizedState===null?Np:Lp,t=n(r,i),kr){o=0;do{if(kr=!1,Br=0,25<=o)throw Error(P(301));o+=1,ge=he=null,e.updateQueue=null,Ci.current=bp,t=n(r,i)}while(kr)}if(Ci.current=Ji,e=he!==null&&he.next!==null,cn=0,ge=he=ae=null,Ki=!1,e)throw Error(P(300));return t}function Ha(){var t=Br!==0;return Br=0,t}function ft(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?ae.memoizedState=ge=t:ge=ge.next=t,ge}function Je(){if(he===null){var t=ae.alternate;t=t!==null?t.memoizedState:null}else t=he.next;var e=ge===null?ae.memoizedState:ge.next;if(e!==null)ge=e,he=t;else{if(t===null)throw Error(P(310));he=t,t={memoizedState:he.memoizedState,baseState:he.baseState,baseQueue:he.baseQueue,queue:he.queue,next:null},ge===null?ae.memoizedState=ge=t:ge=ge.next=t}return ge}function Gr(t,e){return typeof e=="function"?e(t):e}function Xo(t){var e=Je(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=he,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((cn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,s=r):l=l.next=p,ae.lanes|=c,fn|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,st(r,e.memoizedState)||(Ae=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,ae.lanes|=o,fn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ko(t){var e=Je(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);st(o,e.memoizedState)||(Ae=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function pf(){}function mf(t,e){var n=ae,r=Je(),i=e(),o=!st(r.memoizedState,i);if(o&&(r.memoizedState=i,Ae=!0),r=r.queue,$a(vf.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ge!==null&&ge.memoizedState.tag&1){if(n.flags|=2048,Vr(9,yf.bind(null,n,r,i,e),void 0,null),ve===null)throw Error(P(349));cn&30||gf(n,e,i)}return i}function gf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ae.updateQueue,e===null?(e={lastEffect:null,stores:null},ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yf(t,e,n,r){e.value=n,e.getSnapshot=r,_f(e)&&wf(t)}function vf(t,e,n){return n(function(){_f(e)&&wf(t)})}function _f(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!st(t,n)}catch{return!0}}function wf(t){var e=Mt(t,1);e!==null&&ot(e,t,1,-1)}function nu(t){var e=ft();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:t},e.queue=t,t=t.dispatch=Pp.bind(null,ae,t),[e.memoizedState,t]}function Vr(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ae.updateQueue,e===null?(e={lastEffect:null,stores:null},ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xf(){return Je().memoizedState}function Pi(t,e,n,r){var i=ft();ae.flags|=t,i.memoizedState=Vr(1|e,n,void 0,r===void 0?null:r)}function go(t,e,n,r){var i=Je();r=r===void 0?null:r;var o=void 0;if(he!==null){var s=he.memoizedState;if(o=s.destroy,r!==null&&ja(r,s.deps)){i.memoizedState=Vr(e,n,o,r);return}}ae.flags|=t,i.memoizedState=Vr(1|e,n,o,r)}function ru(t,e){return Pi(8390656,8,t,e)}function $a(t,e){return go(2048,8,t,e)}function kf(t,e){return go(4,2,t,e)}function Sf(t,e){return go(4,4,t,e)}function Ef(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Tf(t,e,n){return n=n!=null?n.concat([t]):null,go(4,4,Ef.bind(null,e,t),n)}function qa(){}function Mf(t,e){var n=Je();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ja(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Cf(t,e){var n=Je();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ja(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Pf(t,e,n){return cn&21?(st(n,e)||(n=zc(),ae.lanes|=n,fn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ae=!0),t.memoizedState=n)}function Mp(t,e){var n=X;X=n!==0&&4>n?n:4,t(!0);var r=Qo.transition;Qo.transition={};try{t(!1),e()}finally{X=n,Qo.transition=r}}function Nf(){return Je().memoizedState}function Cp(t,e,n){var r=Wt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lf(t))bf(e,n);else if(n=ff(t,e,n,r),n!==null){var i=Pe();ot(n,t,r,i),zf(n,e,r)}}function Pp(t,e,n){var r=Wt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lf(t))bf(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,st(a,s)){var l=e.interleaved;l===null?(i.next=i,Ua(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=ff(t,e,i,r),n!==null&&(i=Pe(),ot(n,t,r,i),zf(n,e,r))}}function Lf(t){var e=t.alternate;return t===ae||e!==null&&e===ae}function bf(t,e){kr=Ki=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zf(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ea(t,n)}}var Ji={readContext:Ke,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},Np={readContext:Ke,useCallback:function(t,e){return ft().memoizedState=[t,e===void 0?null:e],t},useContext:Ke,useEffect:ru,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pi(4194308,4,Ef.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pi(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pi(4,2,t,e)},useMemo:function(t,e){var n=ft();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ft();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Cp.bind(null,ae,t),[r.memoizedState,t]},useRef:function(t){var e=ft();return t={current:t},e.memoizedState=t},useState:nu,useDebugValue:qa,useDeferredValue:function(t){return ft().memoizedState=t},useTransition:function(){var t=nu(!1),e=t[0];return t=Mp.bind(null,t[1]),ft().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ae,i=ft();if(re){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),ve===null)throw Error(P(349));cn&30||gf(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,ru(vf.bind(null,r,o,t),[t]),r.flags|=2048,Vr(9,yf.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ft(),e=ve.identifierPrefix;if(re){var n=xt,r=wt;n=(r&~(1<<32-it(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Br++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Tp++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Lp={readContext:Ke,useCallback:Mf,useContext:Ke,useEffect:$a,useImperativeHandle:Tf,useInsertionEffect:kf,useLayoutEffect:Sf,useMemo:Cf,useReducer:Xo,useRef:xf,useState:function(){return Xo(Gr)},useDebugValue:qa,useDeferredValue:function(t){var e=Je();return Pf(e,he.memoizedState,t)},useTransition:function(){var t=Xo(Gr)[0],e=Je().memoizedState;return[t,e]},useMutableSource:pf,useSyncExternalStore:mf,useId:Nf,unstable_isNewReconciler:!1},bp={readContext:Ke,useCallback:Mf,useContext:Ke,useEffect:$a,useImperativeHandle:Tf,useInsertionEffect:kf,useLayoutEffect:Sf,useMemo:Cf,useReducer:Ko,useRef:xf,useState:function(){return Ko(Gr)},useDebugValue:qa,useDeferredValue:function(t){var e=Je();return he===null?e.memoizedState=t:Pf(e,he.memoizedState,t)},useTransition:function(){var t=Ko(Gr)[0],e=Je().memoizedState;return[t,e]},useMutableSource:pf,useSyncExternalStore:mf,useId:Nf,unstable_isNewReconciler:!1};function tt(t,e){if(t&&t.defaultProps){e=le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fs(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yo={isMounted:function(t){return(t=t._reactInternals)?pn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pe(),i=Wt(t),o=St(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ft(t,o,i),e!==null&&(ot(e,t,i,r),Mi(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pe(),i=Wt(t),o=St(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ft(t,o,i),e!==null&&(ot(e,t,i,r),Mi(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pe(),r=Wt(t),i=St(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ft(t,i,r),e!==null&&(ot(e,t,r,n),Mi(e,t,r))}};function iu(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ar(n,r)||!Ar(i,o):!0}function Af(t,e,n){var r=!1,i=qt,o=e.contextType;return typeof o=="object"&&o!==null?o=Ke(o):(i=Oe(e)?ln:Me.current,r=e.contextTypes,o=(r=r!=null)?Fn(t,i):qt),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ou(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yo.enqueueReplaceState(e,e.state,null)}function js(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ba(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ke(o):(o=Oe(e)?ln:Me.current,i.context=Fn(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Fs(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yo.enqueueReplaceState(i,i.state,null),Qi(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $n(t,e){try{var n="",r=e;do n+=oh(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Jo(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ws(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zp=typeof WeakMap=="function"?WeakMap:Map;function Rf(t,e,n){n=St(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){eo||(eo=!0,ea=r),Ws(t,e)},n}function Of(t,e,n){n=St(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ws(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ws(t,e),typeof r!="function"&&(jt===null?jt=new Set([this]):jt.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function su(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zp;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$p.bind(null,t,e,n),e.then(t,t))}function au(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lu(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=St(-1,1),e.tag=2,Ft(n,e,1))),n.lanes|=1),t)}var Ap=Pt.ReactCurrentOwner,Ae=!1;function Ce(t,e,n,r){e.child=t===null?cf(e,null,n,r):Wn(e,t.child,n,r)}function uu(t,e,n,r,i){n=n.render;var o=e.ref;return Un(e,i),r=Wa(t,e,n,r,o,i),n=Ha(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ct(t,e,i)):(re&&n&&za(e),e.flags|=1,Ce(t,e,r,i),e.child)}function cu(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!tl(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,If(t,e,o,r,i)):(t=zi(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ar,n(s,r)&&t.ref===e.ref)return Ct(t,e,i)}return e.flags|=1,t=Ht(o,r),t.ref=e.ref,t.return=e,e.child=t}function If(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ar(o,r)&&t.ref===e.ref)if(Ae=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Ae=!0);else return e.lanes=t.lanes,Ct(t,e,i)}return Hs(t,e,n,r,i)}function Df(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Nn,De),De|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(Nn,De),De|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,J(Nn,De),De|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,J(Nn,De),De|=r;return Ce(t,e,i,n),e.child}function Uf(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hs(t,e,n,r,i){var o=Oe(n)?ln:Me.current;return o=Fn(e,o),Un(e,i),n=Wa(t,e,n,r,o,i),r=Ha(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ct(t,e,i)):(re&&r&&za(e),e.flags|=1,Ce(t,e,n,i),e.child)}function fu(t,e,n,r,i){if(Oe(n)){var o=!0;Wi(e)}else o=!1;if(Un(e,i),e.stateNode===null)Ni(t,e),Af(e,n,r),js(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ke(u):(u=Oe(n)?ln:Me.current,u=Fn(e,u));var c=n.getDerivedStateFromProps,p=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&ou(e,s,r,u),zt=!1;var v=e.memoizedState;s.state=v,Qi(e,r,s,i),l=e.memoizedState,a!==r||v!==l||Re.current||zt?(typeof c=="function"&&(Fs(e,n,c,r),l=e.memoizedState),(a=zt||iu(e,n,a,r,v,l,u))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,df(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:tt(e.type,a),s.props=u,p=e.pendingProps,v=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ke(l):(l=Oe(n)?ln:Me.current,l=Fn(e,l));var k=n.getDerivedStateFromProps;(c=typeof k=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||v!==l)&&ou(e,s,r,l),zt=!1,v=e.memoizedState,s.state=v,Qi(e,r,s,i);var S=e.memoizedState;a!==p||v!==S||Re.current||zt?(typeof k=="function"&&(Fs(e,n,k,r),S=e.memoizedState),(u=zt||iu(e,n,u,r,v,S,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,S,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,S,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),s.props=r,s.state=S,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return $s(t,e,n,r,o,i)}function $s(t,e,n,r,i,o){Uf(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Xl(e,n,!1),Ct(t,e,o);r=e.stateNode,Ap.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Wn(e,t.child,null,o),e.child=Wn(e,null,a,o)):Ce(t,e,a,o),e.memoizedState=r.state,i&&Xl(e,n,!0),e.child}function Bf(t){var e=t.stateNode;e.pendingContext?Ql(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ql(t,e.context,!1),Ga(t,e.containerInfo)}function du(t,e,n,r,i){return jn(),Ra(i),e.flags|=256,Ce(t,e,n,r),e.child}var qs={dehydrated:null,treeContext:null,retryLane:0};function Ys(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gf(t,e,n){var r=e.pendingProps,i=se.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),J(se,i&1),t===null)return Gs(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=wo(s,r,0,null),t=an(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Ys(n),e.memoizedState=qs,t):Ya(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Rp(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ht(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Ht(a,o):(o=an(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Ys(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=qs,r}return o=t.child,t=o.sibling,r=Ht(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ya(t,e){return e=wo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hi(t,e,n,r){return r!==null&&Ra(r),Wn(e,t.child,null,n),t=Ya(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rp(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Jo(Error(P(422))),hi(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=wo({mode:"visible",children:r.children},i,0,null),o=an(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Wn(e,t.child,null,s),e.child.memoizedState=Ys(s),e.memoizedState=qs,o);if(!(e.mode&1))return hi(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(P(419)),r=Jo(o,r,void 0),hi(t,e,s,r)}if(a=(s&t.childLanes)!==0,Ae||a){if(r=ve,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Mt(t,i),ot(r,t,i,-1))}return el(),r=Jo(Error(P(421))),hi(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qp.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ue=Vt(i.nextSibling),Ge=e,re=!0,rt=null,t!==null&&($e[qe++]=wt,$e[qe++]=xt,$e[qe++]=un,wt=t.id,xt=t.overflow,un=e),e=Ya(e,r.children),e.flags|=4096,e)}function hu(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vs(t.return,e,n)}function Zo(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vf(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ce(t,e,r.children,n),r=se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hu(t,n,e);else if(t.tag===19)hu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(J(se,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Xi(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zo(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Xi(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zo(e,!0,n,null,o);break;case"together":Zo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ni(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ct(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=Ht(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ht(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Op(t,e,n){switch(e.tag){case 3:Bf(e),jn();break;case 5:hf(e);break;case 1:Oe(e.type)&&Wi(e);break;case 4:Ga(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;J(qi,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(J(se,se.current&1),e.flags|=128,null):n&e.child.childLanes?Gf(t,e,n):(J(se,se.current&1),t=Ct(t,e,n),t!==null?t.sibling:null);J(se,se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vf(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(se,se.current),r)break;return null;case 22:case 23:return e.lanes=0,Df(t,e,n)}return Ct(t,e,n)}var Ff,Qs,jf,Wf;Ff=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qs=function(){};jf=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,on(pt.current);var o=null;switch(n){case"input":i=ys(t,i),r=ys(t,r),o=[];break;case"select":i=le({},i,{value:void 0}),r=le({},r,{value:void 0}),o=[];break;case"textarea":i=ws(t,i),r=ws(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fi)}ks(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mr.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mr.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Z("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Wf=function(t,e,n,r){n!==r&&(e.flags|=4)};function ar(t,e){if(!re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ee(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ip(t,e,n){var r=e.pendingProps;switch(Aa(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(e),null;case 1:return Oe(e.type)&&ji(),Ee(e),null;case 3:return r=e.stateNode,Hn(),te(Re),te(Me),Fa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rt!==null&&(ra(rt),rt=null))),Qs(t,e),Ee(e),null;case 5:Va(e);var i=on(Ur.current);if(n=e.type,t!==null&&e.stateNode!=null)jf(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return Ee(e),null}if(t=on(pt.current),fi(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[dt]=e,r[Ir]=o,t=(e.mode&1)!==0,n){case"dialog":Z("cancel",r),Z("close",r);break;case"iframe":case"object":case"embed":Z("load",r);break;case"video":case"audio":for(i=0;i<mr.length;i++)Z(mr[i],r);break;case"source":Z("error",r);break;case"img":case"image":case"link":Z("error",r),Z("load",r);break;case"details":Z("toggle",r);break;case"input":kl(r,o),Z("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Z("invalid",r);break;case"textarea":El(r,o),Z("invalid",r)}ks(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&ci(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&ci(r.textContent,a,t),i=["children",""+a]):Mr.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Z("scroll",r)}switch(n){case"input":ni(r),Sl(r,o,!0);break;case"textarea":ni(r),Tl(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Fi)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yc(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[dt]=e,t[Ir]=r,Ff(t,e,!1,!1),e.stateNode=t;e:{switch(s=Ss(n,r),n){case"dialog":Z("cancel",t),Z("close",t),i=r;break;case"iframe":case"object":case"embed":Z("load",t),i=r;break;case"video":case"audio":for(i=0;i<mr.length;i++)Z(mr[i],t);i=r;break;case"source":Z("error",t),i=r;break;case"img":case"image":case"link":Z("error",t),Z("load",t),i=r;break;case"details":Z("toggle",t),i=r;break;case"input":kl(t,r),i=ys(t,r),Z("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=le({},r,{value:void 0}),Z("invalid",t);break;case"textarea":El(t,r),i=ws(t,r),Z("invalid",t);break;default:i=r}ks(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?wc(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vc(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Cr(t,l):typeof l=="number"&&Cr(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Mr.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Z("scroll",t):l!=null&&va(t,o,l,s))}switch(n){case"input":ni(t),Sl(t,r,!1);break;case"textarea":ni(t),Tl(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$t(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Rn(t,!!r.multiple,o,!1):r.defaultValue!=null&&Rn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Fi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ee(e),null;case 6:if(t&&e.stateNode!=null)Wf(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=on(Ur.current),on(pt.current),fi(e)){if(r=e.stateNode,n=e.memoizedProps,r[dt]=e,(o=r.nodeValue!==n)&&(t=Ge,t!==null))switch(t.tag){case 3:ci(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ci(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dt]=e,e.stateNode=r}return Ee(e),null;case 13:if(te(se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(re&&Ue!==null&&e.mode&1&&!(e.flags&128))lf(),jn(),e.flags|=98560,o=!1;else if(o=fi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(P(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(P(317));o[dt]=e}else jn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ee(e),o=!1}else rt!==null&&(ra(rt),rt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||se.current&1?pe===0&&(pe=3):el())),e.updateQueue!==null&&(e.flags|=4),Ee(e),null);case 4:return Hn(),Qs(t,e),t===null&&Rr(e.stateNode.containerInfo),Ee(e),null;case 10:return Da(e.type._context),Ee(e),null;case 17:return Oe(e.type)&&ji(),Ee(e),null;case 19:if(te(se),o=e.memoizedState,o===null)return Ee(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ar(o,!1);else{if(pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Xi(t),s!==null){for(e.flags|=128,ar(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return J(se,se.current&1|2),e.child}t=t.sibling}o.tail!==null&&ce()>qn&&(e.flags|=128,r=!0,ar(o,!1),e.lanes=4194304)}else{if(!r)if(t=Xi(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ar(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!re)return Ee(e),null}else 2*ce()-o.renderingStartTime>qn&&n!==1073741824&&(e.flags|=128,r=!0,ar(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ce(),e.sibling=null,n=se.current,J(se,r?n&1|2:n&1),e):(Ee(e),null);case 22:case 23:return Za(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?De&1073741824&&(Ee(e),e.subtreeFlags&6&&(e.flags|=8192)):Ee(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function Dp(t,e){switch(Aa(e),e.tag){case 1:return Oe(e.type)&&ji(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hn(),te(Re),te(Me),Fa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Va(e),null;case 13:if(te(se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));jn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return te(se),null;case 4:return Hn(),null;case 10:return Da(e.type._context),null;case 22:case 23:return Za(),null;case 24:return null;default:return null}}var pi=!1,Te=!1,Up=typeof WeakSet=="function"?WeakSet:Set,A=null;function Pn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ue(t,e,r)}else n.current=null}function Xs(t,e,n){try{n()}catch(r){ue(t,e,r)}}var pu=!1;function Bp(t,e){if(As=Bi,t=Yc(),ba(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,p=t,v=null;t:for(;;){for(var k;p!==n||i!==0&&p.nodeType!==3||(a=s+i),p!==o||r!==0&&p.nodeType!==3||(l=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(k=p.firstChild)!==null;)v=p,p=k;for(;;){if(p===t)break t;if(v===n&&++u===i&&(a=s),v===o&&++c===r&&(l=s),(k=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=k}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rs={focusedElem:t,selectionRange:n},Bi=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var x=S.memoizedProps,R=S.memoizedState,d=e.stateNode,h=d.getSnapshotBeforeUpdate(e.elementType===e.type?x:tt(e.type,x),R);d.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(w){ue(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return S=pu,pu=!1,S}function Sr(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Xs(e,n,o)}i=i.next}while(i!==r)}}function vo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ks(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hf(t){var e=t.alternate;e!==null&&(t.alternate=null,Hf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[dt],delete e[Ir],delete e[Ds],delete e[xp],delete e[kp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $f(t){return t.tag===5||t.tag===3||t.tag===4}function mu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$f(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Js(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fi));else if(r!==4&&(t=t.child,t!==null))for(Js(t,e,n),t=t.sibling;t!==null;)Js(t,e,n),t=t.sibling}function Zs(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zs(t,e,n),t=t.sibling;t!==null;)Zs(t,e,n),t=t.sibling}var _e=null,nt=!1;function Lt(t,e,n){for(n=n.child;n!==null;)qf(t,e,n),n=n.sibling}function qf(t,e,n){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(uo,n)}catch{}switch(n.tag){case 5:Te||Pn(n,e);case 6:var r=_e,i=nt;_e=null,Lt(t,e,n),_e=r,nt=i,_e!==null&&(nt?(t=_e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(nt?(t=_e,n=n.stateNode,t.nodeType===8?$o(t.parentNode,n):t.nodeType===1&&$o(t,n),br(t)):$o(_e,n.stateNode));break;case 4:r=_e,i=nt,_e=n.stateNode.containerInfo,nt=!0,Lt(t,e,n),_e=r,nt=i;break;case 0:case 11:case 14:case 15:if(!Te&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Xs(n,e,s),i=i.next}while(i!==r)}Lt(t,e,n);break;case 1:if(!Te&&(Pn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ue(n,e,a)}Lt(t,e,n);break;case 21:Lt(t,e,n);break;case 22:n.mode&1?(Te=(r=Te)||n.memoizedState!==null,Lt(t,e,n),Te=r):Lt(t,e,n);break;default:Lt(t,e,n)}}function gu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Up),e.forEach(function(r){var i=Yp.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function et(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:_e=a.stateNode,nt=!1;break e;case 3:_e=a.stateNode.containerInfo,nt=!0;break e;case 4:_e=a.stateNode.containerInfo,nt=!0;break e}a=a.return}if(_e===null)throw Error(P(160));qf(o,s,i),_e=null,nt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ue(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Yf(e,t),e=e.sibling}function Yf(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(et(e,t),ut(t),r&4){try{Sr(3,t,t.return),vo(3,t)}catch(x){ue(t,t.return,x)}try{Sr(5,t,t.return)}catch(x){ue(t,t.return,x)}}break;case 1:et(e,t),ut(t),r&512&&n!==null&&Pn(n,n.return);break;case 5:if(et(e,t),ut(t),r&512&&n!==null&&Pn(n,n.return),t.flags&32){var i=t.stateNode;try{Cr(i,"")}catch(x){ue(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&mc(i,o),Ss(a,s);var u=Ss(a,o);for(s=0;s<l.length;s+=2){var c=l[s],p=l[s+1];c==="style"?wc(i,p):c==="dangerouslySetInnerHTML"?vc(i,p):c==="children"?Cr(i,p):va(i,c,p,u)}switch(a){case"input":vs(i,o);break;case"textarea":gc(i,o);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?Rn(i,!!o.multiple,k,!1):v!==!!o.multiple&&(o.defaultValue!=null?Rn(i,!!o.multiple,o.defaultValue,!0):Rn(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ir]=o}catch(x){ue(t,t.return,x)}}break;case 6:if(et(e,t),ut(t),r&4){if(t.stateNode===null)throw Error(P(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(x){ue(t,t.return,x)}}break;case 3:if(et(e,t),ut(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{br(e.containerInfo)}catch(x){ue(t,t.return,x)}break;case 4:et(e,t),ut(t);break;case 13:et(e,t),ut(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Ka=ce())),r&4&&gu(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Te=(u=Te)||c,et(e,t),Te=u):et(e,t),ut(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(A=t,c=t.child;c!==null;){for(p=A=c;A!==null;){switch(v=A,k=v.child,v.tag){case 0:case 11:case 14:case 15:Sr(4,v,v.return);break;case 1:Pn(v,v.return);var S=v.stateNode;if(typeof S.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(x){ue(r,n,x)}}break;case 5:Pn(v,v.return);break;case 22:if(v.memoizedState!==null){vu(p);continue}}k!==null?(k.return=v,A=k):vu(p)}c=c.sibling}e:for(c=null,p=t;;){if(p.tag===5){if(c===null){c=p;try{i=p.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,l=p.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_c("display",s))}catch(x){ue(t,t.return,x)}}}else if(p.tag===6){if(c===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(x){ue(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;c===p&&(c=null),p=p.return}c===p&&(c=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:et(e,t),ut(t),r&4&&gu(t);break;case 21:break;default:et(e,t),ut(t)}}function ut(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($f(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cr(i,""),r.flags&=-33);var o=mu(t);Zs(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=mu(t);Js(t,a,s);break;default:throw Error(P(161))}}catch(l){ue(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gp(t,e,n){A=t,Qf(t)}function Qf(t,e,n){for(var r=(t.mode&1)!==0;A!==null;){var i=A,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||pi;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Te;a=pi;var u=Te;if(pi=s,(Te=l)&&!u)for(A=i;A!==null;)s=A,l=s.child,s.tag===22&&s.memoizedState!==null?_u(i):l!==null?(l.return=s,A=l):_u(i);for(;o!==null;)A=o,Qf(o),o=o.sibling;A=i,pi=a,Te=u}yu(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,A=o):yu(t)}}function yu(t){for(;A!==null;){var e=A;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Te||vo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Te)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&tu(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tu(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var p=c.dehydrated;p!==null&&br(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}Te||e.flags&512&&Ks(e)}catch(v){ue(e,e.return,v)}}if(e===t){A=null;break}if(n=e.sibling,n!==null){n.return=e.return,A=n;break}A=e.return}}function vu(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var n=e.sibling;if(n!==null){n.return=e.return,A=n;break}A=e.return}}function _u(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vo(4,e)}catch(l){ue(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ue(e,i,l)}}var o=e.return;try{Ks(e)}catch(l){ue(e,o,l)}break;case 5:var s=e.return;try{Ks(e)}catch(l){ue(e,s,l)}}}catch(l){ue(e,e.return,l)}if(e===t){A=null;break}var a=e.sibling;if(a!==null){a.return=e.return,A=a;break}A=e.return}}var Vp=Math.ceil,Zi=Pt.ReactCurrentDispatcher,Qa=Pt.ReactCurrentOwner,Xe=Pt.ReactCurrentBatchConfig,W=0,ve=null,de=null,we=0,De=0,Nn=Qt(0),pe=0,Fr=null,fn=0,_o=0,Xa=0,Er=null,ze=null,Ka=0,qn=1/0,yt=null,eo=!1,ea=null,jt=null,mi=!1,Dt=null,to=0,Tr=0,ta=null,Li=-1,bi=0;function Pe(){return W&6?ce():Li!==-1?Li:Li=ce()}function Wt(t){return t.mode&1?W&2&&we!==0?we&-we:Ep.transition!==null?(bi===0&&(bi=zc()),bi):(t=X,t!==0||(t=window.event,t=t===void 0?16:Bc(t.type)),t):1}function ot(t,e,n,r){if(50<Tr)throw Tr=0,ta=null,Error(P(185));$r(t,n,r),(!(W&2)||t!==ve)&&(t===ve&&(!(W&2)&&(_o|=n),pe===4&&Ot(t,we)),Ie(t,r),n===1&&W===0&&!(e.mode&1)&&(qn=ce()+500,mo&&Xt()))}function Ie(t,e){var n=t.callbackNode;Eh(t,e);var r=Ui(t,t===ve?we:0);if(r===0)n!==null&&Pl(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pl(n),e===1)t.tag===0?Sp(wu.bind(null,t)):of(wu.bind(null,t)),_p(function(){!(W&6)&&Xt()}),n=null;else{switch(Ac(r)){case 1:n=Sa;break;case 4:n=Lc;break;case 16:n=Di;break;case 536870912:n=bc;break;default:n=Di}n=rd(n,Xf.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Xf(t,e){if(Li=-1,bi=0,W&6)throw Error(P(327));var n=t.callbackNode;if(Bn()&&t.callbackNode!==n)return null;var r=Ui(t,t===ve?we:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=no(t,r);else{e=r;var i=W;W|=2;var o=Jf();(ve!==t||we!==e)&&(yt=null,qn=ce()+500,sn(t,e));do try{Wp();break}catch(a){Kf(t,a)}while(!0);Ia(),Zi.current=o,W=i,de!==null?e=0:(ve=null,we=0,e=pe)}if(e!==0){if(e===2&&(i=Ps(t),i!==0&&(r=i,e=na(t,i))),e===1)throw n=Fr,sn(t,0),Ot(t,r),Ie(t,ce()),n;if(e===6)Ot(t,r);else{if(i=t.current.alternate,!(r&30)&&!Fp(i)&&(e=no(t,r),e===2&&(o=Ps(t),o!==0&&(r=o,e=na(t,o))),e===1))throw n=Fr,sn(t,0),Ot(t,r),Ie(t,ce()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:Jt(t,ze,yt);break;case 3:if(Ot(t,r),(r&130023424)===r&&(e=Ka+500-ce(),10<e)){if(Ui(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Is(Jt.bind(null,t,ze,yt),e);break}Jt(t,ze,yt);break;case 4:if(Ot(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-it(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vp(r/1960))-r,10<r){t.timeoutHandle=Is(Jt.bind(null,t,ze,yt),r);break}Jt(t,ze,yt);break;case 5:Jt(t,ze,yt);break;default:throw Error(P(329))}}}return Ie(t,ce()),t.callbackNode===n?Xf.bind(null,t):null}function na(t,e){var n=Er;return t.current.memoizedState.isDehydrated&&(sn(t,e).flags|=256),t=no(t,e),t!==2&&(e=ze,ze=n,e!==null&&ra(e)),t}function ra(t){ze===null?ze=t:ze.push.apply(ze,t)}function Fp(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!st(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ot(t,e){for(e&=~Xa,e&=~_o,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-it(e),r=1<<n;t[n]=-1,e&=~r}}function wu(t){if(W&6)throw Error(P(327));Bn();var e=Ui(t,0);if(!(e&1))return Ie(t,ce()),null;var n=no(t,e);if(t.tag!==0&&n===2){var r=Ps(t);r!==0&&(e=r,n=na(t,r))}if(n===1)throw n=Fr,sn(t,0),Ot(t,e),Ie(t,ce()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jt(t,ze,yt),Ie(t,ce()),null}function Ja(t,e){var n=W;W|=1;try{return t(e)}finally{W=n,W===0&&(qn=ce()+500,mo&&Xt())}}function dn(t){Dt!==null&&Dt.tag===0&&!(W&6)&&Bn();var e=W;W|=1;var n=Xe.transition,r=X;try{if(Xe.transition=null,X=1,t)return t()}finally{X=r,Xe.transition=n,W=e,!(W&6)&&Xt()}}function Za(){De=Nn.current,te(Nn)}function sn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vp(n)),de!==null)for(n=de.return;n!==null;){var r=n;switch(Aa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ji();break;case 3:Hn(),te(Re),te(Me),Fa();break;case 5:Va(r);break;case 4:Hn();break;case 13:te(se);break;case 19:te(se);break;case 10:Da(r.type._context);break;case 22:case 23:Za()}n=n.return}if(ve=t,de=t=Ht(t.current,null),we=De=e,pe=0,Fr=null,Xa=_o=fn=0,ze=Er=null,rn!==null){for(e=0;e<rn.length;e++)if(n=rn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}rn=null}return t}function Kf(t,e){do{var n=de;try{if(Ia(),Ci.current=Ji,Ki){for(var r=ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ki=!1}if(cn=0,ge=he=ae=null,kr=!1,Br=0,Qa.current=null,n===null||n.return===null){pe=1,Fr=e,de=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=we,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,p=c.tag;if(!(c.mode&1)&&(p===0||p===11||p===15)){var v=c.alternate;v?(c.updateQueue=v.updateQueue,c.memoizedState=v.memoizedState,c.lanes=v.lanes):(c.updateQueue=null,c.memoizedState=null)}var k=au(s);if(k!==null){k.flags&=-257,lu(k,s,a,o,e),k.mode&1&&su(o,u,e),e=k,l=u;var S=e.updateQueue;if(S===null){var x=new Set;x.add(l),e.updateQueue=x}else S.add(l);break e}else{if(!(e&1)){su(o,u,e),el();break e}l=Error(P(426))}}else if(re&&a.mode&1){var R=au(s);if(R!==null){!(R.flags&65536)&&(R.flags|=256),lu(R,s,a,o,e),Ra($n(l,a));break e}}o=l=$n(l,a),pe!==4&&(pe=2),Er===null?Er=[o]:Er.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var d=Rf(o,l,e);eu(o,d);break e;case 1:a=l;var h=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(jt===null||!jt.has(y)))){o.flags|=65536,e&=-e,o.lanes|=e;var w=Of(o,a,e);eu(o,w);break e}}o=o.return}while(o!==null)}ed(n)}catch(E){e=E,de===n&&n!==null&&(de=n=n.return);continue}break}while(!0)}function Jf(){var t=Zi.current;return Zi.current=Ji,t===null?Ji:t}function el(){(pe===0||pe===3||pe===2)&&(pe=4),ve===null||!(fn&268435455)&&!(_o&268435455)||Ot(ve,we)}function no(t,e){var n=W;W|=2;var r=Jf();(ve!==t||we!==e)&&(yt=null,sn(t,e));do try{jp();break}catch(i){Kf(t,i)}while(!0);if(Ia(),W=n,Zi.current=r,de!==null)throw Error(P(261));return ve=null,we=0,pe}function jp(){for(;de!==null;)Zf(de)}function Wp(){for(;de!==null&&!mh();)Zf(de)}function Zf(t){var e=nd(t.alternate,t,De);t.memoizedProps=t.pendingProps,e===null?ed(t):de=e,Qa.current=null}function ed(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Dp(n,e),n!==null){n.flags&=32767,de=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pe=6,de=null;return}}else if(n=Ip(n,e,De),n!==null){de=n;return}if(e=e.sibling,e!==null){de=e;return}de=e=t}while(e!==null);pe===0&&(pe=5)}function Jt(t,e,n){var r=X,i=Xe.transition;try{Xe.transition=null,X=1,Hp(t,e,n,r)}finally{Xe.transition=i,X=r}return null}function Hp(t,e,n,r){do Bn();while(Dt!==null);if(W&6)throw Error(P(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Th(t,o),t===ve&&(de=ve=null,we=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mi||(mi=!0,rd(Di,function(){return Bn(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xe.transition,Xe.transition=null;var s=X;X=1;var a=W;W|=4,Qa.current=null,Bp(t,n),Yf(n,t),fp(Rs),Bi=!!As,Rs=As=null,t.current=n,Gp(n),gh(),W=a,X=s,Xe.transition=o}else t.current=n;if(mi&&(mi=!1,Dt=t,to=i),o=t.pendingLanes,o===0&&(jt=null),_h(n.stateNode),Ie(t,ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(eo)throw eo=!1,t=ea,ea=null,t;return to&1&&t.tag!==0&&Bn(),o=t.pendingLanes,o&1?t===ta?Tr++:(Tr=0,ta=t):Tr=0,Xt(),null}function Bn(){if(Dt!==null){var t=Ac(to),e=Xe.transition,n=X;try{if(Xe.transition=null,X=16>t?16:t,Dt===null)var r=!1;else{if(t=Dt,Dt=null,to=0,W&6)throw Error(P(331));var i=W;for(W|=4,A=t.current;A!==null;){var o=A,s=o.child;if(A.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(A=u;A!==null;){var c=A;switch(c.tag){case 0:case 11:case 15:Sr(8,c,o)}var p=c.child;if(p!==null)p.return=c,A=p;else for(;A!==null;){c=A;var v=c.sibling,k=c.return;if(Hf(c),c===u){A=null;break}if(v!==null){v.return=k,A=v;break}A=k}}}var S=o.alternate;if(S!==null){var x=S.child;if(x!==null){S.child=null;do{var R=x.sibling;x.sibling=null,x=R}while(x!==null)}}A=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,A=s;else e:for(;A!==null;){if(o=A,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Sr(9,o,o.return)}var d=o.sibling;if(d!==null){d.return=o.return,A=d;break e}A=o.return}}var h=t.current;for(A=h;A!==null;){s=A;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,A=y;else e:for(s=h;A!==null;){if(a=A,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vo(9,a)}}catch(E){ue(a,a.return,E)}if(a===s){A=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,A=w;break e}A=a.return}}if(W=i,Xt(),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(uo,t)}catch{}r=!0}return r}finally{X=n,Xe.transition=e}}return!1}function xu(t,e,n){e=$n(n,e),e=Rf(t,e,1),t=Ft(t,e,1),e=Pe(),t!==null&&($r(t,1,e),Ie(t,e))}function ue(t,e,n){if(t.tag===3)xu(t,t,n);else for(;e!==null;){if(e.tag===3){xu(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jt===null||!jt.has(r))){t=$n(n,t),t=Of(e,t,1),e=Ft(e,t,1),t=Pe(),e!==null&&($r(e,1,t),Ie(e,t));break}}e=e.return}}function $p(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pe(),t.pingedLanes|=t.suspendedLanes&n,ve===t&&(we&n)===n&&(pe===4||pe===3&&(we&130023424)===we&&500>ce()-Ka?sn(t,0):Xa|=n),Ie(t,e)}function td(t,e){e===0&&(t.mode&1?(e=oi,oi<<=1,!(oi&130023424)&&(oi=4194304)):e=1);var n=Pe();t=Mt(t,e),t!==null&&($r(t,e,n),Ie(t,n))}function qp(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),td(t,n)}function Yp(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),td(t,n)}var nd;nd=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Re.current)Ae=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ae=!1,Op(t,e,n);Ae=!!(t.flags&131072)}else Ae=!1,re&&e.flags&1048576&&sf(e,$i,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ni(t,e),t=e.pendingProps;var i=Fn(e,Me.current);Un(e,n),i=Wa(null,e,r,t,i,n);var o=Ha();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oe(r)?(o=!0,Wi(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ba(e),i.updater=yo,e.stateNode=i,i._reactInternals=e,js(e,r,t,n),e=$s(null,e,r,!0,o,n)):(e.tag=0,re&&o&&za(e),Ce(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ni(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Xp(r),t=tt(r,t),i){case 0:e=Hs(null,e,r,t,n);break e;case 1:e=fu(null,e,r,t,n);break e;case 11:e=uu(null,e,r,t,n);break e;case 14:e=cu(null,e,r,tt(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),Hs(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),fu(t,e,r,i,n);case 3:e:{if(Bf(e),t===null)throw Error(P(387));r=e.pendingProps,o=e.memoizedState,i=o.element,df(t,e),Qi(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=$n(Error(P(423)),e),e=du(t,e,r,n,i);break e}else if(r!==i){i=$n(Error(P(424)),e),e=du(t,e,r,n,i);break e}else for(Ue=Vt(e.stateNode.containerInfo.firstChild),Ge=e,re=!0,rt=null,n=cf(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jn(),r===i){e=Ct(t,e,n);break e}Ce(t,e,r,n)}e=e.child}return e;case 5:return hf(e),t===null&&Gs(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Os(r,i)?s=null:o!==null&&Os(r,o)&&(e.flags|=32),Uf(t,e),Ce(t,e,s,n),e.child;case 6:return t===null&&Gs(e),null;case 13:return Gf(t,e,n);case 4:return Ga(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Wn(e,null,r,n):Ce(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),uu(t,e,r,i,n);case 7:return Ce(t,e,e.pendingProps,n),e.child;case 8:return Ce(t,e,e.pendingProps.children,n),e.child;case 12:return Ce(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,J(qi,r._currentValue),r._currentValue=s,o!==null)if(st(o.value,s)){if(o.children===i.children&&!Re.current){e=Ct(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=St(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Vs(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(P(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Vs(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ce(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Un(e,n),i=Ke(i),r=r(i),e.flags|=1,Ce(t,e,r,n),e.child;case 14:return r=e.type,i=tt(r,e.pendingProps),i=tt(r.type,i),cu(t,e,r,i,n);case 15:return If(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),Ni(t,e),e.tag=1,Oe(r)?(t=!0,Wi(e)):t=!1,Un(e,n),Af(e,r,i),js(e,r,i,n),$s(null,e,r,!0,t,n);case 19:return Vf(t,e,n);case 22:return Df(t,e,n)}throw Error(P(156,e.tag))};function rd(t,e){return Nc(t,e)}function Qp(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(t,e,n,r){return new Qp(t,e,n,r)}function tl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xp(t){if(typeof t=="function")return tl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wa)return 11;if(t===xa)return 14}return 2}function Ht(t,e){var n=t.alternate;return n===null?(n=Qe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zi(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")tl(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case _n:return an(n.children,i,o,e);case _a:s=8,i|=8;break;case hs:return t=Qe(12,n,e,i|2),t.elementType=hs,t.lanes=o,t;case ps:return t=Qe(13,n,e,i),t.elementType=ps,t.lanes=o,t;case ms:return t=Qe(19,n,e,i),t.elementType=ms,t.lanes=o,t;case dc:return wo(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cc:s=10;break e;case fc:s=9;break e;case wa:s=11;break e;case xa:s=14;break e;case bt:s=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=Qe(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function an(t,e,n,r){return t=Qe(7,t,r,e),t.lanes=n,t}function wo(t,e,n,r){return t=Qe(22,t,r,e),t.elementType=dc,t.lanes=n,t.stateNode={isHidden:!1},t}function es(t,e,n){return t=Qe(6,t,null,e),t.lanes=n,t}function ts(t,e,n){return e=Qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Kp(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oo(0),this.expirationTimes=Oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nl(t,e,n,r,i,o,s,a,l){return t=new Kp(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Qe(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ba(o),t}function Jp(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function id(t){if(!t)return qt;t=t._reactInternals;e:{if(pn(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(Oe(n))return rf(t,n,e)}return e}function od(t,e,n,r,i,o,s,a,l){return t=nl(n,r,!0,t,i,o,s,a,l),t.context=id(null),n=t.current,r=Pe(),i=Wt(n),o=St(r,i),o.callback=e??null,Ft(n,o,i),t.current.lanes=i,$r(t,i,r),Ie(t,r),t}function xo(t,e,n,r){var i=e.current,o=Pe(),s=Wt(i);return n=id(n),e.context===null?e.context=n:e.pendingContext=n,e=St(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ft(i,e,s),t!==null&&(ot(t,i,s,o),Mi(t,i,s)),s}function ro(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ku(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rl(t,e){ku(t,e),(t=t.alternate)&&ku(t,e)}function Zp(){return null}var sd=typeof reportError=="function"?reportError:function(t){console.error(t)};function il(t){this._internalRoot=t}ko.prototype.render=il.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));xo(t,e,null,null)};ko.prototype.unmount=il.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;dn(function(){xo(null,t,null,null)}),e[Tt]=null}};function ko(t){this._internalRoot=t}ko.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ic();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rt.length&&e!==0&&e<Rt[n].priority;n++);Rt.splice(n,0,t),n===0&&Uc(t)}};function ol(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function So(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Su(){}function em(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=ro(s);o.call(u)}}var s=od(e,r,t,0,null,!1,!1,"",Su);return t._reactRootContainer=s,t[Tt]=s.current,Rr(t.nodeType===8?t.parentNode:t),dn(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ro(l);a.call(u)}}var l=nl(t,0,!1,null,null,!1,!1,"",Su);return t._reactRootContainer=l,t[Tt]=l.current,Rr(t.nodeType===8?t.parentNode:t),dn(function(){xo(e,l,n,r)}),l}function Eo(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=ro(s);a.call(l)}}xo(e,s,t,i)}else s=em(n,e,t,i,r);return ro(s)}Rc=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pr(e.pendingLanes);n!==0&&(Ea(e,n|1),Ie(e,ce()),!(W&6)&&(qn=ce()+500,Xt()))}break;case 13:dn(function(){var r=Mt(t,1);if(r!==null){var i=Pe();ot(r,t,1,i)}}),rl(t,1)}};Ta=function(t){if(t.tag===13){var e=Mt(t,134217728);if(e!==null){var n=Pe();ot(e,t,134217728,n)}rl(t,134217728)}};Oc=function(t){if(t.tag===13){var e=Wt(t),n=Mt(t,e);if(n!==null){var r=Pe();ot(n,t,e,r)}rl(t,e)}};Ic=function(){return X};Dc=function(t,e){var n=X;try{return X=t,e()}finally{X=n}};Ts=function(t,e,n){switch(e){case"input":if(vs(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=po(r);if(!i)throw Error(P(90));pc(r),vs(r,i)}}}break;case"textarea":gc(t,n);break;case"select":e=n.value,e!=null&&Rn(t,!!n.multiple,e,!1)}};Sc=Ja;Ec=dn;var tm={usingClientEntryPoint:!1,Events:[Yr,Sn,po,xc,kc,Ja]},lr={findFiberByHostInstance:nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nm={bundleType:lr.bundleType,version:lr.version,rendererPackageName:lr.rendererPackageName,rendererConfig:lr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cc(t),t===null?null:t.stateNode},findFiberByHostInstance:lr.findFiberByHostInstance||Zp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gi.isDisabled&&gi.supportsFiber)try{uo=gi.inject(nm),ht=gi}catch{}}Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tm;Fe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(e))throw Error(P(200));return Jp(t,e,null,n)};Fe.createRoot=function(t,e){if(!ol(t))throw Error(P(299));var n=!1,r="",i=sd;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=nl(t,1,!1,null,null,n,!1,r,i),t[Tt]=e.current,Rr(t.nodeType===8?t.parentNode:t),new il(e)};Fe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Cc(e),t=t===null?null:t.stateNode,t};Fe.flushSync=function(t){return dn(t)};Fe.hydrate=function(t,e,n){if(!So(e))throw Error(P(200));return Eo(null,t,e,!0,n)};Fe.hydrateRoot=function(t,e,n){if(!ol(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=sd;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=od(e,null,t,1,n??null,i,!1,o,s),t[Tt]=e.current,Rr(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ko(e)};Fe.render=function(t,e,n){if(!So(e))throw Error(P(200));return Eo(null,t,e,!1,n)};Fe.unmountComponentAtNode=function(t){if(!So(t))throw Error(P(40));return t._reactRootContainer?(dn(function(){Eo(null,null,t,!1,function(){t._reactRootContainer=null,t[Tt]=null})}),!0):!1};Fe.unstable_batchedUpdates=Ja;Fe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!So(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return Eo(t,e,n,!1,r)};Fe.version="18.3.1-next-f1338f8080-20240426";function ad(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ad)}catch(t){console.error(t)}}ad(),sc.exports=Fe;var rm=sc.exports,Eu=rm;fs.createRoot=Eu.createRoot,fs.hydrateRoot=Eu.hydrateRoot;const ld=`
struct PointLight {
    @location(0) position: vec3f,
    @location(1) radius: f32,
    @location(2) color: vec4f,
    @location(3) brightness: f32,
}

struct Vertex {
    @location(0) position: vec3f,
    // @location(1) uv: vec2f,
    // @location(1) normal: vec3f,
    @location(2) color: vec4f,
    @location(3) transformationIndex: f32,
    @location(4) ignoreLighting: f32,
    // @location(3) textureId: f32,
    // @location(2) offset: vec3f,
    // @location(3) scale: vec3f,
    // @location(4) rotation: vec3f
}

struct VertexShaderOut {
    @builtin(position) position: vec4f,
    @location(0) color: vec4f,
    @location(1) originalPosition: vec3f,
    @location(2) texcoord: vec2f,
    @location(3) worldPosition: vec3f,
    @interpolate(flat) @location(4) ignoreLighting: u32,
    // @location(5) shadowMapPosition: vec4f,
    // @interpolate(flat) @location(4) textureId: u32,
    // @location(1) scale: vec3f
}

struct FragmentShaderOut {
    @location(0) canvasColor: vec4f,
    @location(1) brightColor: vec4f,
}

// @group(0) @binding(0) var<uniform> projectionMatrix: mat4x4f;
@group(0) @binding(1) var<storage> transformationMatrixs: array<mat4x4f>;
@group(0) @binding(2) var testTexture: texture_2d<f32>;
@group(0) @binding(3) var ourSampler: sampler;
@group(0) @binding(4) var<uniform> lightDirection: vec3f;
@group(0) @binding(5) var<storage> worldTransformationMatrixs: array<mat4x4f>;
@group(0) @binding(6) var<storage> pointLights: array<PointLight>;
@group(0) @binding(7) var<uniform> numPointLights: u32;
@group(0) @binding(8) var<storage> uvs: array<vec2f>;
@group(0) @binding(9) var<storage> directionalLightMatrices: array<mat4x4f>;
@group(0) @binding(10) var shadowMapTexture: texture_depth_2d_array;
@group(0) @binding(11) var shadowMapSampler: sampler;
@group(0) @binding(12) var<storage> cascadePlaneDistances: array<f32>;
@group(0) @binding(13) var<uniform> cameraView: mat4x4f;
@group(0) @binding(14) var<uniform> cameraFarPlane: f32;
@group(0) @binding(15) var<uniform> shadowsEnabled: u32;

@group(1) @binding(0) var selectedTexture: texture_2d<f32>;
@group(1) @binding(1) var<uniform> hasTexture: u32;

@vertex
fn vertexMain(vertex: Vertex, @builtin(instance_index) instanceIndex: u32, @builtin(vertex_index) vertexIndex: u32) -> VertexShaderOut {
    let transformationIndex = u32(vertex.transformationIndex);
    let transformationMatrix = transformationMatrixs[transformationIndex];
    let transformedPosition = transformationMatrix * vec4f(vertex.position, 1);

    // let shadowMapPosition = directionalLightMatrix * worldTransformationMatrixs[transformationIndex] * vec4f(vertex.position, 1);

    var output: VertexShaderOut;
    output.position = transformedPosition;
    output.color = vertex.color;
    output.originalPosition = vertex.position;
    // output.texcoord = vertex.uv;
    output.texcoord = (vec2f(vertex.position.xy) + 0.5) * 1;
    output.worldPosition = (worldTransformationMatrixs[transformationIndex] * vec4f(vertex.position, 1)).xyz;
    output.ignoreLighting = u32(vertex.ignoreLighting);
    // output.shadowMapPosition = shadowMapPosition;
    // output.textureId = u32(vertex.textureId);
    // output.scale = vertex.scale;

    return output;
}

@fragment
fn fragmentMain(data: VertexShaderOut) -> FragmentShaderOut {
    // let textureId = data.textureId;

    let textureColor = textureSample(selectedTexture, ourSampler, data.texcoord) * data.color;
    let lightAmbient = select(vec4f(0.5, 0.5, 0.5, 1), vec4f(1, 1, 1, 1), data.ignoreLighting == 1);
    // let combinedPosition = data.position.x + data.position.y + data.position.z;
    // let zColor = vec4f(data.originalPosition.z / 3, 0, 0, 1);
    // let textureColor = textureSample(testTexture, ourSampler, data.texcoord);
    // let dataColor = vec4f(min(1, data.worldPosition.x), min(1, data.worldPosition.y), min(1, data.worldPosition.z), 1);

    let baseColor = select(data.color, textureColor, hasTexture == 1);
    if (baseColor.a < 0.01) {
        discard;
    }
    let dx = dpdx(data.worldPosition);
    let dy = dpdy(data.worldPosition);
    let faceNormal = normalize(cross(dx, dy));
    let directionalLightingColorAllowed = max(0.0, -dot(faceNormal, lightDirection));
    
    var pointLightingColor = baseColor * lightAmbient;
    var test: f32;

    if (data.ignoreLighting == 0) {
        for (var i: u32 = 0; i < numPointLights; i++) {
            let pointLightPos = pointLights[i].position;
            let pointLightRadius = pointLights[i].radius;
            let pointLightColor = pointLights[i].color * pointLights[i].brightness;
            
            let lightWorldPos = data.worldPosition - pointLightPos;
            let distanceToLightNorm = sqrt(pow(lightWorldPos.x, 2) + pow(lightWorldPos.y, 2) + pow(lightWorldPos.z, 2)) / pointLightRadius;
            let lightFactor = 1 - distanceToLightNorm;
            test += pointLights[i].brightness;

            if (distanceToLightNorm > 1) {
                continue;
            };

            pointLightingColor *= vec4f(((pointLightColor * lightFactor) + 1).xyz, 1);
        };
    }

    // let finalColor = dataColor * vec4f(min(lightAmbient + directionalLightingColorAllowed, vec4f(1)).rgb, dataColor.a);
    
    // return vec4f(f32(numPointLights) / 5, 0, 0, 1);
    // return vec4f(test / 2, 0, 0, 1);

    // select cascade layer
    // let depthTextureSize = textureDimensions(depthTextureToRender);
    let cascadeCount = arrayLength(&cascadePlaneDistances);
    let fragPosViewSpace = cameraView * vec4(data.worldPosition, 1.0);
    let depthValue = abs(fragPosViewSpace.z);
        
    var layer: u32 = 9999;
    for (var i: u32 = 0; i < cascadeCount; i++) {
        if (depthValue < cascadePlaneDistances[i]) {
            layer = i;
            break;
        }
    }
    if (layer == 9999) {
        layer = cascadeCount;
    }
    
    let shadowMapSize = textureDimensions(shadowMapTexture).x;
    let oneOverSize = 1.0 / f32(shadowMapSize);
    let depthBias = 2.0 * oneOverSize;
    let normalOffset = faceNormal * 1;
    let fragPosLightSpace = directionalLightMatrices[layer] * vec4(data.worldPosition.xyz + (faceNormal * 0.5), 1.0);
    // var shadowMapUV = fragPosLightSpace.xyz / fragPosLightSpace.w;
    // shadowMapUV = shadowMapUV * 0.5 + 0.5;
    let shadowMapUV = vec4(fragPosLightSpace.xy*vec2(0.5, -0.5) + vec2(0.5, 0.5), fragPosLightSpace.z, 1.0);

    let currentDepth = shadowMapUV.z;
    var shadow = 0.0;
    // if (currentDepth <= 1.0) {
        var bias = max(0.05 * (1.0 - dot(faceNormal, lightDirection)), 0.005);
        if (layer == cascadeCount) {
            bias *= 1 / (cameraFarPlane * 0.5);
        } else {
            bias *= 1 / (cascadePlaneDistances[layer] * 0.5);
        }

        // PCF
        // var shadow = 0.0;
        let texelSize = 1.0 / vec2f(textureDimensions(shadowMapTexture));
        for(var x: i32 = -1; x <= 1; x++) {
            for(var y: i32 = -1; y <= 1; y++) {
                let offset = vec2(f32(x) * oneOverSize, f32(y) * oneOverSize);
                // let pcfDepth = textureSample(shadowMapTexture, shadowMapSampler, shadowMapUV.xy + vec2f(f32(x), f32(y)) * texelSize, layer);
                let pcfDepth = textureSample(shadowMapTexture, shadowMapSampler, shadowMapUV.xy + offset, layer);
                shadow += select(1.0, 0.0, currentDepth - depthBias > pcfDepth);
                // shadow += select(1.0, 0.0, currentDepth - bias > pcfDepth);
            }
        }
        shadow /= 9.0;
            
        // keep the shadow at 0.0 when outside the far_plane region of the light's frustum.
        if (currentDepth > 1.0) {
            shadow = 0.0;
        }
    // }

    shadow = select(shadow, 1, shadowsEnabled == 0 || data.ignoreLighting == 1);
    let shadowColor = max(0.1, shadow);

    // let worldTransformation = worldTransformationMatrixs[u32(vertex.transformationIndex)]; TEMPORARILY HERE for comparison with ShadowMap.wgsl
    // let transformedPosition = directionalLightMatrix * worldTransformation * vec4f(vertex.position, 1);

    // let shadowMapUV = (data.shadowMapPosition.xyz / data.shadowMapPosition.w) * 0.5 + 0.5; // Can try modifying this incase not working

    // let shadowDepth = textureSample(shadowMapTexture, shadowMapSampler, shadowMapUV.xy, layer);
    // let shadowColor = select(0.1, 1, shadowMapUV.z > shadowDepth);
    // var cascadeColor: vec4f;
    // if (layer == 0) {
    //     cascadeColor = vec4f(1, 0, 0, 1);
    // } else if (layer == 1) {
    //     cascadeColor = vec4f(0, 1, 0, 1);
    // } else if (layer == 2) {
    //     cascadeColor = vec4f(0, 0, 1, 1);
    // } else if (layer == 3) {
    //     cascadeColor = vec4f(1, 1, 0, 1);
    // } else if (layer == 4) {
    //     cascadeColor = vec4f(1, 0, 1, 1);
    // } else if (layer == 5) {
    //     cascadeColor = vec4f(1, 1, 1, 1);
    // }

    // let finalColor = cascadeColor;
    let finalColor = pointLightingColor * vec4f(shadowColor, shadowColor, shadowColor, 1);
    // let finalColor = pointLightingColor;
    // let finalColor = vec4f(shadowMapUV.xy, 0, 1);
    // let finalColor = vec4f(shadowColor, shadowColor, shadowColor, 1);

    var output: FragmentShaderOut;
    output.canvasColor = finalColor;

    let brightness = dot(finalColor.rgb, vec3(0.2126, 0.7152, 0.0722));
    if(brightness > 0.95) {
        output.brightColor = vec4f(finalColor.rgb, 1.0);
    } else {
        output.brightColor = vec4f(0.0, 0.0, 0.0, 1.0);
    }

    return output;
}
`,im=`
@group(0) @binding(0) var mySampler: sampler;
@group(0) @binding(1) var textureToBlur: texture_2d<f32>;
@group(0) @binding(2) var<uniform> horizontal: u32;

const weights = array<f32, 5>(0.227027, 0.1945946, 0.1216216, 0.054054, 0.016216);

@vertex
fn vertexMain(@builtin(vertex_index) vertexIndex: u32) -> @builtin(position) vec4f {
    let vertices = array(
        // Left Triangle
        vec2f(-1, -1),
        vec2f(-1, 1),
        vec2f(1, 1),
        // Right Triangle
        vec2f(-1, -1),
        vec2f(1, 1),
        vec2f(1, -1),
    );

    return vec4f(vertices[vertexIndex], 1.0, 1.0);
}

@fragment
fn fragmentMain(@builtin(position) position: vec4f) -> @location(0) vec4f {
    let textureSize = textureDimensions(textureToBlur);
    let uv = vec2f(position.x / f32(textureSize.x), position.y / f32(textureSize.y));

    let tex_offset = 1.0 / vec2f(textureSize); // gets size of single texel
    var result = textureSample(textureToBlur, mySampler, uv).rgb * weights[0]; // current fragment's contribution

    var test = 0.0;

    if (horizontal == 1) {
        test += 0.5;
        for (var i: u32 = 1; i < 5; i++) {
            result += textureSample(textureToBlur, mySampler, uv + vec2f(tex_offset.x * f32(i), 0.0)).rgb * weights[i];
            result += textureSample(textureToBlur, mySampler, uv - vec2f(tex_offset.x * f32(i), 0.0)).rgb * weights[i];
        }
    } else {
        // test += 0.5;
        for (var i: u32 = 1; i < 5; i++) {
            result += textureSample(textureToBlur, mySampler, uv + vec2f(0.0, tex_offset.y * f32(i))).rgb * weights[i];
            result += textureSample(textureToBlur, mySampler, uv - vec2f(0.0, tex_offset.y * f32(i))).rgb * weights[i];
        }
    }

    // return vec4f(test, 0, 0, 1);
    return vec4(result, 1.0);
}
`,om=`
// @group(0) @binding(0) var<uniform> directionalLightMatrix: mat4x4f;
@group(0) @binding(0) var<storage> worldTransformationMatrixs: array<mat4x4f>;

@group(1) @binding(0) var<uniform> directionalLightMatrix: mat4x4f;

struct Vertex {
    @location(0) position: vec3f,
    @location(1) transformationIndex: f32,
}

@vertex
fn vertexMain(vertex: Vertex) -> @builtin(position) vec4f {
    let worldTransformation = worldTransformationMatrixs[u32(vertex.transformationIndex)];

    let worldPosition = (worldTransformationMatrixs[u32(vertex.transformationIndex)] * vec4f(vertex.position, 1)).xyz;
    let fragPosLightSpace = directionalLightMatrix * vec4(worldPosition.xyz, 1.0);
    // let transformedPosition = directionalLightMatrix * worldTransformation * vec4f(vertex.position, 1);
    // return vec4f(0.5, 0.5, 0.5, 1);
    return fragPosLightSpace;
}

@fragment
fn fragmentMain(@builtin(position) position: vec4f) -> @location(0) vec4f {
    return vec4f(1, 0, 0, 1);
    // return vec4f(position.z, position.z, position.z, 1);
}
`,sm=`
@group(0) @binding(0) var mySampler: sampler;
@group(0) @binding(1) var renderGeometryTexture: texture_2d<f32>;
@group(0) @binding(2) var bloomTexture: texture_2d<f32>;
@group(0) @binding(3) var depthTextureToRender: texture_depth_2d_array;

@vertex
fn vertexMain(@builtin(vertex_index) vertexIndex: u32) -> @builtin(position) vec4f {
    let vertices = array(
        // Left Triangle
        vec2f(-1, -1),
        vec2f(-1, 1),
        vec2f(1, 1),
        // Right Triangle
        vec2f(-1, -1),
        vec2f(1, 1),
        vec2f(1, -1),
    );

    return vec4f(vertices[vertexIndex], 1.0, 1.0);
}

@fragment
fn fragmentMain(@builtin(position) position: vec4f) -> @location(0) vec4f {
    let textureSize = textureDimensions(renderGeometryTexture);
    let uv = vec2f(position.x / f32(textureSize.x), position.y / f32(textureSize.y));

    let renderGeometryColor = textureSample(renderGeometryTexture, mySampler, uv);
    let bloomTextureColor = textureSample(bloomTexture, mySampler, uv);

    let finalColor = renderGeometryColor + bloomTextureColor;

    return finalColor;

    // let depthTextureSize = textureDimensions(depthTextureToRender);
    // let uv = vec2f(position.x / f32(depthTextureSize.x) * 3.413, position.y / f32(depthTextureSize.y) * 3.413);

    // let depth = textureSample(depthTextureToRender, mySampler, uv, 0);

    // return vec4f(depth, depth, depth, 1);
}
`;class G{constructor(e){lt(this,"vector");this.vector=e}GetMagnitude(){return Math.sqrt(Math.pow(this.vector[0],2)+Math.pow(this.vector[1],2)+Math.pow(this.vector[2],2))}GetUnitVector(){const e=this.vector,n=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return n>1e-5?new G([e[0]/n,e[1]/n,e[2]/n]):new G([0,0,0])}GetLookVector(){const e=this.vector,n=-Math.sin(e[1]),r=Math.sin(e[0])*Math.cos(e[1]),i=-(Math.cos(e[0])*Math.cos(e[1]));return new G([n,r,i])}GetInverse(){return new G([-this.vector[0],-this.vector[1],-this.vector[2]])}MultiplyScalar(e){const n=this.vector;return new G([n[0]*e,n[1]*e,n[2]*e])}DivideScalar(e){const n=this.vector;return new G([n[0]/e,n[1]/e,n[2]/e])}AddVector(e){return new G([this.vector[0]+e.vector[0],this.vector[1]+e.vector[1],this.vector[2]+e.vector[2]])}SubtractVector(e){return new G([this.vector[0]-e.vector[0],this.vector[1]-e.vector[1],this.vector[2]-e.vector[2]])}MultiplyVector(e){return new G([this.vector[0]*e.vector[0],this.vector[1]*e.vector[1],this.vector[2]*e.vector[2]])}DotProduct(e){return this.vector[0]*e.vector[0]+this.vector[1]*e.vector[1]+this.vector[2]*e.vector[2]}CrossProduct(e){const n=this.vector[1]*e.vector[2]-this.vector[2]*e.vector[1],r=this.vector[2]*e.vector[0]-this.vector[0]*e.vector[2],i=this.vector[0]*e.vector[1]-this.vector[1]*e.vector[0];return new G([n,r,i])}}class B{constructor(e){lt(this,"matrix");this.matrix=e}lookAt(e,n,r=new G([0,1,0])){const i=n.SubtractVector(e).GetUnitVector(),o=r.CrossProduct(i).GetUnitVector(),s=i.CrossProduct(o).GetUnitVector();return new B([o.vector[0],o.vector[1],o.vector[2],0,s.vector[0],s.vector[1],s.vector[2],0,i.vector[0],i.vector[1],i.vector[2],0,e.vector[0],e.vector[1],e.vector[2],1])}RotationMatrixToEulerAngles(){const e=this.matrix;let n=0,r=0,i=0;return e[8]<1?e[8]>-1?(r=Math.asin(e[8]),n=Math.atan2(-e[9],e[10]),i=Math.atan2(-e[4],e[0])):(r=-Math.PI/2,n-Math.atan2(e[1],e[5]),i=0):(r=Math.PI/2,n=Math.atan2(e[1],e[5]),i=0),[n,r,i]}Multiply(e){const n=this.matrix,r=e.matrix,i=r[0*4+0],o=r[0*4+1],s=r[0*4+2],a=r[0*4+3],l=r[1*4+0],u=r[1*4+1],c=r[1*4+2],p=r[1*4+3],v=r[2*4+0],k=r[2*4+1],S=r[2*4+2],x=r[2*4+3],R=r[3*4+0],d=r[3*4+1],h=r[3*4+2],y=r[3*4+3],w=n[0*4+0],E=n[0*4+1],M=n[0*4+2],b=n[0*4+3],T=n[1*4+0],O=n[1*4+1],z=n[1*4+2],V=n[1*4+3],q=n[2*4+0],U=n[2*4+1],K=n[2*4+2],Y=n[2*4+3],ne=n[3*4+0],oe=n[3*4+1],L=n[3*4+2],I=n[3*4+3];return new B([i*w+o*T+s*q+a*ne,i*E+o*O+s*U+a*oe,i*M+o*z+s*K+a*L,i*b+o*V+s*Y+a*I,l*w+u*T+c*q+p*ne,l*E+u*O+c*U+p*oe,l*M+u*z+c*K+p*L,l*b+u*V+c*Y+p*I,v*w+k*T+S*q+x*ne,v*E+k*O+S*U+x*oe,v*M+k*z+S*K+x*L,v*b+k*V+S*Y+x*I,R*w+d*T+h*q+y*ne,R*E+d*O+h*U+y*oe,R*M+d*z+h*K+y*L,R*b+d*V+h*Y+y*I])}TranslationMatrix(e,n,r){return new B([1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1])}RotationZMatrix(e){const n=Math.cos(e),r=Math.sin(e);return new B([n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1])}RotationYMatrix(e){const n=Math.cos(e),r=Math.sin(e);return new B([n,0,-r,0,0,1,0,0,r,0,n,0,0,0,0,1])}RotationXMatrix(e){const n=Math.cos(e),r=Math.sin(e);return new B([1,0,0,0,0,n,r,0,0,-r,n,0,0,0,0,1])}ScalingMatrix(e,n,r){return new B([e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1])}IdentityMatrix(){return new B([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}OrthographicMatrix(e,n,r,i,o,s){return new B([2/(n-e),0,0,0,0,2/(i-r),0,0,0,0,1/(o-s),0,(n+e)/(e-n),(i+r)/(r-i),o/(o-s),1])}PerspectiveMatrix(e,n,r,i,o){const s=e*Math.PI/180,a=Math.tan(Math.PI*.5-.5*s),l=1/(i-o),u=n/r;return new B([a/u,0,0,0,0,a,0,0,0,0,o*l,-1,0,0,i*o*l,0])}InverseSigns(){const e=this.matrix;return new B([-e[0],-e[1],-e[2],-e[3],-e[4],-e[5],-e[6],-e[7],-e[8],-e[9],-e[10],-e[11],-e[12],-e[13],-e[14],-e[15]])}Inverse(){const e=this.matrix,n=e[0*4+0],r=e[0*4+1],i=e[0*4+2],o=e[0*4+3],s=e[1*4+0],a=e[1*4+1],l=e[1*4+2],u=e[1*4+3],c=e[2*4+0],p=e[2*4+1],v=e[2*4+2],k=e[2*4+3],S=e[3*4+0],x=e[3*4+1],R=e[3*4+2],d=e[3*4+3],h=v*d,y=R*k,w=l*d,E=R*u,M=l*k,b=v*u,T=i*d,O=R*o,z=i*k,V=v*o,q=i*u,U=l*o,K=c*x,Y=S*p,ne=s*x,oe=S*a,L=s*p,I=c*a,D=n*x,H=S*r,Q=n*p,We=c*r,ke=n*a,Ze=s*r,He=h*a+E*p+M*x-(y*a+w*p+b*x),mt=y*r+T*p+V*x-(h*r+O*p+z*x),Jr=w*r+O*a+q*x-(E*r+T*a+U*x),Zr=b*r+z*a+U*p-(M*r+V*a+q*p),me=1/(n*He+s*mt+c*Jr+S*Zr);return new B([me*He,me*mt,me*Jr,me*Zr,me*(y*s+w*c+b*S-(h*s+E*c+M*S)),me*(h*n+O*c+z*S-(y*n+T*c+V*S)),me*(E*n+T*s+U*S-(w*n+O*s+q*S)),me*(M*n+V*s+q*c-(b*n+z*s+U*c)),me*(K*u+oe*k+L*d-(Y*u+ne*k+I*d)),me*(Y*o+D*k+We*d-(K*o+H*k+Q*d)),me*(ne*o+H*u+ke*d-(oe*o+D*u+Ze*d)),me*(I*o+Q*u+Ze*k-(L*o+We*u+ke*k)),me*(ne*v+I*R+Y*l-(L*R+K*l+oe*v)),me*(Q*R+K*i+H*v-(D*v+We*R+Y*i)),me*(D*l+Ze*R+oe*i-(ke*R+ne*i+H*l)),me*(ke*v+L*i+We*l-(Q*l+Ze*v+I*i))])}}const ur=7500,am=1,C={Width:500,Height:500,FOV:90,Gamemode:"Edit",NumTextures:5,EditMoveSpeed:1.5,IngameMoveSpeed:1,MoveCooldown:5,LightDirection:[1,0,0],CameraFarPlane:ur,CameraNearPlane:am,ShadowCascadeLevels:[ur/10,ur/7.5,ur/5,ur/1.5],ShadowsEnabled:!1},Be=[0,0,0],Ye=[0,0,0];function Tu(t){const e=C.Width/C.Height,n=new G([(C.Width-t[0])/C.Width-.5,t[1]/C.Height-.5,1]),r=.5*(C.FOV*Math.PI/180),i=2*Math.tan(r),o=n.MultiplyScalar(i);o.vector[0]*=e,o.vector[2]=1;const s=new B([]).RotationXMatrix(Ye[0]),a=new B([]).RotationYMatrix(Ye[1]),l=new B([]).RotationZMatrix(Ye[2]),u=a.Multiply(s).Multiply(l),c=new B([]).TranslationMatrix(o.vector[0],o.vector[1],o.vector[2]),p=u.Multiply(c);return new G([p.matrix[12],p.matrix[13],p.matrix[14]]).GetUnitVector().GetInverse()}function Xr(t){const e=t.Vertices,n=new B([]).TranslationMatrix(t.Data.Offset[0],t.Data.Offset[1],t.Data.Offset[2]),r=new B([]).ScalingMatrix(t.Data.Scale[0],t.Data.Scale[1],t.Data.Scale[2]),i=new B([]).RotationZMatrix(t.Data.Rotation[2]),o=new B([]).RotationYMatrix(t.Data.Rotation[1]),s=new B([]).RotationXMatrix(t.Data.Rotation[0]),a=n.Multiply(s).Multiply(o).Multiply(i).Multiply(r),l=[];return e.forEach((u,c)=>{const p=c%3;p===0&&l.push([0,0,0]),l[Math.floor(c/3)][p]=u}),l.map((u,c)=>{const p=new B([]).TranslationMatrix(u[0],u[1],u[2]),v=a.Multiply(p);return[v.matrix[12],v.matrix[13],v.matrix[14]]})}function ud(t,e){return e===void 0&&(e=Xr(t)),new G(sl(e,"Center"))}function cd(t,e){return e===void 0&&(e=Xr(t)),new G(sl(e,"Min"))}function fd(t,e){return e===void 0&&(e=Xr(t)),new G(sl(e,"Max"))}function sl(t,e){let n=[9999999999,9999999999,9999999999],r=[-9999999999,-9999999999,-9999999999];t.forEach((l,u)=>{for(let c=0;c<3;c++)l[c]<n[c]&&(n[c]=l[c]),l[c]>r[c]&&(r[c]=l[c])});const i=[r[0]-n[0],r[1]-n[1],r[2]-n[2]],o=[i[0]/2,i[1]/2,i[2]/2],s=[o[0]+n[0],o[1]+n[1],o[2]+n[2]];return{Min:n,Max:r,Center:s}[e]}const be={Vertices:[.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5],Index:[0,1,5,0,5,4,0,7,3,0,4,7,0,3,2,0,2,1,4,6,7,4,5,6,3,7,6,3,6,2,2,5,1,2,6,5],Normals:[],Data:{Color:[1,1,1,1],Offset:[0,0,-250],Scale:[75,75,75],Rotation:[0,0,0],Name:"Cube"}},lm={Vertices:[0,0,0],Index:[0,0,0],Normals:[],Data:{Name:"DefaultObject",Offset:[0,0,0],Scale:[0,0,0],Color:[0,0,0,0],Rotation:[0,0,0],IgnoreRaycast:!0,DontSave:!0,DontShowInExplorer:!0}},io=[lm];function Jn(){return io}function oo(t){io.push(t)}function Mu(){io.splice(1,io.length)}function um(t){const e=Jn();let n=0;e.forEach(r=>{t.indexOf(r)>-1?e.splice(n,1):n++})}function cm(t){const e=Jn();let n=0;e.forEach(r=>{r.Data.InternalName===t?e.splice(n,1):n++})}function fm(t){return Jn().filter(e=>e.Data.Name===t)}function dm(){return Jn().filter(t=>!t.Data.DontSave)}function ia(t,e){e=e||new B([]).IdentityMatrix();const n=t.Multiply(e).Inverse(),r=[];for(let i=0;i<2;i++)for(let o=0;o<2;o++)for(let s=0;s<2;s++){const a=new G([2*i-1,2*o-1,s]).vector,l=n.Multiply(new B([]).TranslationMatrix(a[0],a[1],a[2])).matrix,u=new G([l[12],l[13],l[14]]).DivideScalar(l[15]);r.push(u)}return r}function To(t,e){const n=Be,r=Ye,i=new B([]).TranslationMatrix(n[0],n[1],n[2]),o=new B([]).RotationXMatrix(r[0]),s=new B([]).RotationYMatrix(r[1]),a=new B([]).RotationZMatrix(r[2]);return i.Multiply(s).Multiply(o).Multiply(a).Inverse()}function hm(){const t=new B([]).PerspectiveMatrix(C.FOV,C.Width,C.Height,C.CameraNearPlane,C.CameraFarPlane),e=To();return t.Multiply(e)}function ns(t,e){let r=new G([0,0,0]);const i=new B([]).PerspectiveMatrix(C.FOV,C.Width,C.Height,t,e),o=ia(i,To());o.forEach(x=>{r=r.AddVector(x)}),r=r.DivideScalar(o.length),r.AddVector(new G(C.LightDirection).GetUnitVector());const s=new B([]).lookAt(new G([0,0,0]),new G(C.LightDirection).GetInverse().GetUnitVector());let a=99999999999,l=-99999999999,u=99999999999,c=-99999999999,p=99999999999,v=-99999999999;o.forEach(x=>{const R=s.Multiply(new B([]).TranslationMatrix(x.vector[0],x.vector[1],x.vector[2])).matrix,d=new G([R[12],R[13],R[14]]).vector;a=Math.min(a,d[0]),l=Math.max(l,d[0]),u=Math.min(u,d[1]),c=Math.max(c,d[1]),p=Math.min(p,d[2]),v=Math.max(v,d[2])}),p=p<0?p*5:p/5;let k;{const x=o[7].SubtractVector(o[1]).GetMagnitude(),R=o[7].SubtractVector(o[0]).GetMagnitude();k=Math.max(x,R)}{const x=l-a,R=c-u;let d=k-R;d>0&&(c+=d/2,u-=d/2),d=k-x,d>0&&(l+=d/2,a-=d/2)}return new B([]).OrthographicMatrix(a,l,u,c,-p,-v).Multiply(s)}function al(){const t=C.ShadowCascadeLevels,e=[];for(let n=0;n<t.length+1;n++)n==0?e.push(ns(C.CameraNearPlane,t[n])):n<t.length?e.push(ns(t[n-1],t[n])):e.push(ns(t[n-1],C.CameraFarPlane));return e}function pm(){const t=hm(),e=[],n=[],r=[],i=[],o=[],s=[],a=[],l=[{position:[0,0,0],radius:0,color:[0,0,0,0],brightness:0}];let u=1,c=0,p=0,v=0,k=0;return Jn().forEach((x,R)=>{const d=x.Data.Light;let h=0,y=0,w=0,E=0;if(x.Vertices.forEach(U=>{h+=4,e.push(U)}),x.Index.forEach(U=>{y+=4,n.push(U)}),x.Data.Color.forEach(U=>{w+=4,r.push(U)}),w+=8,r.push(R),r.push(x.Data.IgnoreLighting?1:0),x.UV&&x.IndexUVs){const U=x.UV;x.IndexUVs.forEach(K=>{E+=8,i.push(U[K*2+0]),i.push(U[K*2+1])})}else x.Index.forEach(U=>{E+=8,i.push(U),i.push(U)});const M=new B([]).TranslationMatrix(x.Data.Offset[0],x.Data.Offset[1],x.Data.Offset[2]),b=new B([]).ScalingMatrix(x.Data.Scale[0],x.Data.Scale[1],x.Data.Scale[2]),T=new B([]).RotationZMatrix(x.Data.Rotation[2]),O=new B([]).RotationYMatrix(x.Data.Rotation[1]),z=new B([]).RotationXMatrix(x.Data.Rotation[0]);if(t.Multiply(M).Multiply(z).Multiply(O).Multiply(T).Multiply(b).matrix.forEach(U=>{o.push(U)}),M.Multiply(z).Multiply(O).Multiply(T).Multiply(b).matrix.forEach(U=>{s.push(U)}),d){const U=ud(x).vector,K={position:[U[0],U[1],U[2]],radius:d.Radius,color:[d.Color[0],d.Color[1],d.Color[2],d.Color[3]],brightness:d.Brightness};l.push(K),u+=1}a.push({VertexOffset:c,VertexSize:h,IndexOffset:p,IndexSize:y,InstanceDataOffset:v,InstanceDataSize:w,VertexDataOffset:k,VertexDataSize:E,TextureId:Math.min(x.Data.TextureId||0,C.NumTextures)}),c+=h,p+=y,v+=w,k+=E}),{Vertices:new Float32Array(e),Index:new Uint32Array(n),Data:new Float32Array(r),VertexData:new Float32Array(i),Transformation:new Float32Array(o),WorldTransformation:new Float32Array(s),DirectionalLightMatrices:al().map(x=>new Float32Array(x.matrix.flat())),OffsetData:a,PointLights:l,NumPointLights:u}}function Ln(t){const e=t.RandomColor?[Math.random(),Math.random(),Math.random(),1]:t.Color||[1,1,1,1];let n=Array.from(be.Data.Offset);t.UseCameraOffset?n=[Be[0],Be[1],Be[2]]:t.Offset&&(n=Array.from(t.Offset));const r={Vertices:Array.from(be.Vertices),Index:Array.from(be.Index),Normals:Array.from(be.Normals),UV:be.UV?Array.from(be.UV):void 0,IndexUVs:be.IndexUVs?Array.from(be.IndexUVs):void 0,Data:{Color:e,Offset:n,Scale:t.Scale?Array.from(t.Scale):Array.from(be.Data.Scale),Rotation:t.Rotation?Array.from(t.Rotation):Array.from(be.Data.Rotation),Name:t.Name||be.Data.Name,DontSave:t.DontSave,IgnoreRaycast:t.IgnoreRaycast,IgnoreLighting:t.IgnoreLighting}};return oo(r),r}const ll=(t,e)=>((t+e-1)/e|0)*e;function mm(t){return Object.keys(t)}function gm(t,e){return new Array(t).fill(0).map((n,r)=>e(r))}const Cu=t=>t&&typeof t.length=="number"&&t.buffer instanceof ArrayBuffer&&typeof t.byteLength=="number",dd=t=>t,j=dd({i32:{numElements:1,align:4,size:4,type:"i32",View:Int32Array},u32:{numElements:1,align:4,size:4,type:"u32",View:Uint32Array},f32:{numElements:1,align:4,size:4,type:"f32",View:Float32Array},f16:{numElements:1,align:2,size:2,type:"u16",View:Uint16Array},vec2f:{numElements:2,align:8,size:8,type:"f32",View:Float32Array},vec2i:{numElements:2,align:8,size:8,type:"i32",View:Int32Array},vec2u:{numElements:2,align:8,size:8,type:"u32",View:Uint32Array},vec2h:{numElements:2,align:4,size:4,type:"u16",View:Uint16Array},vec3i:{numElements:3,align:16,size:12,type:"i32",View:Int32Array},vec3u:{numElements:3,align:16,size:12,type:"u32",View:Uint32Array},vec3f:{numElements:3,align:16,size:12,type:"f32",View:Float32Array},vec3h:{numElements:3,align:8,size:6,type:"u16",View:Uint16Array},vec4i:{numElements:4,align:16,size:16,type:"i32",View:Int32Array},vec4u:{numElements:4,align:16,size:16,type:"u32",View:Uint32Array},vec4f:{numElements:4,align:16,size:16,type:"f32",View:Float32Array},vec4h:{numElements:4,align:8,size:8,type:"u16",View:Uint16Array},mat2x2f:{numElements:4,align:8,size:16,type:"f32",View:Float32Array},mat2x2h:{numElements:4,align:4,size:8,type:"u16",View:Uint16Array},mat3x2f:{numElements:6,align:8,size:24,type:"f32",View:Float32Array},mat3x2h:{numElements:6,align:4,size:12,type:"u16",View:Uint16Array},mat4x2f:{numElements:8,align:8,size:32,type:"f32",View:Float32Array},mat4x2h:{numElements:8,align:4,size:16,type:"u16",View:Uint16Array},mat2x3f:{numElements:8,align:16,size:32,pad:[3,1],type:"f32",View:Float32Array},mat2x3h:{numElements:8,align:8,size:16,pad:[3,1],type:"u16",View:Uint16Array},mat3x3f:{numElements:12,align:16,size:48,pad:[3,1],type:"f32",View:Float32Array},mat3x3h:{numElements:12,align:8,size:24,pad:[3,1],type:"u16",View:Uint16Array},mat4x3f:{numElements:16,align:16,size:64,pad:[3,1],type:"f32",View:Float32Array},mat4x3h:{numElements:16,align:8,size:32,pad:[3,1],type:"u16",View:Uint16Array},mat2x4f:{numElements:8,align:16,size:32,type:"f32",View:Float32Array},mat2x4h:{numElements:8,align:8,size:16,type:"u16",View:Uint16Array},mat3x4f:{numElements:12,align:16,size:48,pad:[3,1],type:"f32",View:Float32Array},mat3x4h:{numElements:12,align:8,size:24,pad:[3,1],type:"u16",View:Uint16Array},mat4x4f:{numElements:16,align:16,size:64,type:"f32",View:Float32Array},mat4x4h:{numElements:16,align:8,size:32,type:"u16",View:Uint16Array},bool:{numElements:0,align:1,size:0,type:"bool",View:Uint32Array}}),Zn=dd({...j,"atomic<i32>":j.i32,"atomic<u32>":j.u32,"vec2<i32>":j.vec2i,"vec2<u32>":j.vec2u,"vec2<f32>":j.vec2f,"vec2<f16>":j.vec2h,"vec3<i32>":j.vec3i,"vec3<u32>":j.vec3u,"vec3<f32>":j.vec3f,"vec3<f16>":j.vec3h,"vec4<i32>":j.vec4i,"vec4<u32>":j.vec4u,"vec4<f32>":j.vec4f,"vec4<f16>":j.vec4h,"mat2x2<f32>":j.mat2x2f,"mat2x2<f16>":j.mat2x2h,"mat3x2<f32>":j.mat3x2f,"mat3x2<f16>":j.mat3x2h,"mat4x2<f32>":j.mat4x2f,"mat4x2<f16>":j.mat4x2h,"mat2x3<f32>":j.mat2x3f,"mat2x3<f16>":j.mat2x3h,"mat3x3<f32>":j.mat3x3f,"mat3x3<f16>":j.mat3x3h,"mat4x3<f32>":j.mat4x3f,"mat4x3<f16>":j.mat4x3h,"mat2x4<f32>":j.mat2x4f,"mat2x4<f16>":j.mat2x4h,"mat3x4<f32>":j.mat3x4f,"mat3x4<f16>":j.mat3x4h,"mat4x4<f32>":j.mat4x4f,"mat4x4<f16>":j.mat4x4h}),ym=mm(Zn);function vm(t=[],e){const n=new Set;for(const r of ym){const i=Zn[r];n.has(i)||(n.add(i),i.flatten=t.includes(r)?e:!e)}}vm();function _m(t){const e=t;if(e.elementType)return e.size;{const r=t,i=e.numElements||1;if(r.fields)return t.size*i;{const o=t,{align:s}=Zn[o.type];return i>1?ll(t.size,s)*i:t.size}}}function Pu(t,e,n,r){const{size:i,type:o}=t;try{const{View:s,align:a}=Zn[o],l=r!==void 0,u=l?ll(i,a):i,c=u/s.BYTES_PER_ELEMENT,p=l?r===0?(e.byteLength-n)/u:r:1;return new s(e,n,c*p)}catch{throw new Error(`unknown type: ${o}`)}}function wm(t){return!t.fields&&!t.elementType}function xm(t,e,n){const r=n||0,i=e||new ArrayBuffer(_m(t)),o=(s,a)=>{const l=s,u=l.elementType;if(u){if(wm(u)&&Zn[u.type].flatten)return Pu(u,i,a,l.numElements);{const{size:c}=ul(s),p=l.numElements===0?(i.byteLength-a)/c:l.numElements;return gm(p,v=>o(u,a+c*v))}}else{if(typeof s=="string")throw Error("unreachable");{const c=s.fields;if(c){const p={};for(const[v,{type:k,offset:S}]of Object.entries(c))p[v]=o(k,a+S);return p}else return Pu(s,i,a)}}};return{views:o(t,r),arrayBuffer:i}}function oa(t,e){if(t!==void 0)if(Cu(e)){const n=e;if(n.length===1&&typeof t=="number")n[0]=t;else if(Array.isArray(t[0])||Cu(t[0])){const r=t[0].length,i=r===3?4:r;for(let o=0;o<t.length;++o){const s=o*i;n.set(t[o],s)}}else n.set(t)}else if(Array.isArray(e)){const n=e;t.forEach((r,i)=>{oa(r,n[i])})}else{const n=e;for(const[r,i]of Object.entries(t)){const o=n[r];o&&oa(i,o)}}}function km(t,e,n=0){const r=t,i=r.group===void 0?t:r.typeDefinition,o=xm(i,e,n);return{...o,set(s){oa(s,o.views)}}}function sa(t){const n=t.elementType;if(n)return sa(n);const i=t.fields;if(i)return Object.values(i).reduce((a,{type:l})=>Math.max(a,sa(l)),0);const{type:o}=t,{align:s}=Zn[o];return s}function ul(t){const n=t.elementType;if(n){const o=n.size,s=sa(n);return{unalignedSize:o,align:s,size:ll(o,s)}}const i=t.fields;if(i){const o=Object.values(i).pop();if(o.type.size===0)return ul(o.type)}return{size:0,unalignedSize:0,align:1}}function Sm(t){const e=t,n=e.group===void 0?t:e.typeDefinition;return ul(n)}class Em{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class Nt{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(e){throw new Error("Cannot evaluate node")}evaluateString(e){return this.evaluate(e).toString()}search(e){}searchBlock(e,n){if(e){n(so.instance);for(const r of e)r instanceof Array?this.searchBlock(r,n):r.search(n);n(ao.instance)}}}class so extends Nt{}so.instance=new so;class ao extends Nt{}ao.instance=new ao;class ie extends Nt{constructor(){super()}}class aa extends ie{constructor(e,n,r,i,o,s){super(),this.calls=new Set,this.name=e,this.args=n,this.returnType=r,this.body=i,this.startLine=o,this.endLine=s}get astNodeType(){return"function"}search(e){this.searchBlock(this.body,e)}}class Tm extends ie{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class Mm extends ie{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class Cm extends ie{constructor(e){super(),this.body=e}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class Pm extends ie{constructor(e,n,r,i){super(),this.init=e,this.condition=n,this.increment=r,this.body=i}get astNodeType(){return"for"}search(e){var n,r,i;(n=this.init)===null||n===void 0||n.search(e),(r=this.condition)===null||r===void 0||r.search(e),(i=this.increment)===null||i===void 0||i.search(e),this.searchBlock(this.body,e)}}class en extends ie{constructor(e,n,r,i,o){super(),this.name=e,this.type=n,this.storage=r,this.access=i,this.value=o}get astNodeType(){return"var"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class hd extends ie{constructor(e,n,r){super(),this.name=e,this.type=n,this.value=r}get astNodeType(){return"override"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class la extends ie{constructor(e,n,r,i,o){super(),this.name=e,this.type=n,this.storage=r,this.access=i,this.value=o}get astNodeType(){return"let"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class Nu extends ie{constructor(e,n,r,i,o){super(),this.name=e,this.type=n,this.storage=r,this.access=i,this.value=o}get astNodeType(){return"const"}evaluate(e){return this.value.evaluate(e)}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}var Yn;(function(t){t.increment="++",t.decrement="--"})(Yn||(Yn={}));(function(t){function e(n){const r=n;if(r=="parse")throw new Error("Invalid value for IncrementOperator");return t[r]}t.parse=e})(Yn||(Yn={}));class Nm extends ie{constructor(e,n){super(),this.operator=e,this.variable=n}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}var jr;(function(t){t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(jr||(jr={}));(function(t){function e(n){const r=n;if(r=="parse")throw new Error("Invalid value for AssignOperator");return r}t.parse=e})(jr||(jr={}));class Lm extends ie{constructor(e,n,r){super(),this.operator=e,this.variable=n,this.value=r}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class pd extends ie{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"call"}search(e){for(const n of this.args)n.search(e);e(this)}}class bm extends ie{constructor(e,n){super(),this.body=e,this.continuing=n}get astNodeType(){return"loop"}}class zm extends ie{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"body"}}class Am extends ie{constructor(e,n,r,i){super(),this.condition=e,this.body=n,this.elseif=r,this.else=i}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class Rm extends ie{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class Om extends ie{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class Im extends ie{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class Dm extends ie{constructor(e,n){super(),this.severity=e,this.rule=n}get astNodeType(){return"diagnostic"}}class md extends ie{constructor(e,n){super(),this.name=e,this.type=n}get astNodeType(){return"alias"}}class Um extends ie{constructor(){super()}get astNodeType(){return"discard"}}class Bm extends ie{constructor(){super()}get astNodeType(){return"break"}}class Gm extends ie{constructor(){super()}get astNodeType(){return"continue"}}class mn extends ie{constructor(e){super(),this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class Zt extends mn{constructor(e,n,r,i){super(e),this.members=n,this.startLine=r,this.endLine=i}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let n=0;n<this.members.length;n++)if(this.members[n].name==e)return n;return-1}}class gd extends mn{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"template"}}class Vm extends mn{constructor(e,n,r,i){super(e),this.storage=n,this.type=r,this.access=i}get astNodeType(){return"pointer"}}class yd extends mn{constructor(e,n,r,i){super(e),this.attributes=n,this.format=r,this.count=i}get astNodeType(){return"array"}get isArray(){return!0}}class gr extends mn{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"sampler"}}class at extends Nt{constructor(){super()}}class Lu extends at{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class bn extends at{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"createExpr"}search(e){e(this);for(const n of this.args)n.search(e)}}class vd extends at{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"callExpr"}evaluate(e){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(e));case"acos":return Math.acos(this.args[0].evaluate(e));case"acosh":return Math.acosh(this.args[0].evaluate(e));case"asin":return Math.asin(this.args[0].evaluate(e));case"asinh":return Math.asinh(this.args[0].evaluate(e));case"atan":return Math.atan(this.args[0].evaluate(e));case"atan2":return Math.atan2(this.args[0].evaluate(e),this.args[1].evaluate(e));case"atanh":return Math.atanh(this.args[0].evaluate(e));case"ceil":return Math.ceil(this.args[0].evaluate(e));case"clamp":return Math.min(Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e)),this.args[2].evaluate(e));case"cos":return Math.cos(this.args[0].evaluate(e));case"degrees":return this.args[0].evaluate(e)*180/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(e)-this.args[1].evaluate(e),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(e));case"exp2":return Math.pow(2,this.args[0].evaluate(e));case"floor":return Math.floor(this.args[0].evaluate(e));case"fma":return this.args[0].evaluate(e)*this.args[1].evaluate(e)+this.args[2].evaluate(e);case"fract":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(e));case"log":return Math.log(this.args[0].evaluate(e));case"log2":return Math.log2(this.args[0].evaluate(e));case"max":return Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e));case"min":return Math.min(this.args[0].evaluate(e),this.args[1].evaluate(e));case"mix":return this.args[0].evaluate(e)*(1-this.args[2].evaluate(e))+this.args[1].evaluate(e)*this.args[2].evaluate(e);case"modf":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"pow":return Math.pow(this.args[0].evaluate(e),this.args[1].evaluate(e));case"radians":return this.args[0].evaluate(e)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(e));case"sign":return Math.sign(this.args[0].evaluate(e));case"sin":return Math.sin(this.args[0].evaluate(e));case"sinh":return Math.sinh(this.args[0].evaluate(e));case"saturate":return Math.min(Math.max(this.args[0].evaluate(e),0),1);case"smoothstep":return this.args[0].evaluate(e)*this.args[0].evaluate(e)*(3-2*this.args[0].evaluate(e));case"sqrt":return Math.sqrt(this.args[0].evaluate(e));case"step":return this.args[0].evaluate(e)<this.args[1].evaluate(e)?0:1;case"tan":return Math.tan(this.args[0].evaluate(e));case"tanh":return Math.tanh(this.args[0].evaluate(e));case"trunc":return Math.trunc(this.args[0].evaluate(e));default:throw new Error("Non const function: "+this.name)}}search(e){for(const n of this.args)n.search(e);e(this)}}class ua extends at{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}evaluate(e){const n=e.constants.get(this.name);if(!n)throw new Error("Cannot evaluate node");return n.evaluate(e)}}class bu extends at{constructor(e,n){super(),this.name=e,this.initializer=n}get astNodeType(){return"constExpr"}evaluate(e){var n,r;if(this.initializer instanceof bn){const i=(n=this.postfix)===null||n===void 0?void 0:n.evaluateString(e),o=(r=this.initializer.type)===null||r===void 0?void 0:r.name,s=e.structs.get(o),a=s==null?void 0:s.getMemberIndex(i);if(a!=-1)return this.initializer.args[a].evaluate(e);console.log(a)}return this.initializer.evaluate(e)}search(e){this.initializer.search(e)}}class zu extends at{constructor(e){super(),this.value=e}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class Fm extends at{constructor(e,n){super(),this.type=e,this.value=n}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class jm extends at{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"typecastExpr"}evaluate(e){return this.args[0].evaluate(e)}search(e){this.searchBlock(this.args,e)}}class Au extends at{constructor(e){super(),this.contents=e}get astNodeType(){return"groupExpr"}evaluate(e){return this.contents[0].evaluate(e)}search(e){this.searchBlock(this.contents,e)}}class Wm extends at{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class _d extends at{constructor(){super()}}class Hm extends _d{constructor(e,n){super(),this.operator=e,this.right=n}get astNodeType(){return"unaryOp"}evaluate(e){switch(this.operator){case"+":return this.right.evaluate(e);case"-":return-this.right.evaluate(e);case"!":return this.right.evaluate(e)?0:1;case"~":return~this.right.evaluate(e);default:throw new Error("Unknown unary operator: "+this.operator)}}search(e){this.right.search(e)}}class ct extends _d{constructor(e,n,r){super(),this.operator=e,this.left=n,this.right=r}get astNodeType(){return"binaryOp"}evaluate(e){switch(this.operator){case"+":return this.left.evaluate(e)+this.right.evaluate(e);case"-":return this.left.evaluate(e)-this.right.evaluate(e);case"*":return this.left.evaluate(e)*this.right.evaluate(e);case"/":return this.left.evaluate(e)/this.right.evaluate(e);case"%":return this.left.evaluate(e)%this.right.evaluate(e);case"==":return this.left.evaluate(e)==this.right.evaluate(e)?1:0;case"!=":return this.left.evaluate(e)!=this.right.evaluate(e)?1:0;case"<":return this.left.evaluate(e)<this.right.evaluate(e)?1:0;case">":return this.left.evaluate(e)>this.right.evaluate(e)?1:0;case"<=":return this.left.evaluate(e)<=this.right.evaluate(e)?1:0;case">=":return this.left.evaluate(e)>=this.right.evaluate(e)?1:0;case"&&":return this.left.evaluate(e)&&this.right.evaluate(e)?1:0;case"||":return this.left.evaluate(e)||this.right.evaluate(e)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(e){this.left.search(e),this.right.search(e)}}class wd extends Nt{constructor(){super()}}class $m extends wd{constructor(e,n){super(),this.selector=e,this.body=n}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class qm extends wd{constructor(e){super(),this.body=e}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class Ym extends Nt{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"argument"}}class Qm extends Nt{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class Xm extends Nt{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"member"}}class Ru extends Nt{constructor(e,n){super(),this.name=e,this.value=n}get astNodeType(){return"attribute"}}var _,m;(function(t){t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(m||(m={}));class g{constructor(e,n,r){this.name=e,this.type=n,this.rule=r}toString(){return this.name}}class f{}_=f;f.none=new g("",m.reserved,"");f.eof=new g("EOF",m.token,"");f.reserved={asm:new g("asm",m.reserved,"asm"),bf16:new g("bf16",m.reserved,"bf16"),do:new g("do",m.reserved,"do"),enum:new g("enum",m.reserved,"enum"),f16:new g("f16",m.reserved,"f16"),f64:new g("f64",m.reserved,"f64"),handle:new g("handle",m.reserved,"handle"),i8:new g("i8",m.reserved,"i8"),i16:new g("i16",m.reserved,"i16"),i64:new g("i64",m.reserved,"i64"),mat:new g("mat",m.reserved,"mat"),premerge:new g("premerge",m.reserved,"premerge"),regardless:new g("regardless",m.reserved,"regardless"),typedef:new g("typedef",m.reserved,"typedef"),u8:new g("u8",m.reserved,"u8"),u16:new g("u16",m.reserved,"u16"),u64:new g("u64",m.reserved,"u64"),unless:new g("unless",m.reserved,"unless"),using:new g("using",m.reserved,"using"),vec:new g("vec",m.reserved,"vec"),void:new g("void",m.reserved,"void")};f.keywords={array:new g("array",m.keyword,"array"),atomic:new g("atomic",m.keyword,"atomic"),bool:new g("bool",m.keyword,"bool"),f32:new g("f32",m.keyword,"f32"),i32:new g("i32",m.keyword,"i32"),mat2x2:new g("mat2x2",m.keyword,"mat2x2"),mat2x3:new g("mat2x3",m.keyword,"mat2x3"),mat2x4:new g("mat2x4",m.keyword,"mat2x4"),mat3x2:new g("mat3x2",m.keyword,"mat3x2"),mat3x3:new g("mat3x3",m.keyword,"mat3x3"),mat3x4:new g("mat3x4",m.keyword,"mat3x4"),mat4x2:new g("mat4x2",m.keyword,"mat4x2"),mat4x3:new g("mat4x3",m.keyword,"mat4x3"),mat4x4:new g("mat4x4",m.keyword,"mat4x4"),ptr:new g("ptr",m.keyword,"ptr"),sampler:new g("sampler",m.keyword,"sampler"),sampler_comparison:new g("sampler_comparison",m.keyword,"sampler_comparison"),struct:new g("struct",m.keyword,"struct"),texture_1d:new g("texture_1d",m.keyword,"texture_1d"),texture_2d:new g("texture_2d",m.keyword,"texture_2d"),texture_2d_array:new g("texture_2d_array",m.keyword,"texture_2d_array"),texture_3d:new g("texture_3d",m.keyword,"texture_3d"),texture_cube:new g("texture_cube",m.keyword,"texture_cube"),texture_cube_array:new g("texture_cube_array",m.keyword,"texture_cube_array"),texture_multisampled_2d:new g("texture_multisampled_2d",m.keyword,"texture_multisampled_2d"),texture_storage_1d:new g("texture_storage_1d",m.keyword,"texture_storage_1d"),texture_storage_2d:new g("texture_storage_2d",m.keyword,"texture_storage_2d"),texture_storage_2d_array:new g("texture_storage_2d_array",m.keyword,"texture_storage_2d_array"),texture_storage_3d:new g("texture_storage_3d",m.keyword,"texture_storage_3d"),texture_depth_2d:new g("texture_depth_2d",m.keyword,"texture_depth_2d"),texture_depth_2d_array:new g("texture_depth_2d_array",m.keyword,"texture_depth_2d_array"),texture_depth_cube:new g("texture_depth_cube",m.keyword,"texture_depth_cube"),texture_depth_cube_array:new g("texture_depth_cube_array",m.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new g("texture_depth_multisampled_2d",m.keyword,"texture_depth_multisampled_2d"),texture_external:new g("texture_external",m.keyword,"texture_external"),u32:new g("u32",m.keyword,"u32"),vec2:new g("vec2",m.keyword,"vec2"),vec3:new g("vec3",m.keyword,"vec3"),vec4:new g("vec4",m.keyword,"vec4"),bitcast:new g("bitcast",m.keyword,"bitcast"),block:new g("block",m.keyword,"block"),break:new g("break",m.keyword,"break"),case:new g("case",m.keyword,"case"),continue:new g("continue",m.keyword,"continue"),continuing:new g("continuing",m.keyword,"continuing"),default:new g("default",m.keyword,"default"),diagnostic:new g("diagnostic",m.keyword,"diagnostic"),discard:new g("discard",m.keyword,"discard"),else:new g("else",m.keyword,"else"),enable:new g("enable",m.keyword,"enable"),fallthrough:new g("fallthrough",m.keyword,"fallthrough"),false:new g("false",m.keyword,"false"),fn:new g("fn",m.keyword,"fn"),for:new g("for",m.keyword,"for"),function:new g("function",m.keyword,"function"),if:new g("if",m.keyword,"if"),let:new g("let",m.keyword,"let"),const:new g("const",m.keyword,"const"),loop:new g("loop",m.keyword,"loop"),while:new g("while",m.keyword,"while"),private:new g("private",m.keyword,"private"),read:new g("read",m.keyword,"read"),read_write:new g("read_write",m.keyword,"read_write"),return:new g("return",m.keyword,"return"),requires:new g("requires",m.keyword,"requires"),storage:new g("storage",m.keyword,"storage"),switch:new g("switch",m.keyword,"switch"),true:new g("true",m.keyword,"true"),alias:new g("alias",m.keyword,"alias"),type:new g("type",m.keyword,"type"),uniform:new g("uniform",m.keyword,"uniform"),var:new g("var",m.keyword,"var"),override:new g("override",m.keyword,"override"),workgroup:new g("workgroup",m.keyword,"workgroup"),write:new g("write",m.keyword,"write"),r8unorm:new g("r8unorm",m.keyword,"r8unorm"),r8snorm:new g("r8snorm",m.keyword,"r8snorm"),r8uint:new g("r8uint",m.keyword,"r8uint"),r8sint:new g("r8sint",m.keyword,"r8sint"),r16uint:new g("r16uint",m.keyword,"r16uint"),r16sint:new g("r16sint",m.keyword,"r16sint"),r16float:new g("r16float",m.keyword,"r16float"),rg8unorm:new g("rg8unorm",m.keyword,"rg8unorm"),rg8snorm:new g("rg8snorm",m.keyword,"rg8snorm"),rg8uint:new g("rg8uint",m.keyword,"rg8uint"),rg8sint:new g("rg8sint",m.keyword,"rg8sint"),r32uint:new g("r32uint",m.keyword,"r32uint"),r32sint:new g("r32sint",m.keyword,"r32sint"),r32float:new g("r32float",m.keyword,"r32float"),rg16uint:new g("rg16uint",m.keyword,"rg16uint"),rg16sint:new g("rg16sint",m.keyword,"rg16sint"),rg16float:new g("rg16float",m.keyword,"rg16float"),rgba8unorm:new g("rgba8unorm",m.keyword,"rgba8unorm"),rgba8unorm_srgb:new g("rgba8unorm_srgb",m.keyword,"rgba8unorm_srgb"),rgba8snorm:new g("rgba8snorm",m.keyword,"rgba8snorm"),rgba8uint:new g("rgba8uint",m.keyword,"rgba8uint"),rgba8sint:new g("rgba8sint",m.keyword,"rgba8sint"),bgra8unorm:new g("bgra8unorm",m.keyword,"bgra8unorm"),bgra8unorm_srgb:new g("bgra8unorm_srgb",m.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new g("rgb10a2unorm",m.keyword,"rgb10a2unorm"),rg11b10float:new g("rg11b10float",m.keyword,"rg11b10float"),rg32uint:new g("rg32uint",m.keyword,"rg32uint"),rg32sint:new g("rg32sint",m.keyword,"rg32sint"),rg32float:new g("rg32float",m.keyword,"rg32float"),rgba16uint:new g("rgba16uint",m.keyword,"rgba16uint"),rgba16sint:new g("rgba16sint",m.keyword,"rgba16sint"),rgba16float:new g("rgba16float",m.keyword,"rgba16float"),rgba32uint:new g("rgba32uint",m.keyword,"rgba32uint"),rgba32sint:new g("rgba32sint",m.keyword,"rgba32sint"),rgba32float:new g("rgba32float",m.keyword,"rgba32float"),static_assert:new g("static_assert",m.keyword,"static_assert")};f.tokens={decimal_float_literal:new g("decimal_float_literal",m.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new g("hex_float_literal",m.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new g("int_literal",m.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new g("uint_literal",m.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new g("ident",m.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new g("and",m.token,"&"),and_and:new g("and_and",m.token,"&&"),arrow:new g("arrow ",m.token,"->"),attr:new g("attr",m.token,"@"),attr_left:new g("attr_left",m.token,"[["),attr_right:new g("attr_right",m.token,"]]"),forward_slash:new g("forward_slash",m.token,"/"),bang:new g("bang",m.token,"!"),bracket_left:new g("bracket_left",m.token,"["),bracket_right:new g("bracket_right",m.token,"]"),brace_left:new g("brace_left",m.token,"{"),brace_right:new g("brace_right",m.token,"}"),colon:new g("colon",m.token,":"),comma:new g("comma",m.token,","),equal:new g("equal",m.token,"="),equal_equal:new g("equal_equal",m.token,"=="),not_equal:new g("not_equal",m.token,"!="),greater_than:new g("greater_than",m.token,">"),greater_than_equal:new g("greater_than_equal",m.token,">="),shift_right:new g("shift_right",m.token,">>"),less_than:new g("less_than",m.token,"<"),less_than_equal:new g("less_than_equal",m.token,"<="),shift_left:new g("shift_left",m.token,"<<"),modulo:new g("modulo",m.token,"%"),minus:new g("minus",m.token,"-"),minus_minus:new g("minus_minus",m.token,"--"),period:new g("period",m.token,"."),plus:new g("plus",m.token,"+"),plus_plus:new g("plus_plus",m.token,"++"),or:new g("or",m.token,"|"),or_or:new g("or_or",m.token,"||"),paren_left:new g("paren_left",m.token,"("),paren_right:new g("paren_right",m.token,")"),semicolon:new g("semicolon",m.token,";"),star:new g("star",m.token,"*"),tilde:new g("tilde",m.token,"~"),underscore:new g("underscore",m.token,"_"),xor:new g("xor",m.token,"^"),plus_equal:new g("plus_equal",m.token,"+="),minus_equal:new g("minus_equal",m.token,"-="),times_equal:new g("times_equal",m.token,"*="),division_equal:new g("division_equal",m.token,"/="),modulo_equal:new g("modulo_equal",m.token,"%="),and_equal:new g("and_equal",m.token,"&="),or_equal:new g("or_equal",m.token,"|="),xor_equal:new g("xor_equal",m.token,"^="),shift_right_equal:new g("shift_right_equal",m.token,">>="),shift_left_equal:new g("shift_left_equal",m.token,"<<=")};f.simpleTokens={"@":_.tokens.attr,"{":_.tokens.brace_left,"}":_.tokens.brace_right,":":_.tokens.colon,",":_.tokens.comma,"(":_.tokens.paren_left,")":_.tokens.paren_right,";":_.tokens.semicolon};f.literalTokens={"&":_.tokens.and,"&&":_.tokens.and_and,"->":_.tokens.arrow,"[[":_.tokens.attr_left,"]]":_.tokens.attr_right,"/":_.tokens.forward_slash,"!":_.tokens.bang,"[":_.tokens.bracket_left,"]":_.tokens.bracket_right,"=":_.tokens.equal,"==":_.tokens.equal_equal,"!=":_.tokens.not_equal,">":_.tokens.greater_than,">=":_.tokens.greater_than_equal,">>":_.tokens.shift_right,"<":_.tokens.less_than,"<=":_.tokens.less_than_equal,"<<":_.tokens.shift_left,"%":_.tokens.modulo,"-":_.tokens.minus,"--":_.tokens.minus_minus,".":_.tokens.period,"+":_.tokens.plus,"++":_.tokens.plus_plus,"|":_.tokens.or,"||":_.tokens.or_or,"*":_.tokens.star,"~":_.tokens.tilde,_:_.tokens.underscore,"^":_.tokens.xor,"+=":_.tokens.plus_equal,"-=":_.tokens.minus_equal,"*=":_.tokens.times_equal,"/=":_.tokens.division_equal,"%=":_.tokens.modulo_equal,"&=":_.tokens.and_equal,"|=":_.tokens.or_equal,"^=":_.tokens.xor_equal,">>=":_.tokens.shift_right_equal,"<<=":_.tokens.shift_left_equal};f.regexTokens={decimal_float_literal:_.tokens.decimal_float_literal,hex_float_literal:_.tokens.hex_float_literal,int_literal:_.tokens.int_literal,uint_literal:_.tokens.uint_literal,ident:_.tokens.ident};f.storage_class=[_.keywords.function,_.keywords.private,_.keywords.workgroup,_.keywords.uniform,_.keywords.storage];f.access_mode=[_.keywords.read,_.keywords.write,_.keywords.read_write];f.sampler_type=[_.keywords.sampler,_.keywords.sampler_comparison];f.sampled_texture_type=[_.keywords.texture_1d,_.keywords.texture_2d,_.keywords.texture_2d_array,_.keywords.texture_3d,_.keywords.texture_cube,_.keywords.texture_cube_array];f.multisampled_texture_type=[_.keywords.texture_multisampled_2d];f.storage_texture_type=[_.keywords.texture_storage_1d,_.keywords.texture_storage_2d,_.keywords.texture_storage_2d_array,_.keywords.texture_storage_3d];f.depth_texture_type=[_.keywords.texture_depth_2d,_.keywords.texture_depth_2d_array,_.keywords.texture_depth_cube,_.keywords.texture_depth_cube_array,_.keywords.texture_depth_multisampled_2d];f.texture_external_type=[_.keywords.texture_external];f.any_texture_type=[..._.sampled_texture_type,..._.multisampled_texture_type,..._.storage_texture_type,..._.depth_texture_type,..._.texture_external_type];f.texel_format=[_.keywords.r8unorm,_.keywords.r8snorm,_.keywords.r8uint,_.keywords.r8sint,_.keywords.r16uint,_.keywords.r16sint,_.keywords.r16float,_.keywords.rg8unorm,_.keywords.rg8snorm,_.keywords.rg8uint,_.keywords.rg8sint,_.keywords.r32uint,_.keywords.r32sint,_.keywords.r32float,_.keywords.rg16uint,_.keywords.rg16sint,_.keywords.rg16float,_.keywords.rgba8unorm,_.keywords.rgba8unorm_srgb,_.keywords.rgba8snorm,_.keywords.rgba8uint,_.keywords.rgba8sint,_.keywords.bgra8unorm,_.keywords.bgra8unorm_srgb,_.keywords.rgb10a2unorm,_.keywords.rg11b10float,_.keywords.rg32uint,_.keywords.rg32sint,_.keywords.rg32float,_.keywords.rgba16uint,_.keywords.rgba16sint,_.keywords.rgba16float,_.keywords.rgba32uint,_.keywords.rgba32sint,_.keywords.rgba32float];f.const_literal=[_.tokens.int_literal,_.tokens.uint_literal,_.tokens.decimal_float_literal,_.tokens.hex_float_literal,_.keywords.true,_.keywords.false];f.literal_or_ident=[_.tokens.ident,_.tokens.int_literal,_.tokens.uint_literal,_.tokens.decimal_float_literal,_.tokens.hex_float_literal];f.element_count_expression=[_.tokens.int_literal,_.tokens.uint_literal,_.tokens.ident];f.template_types=[_.keywords.vec2,_.keywords.vec3,_.keywords.vec4,_.keywords.mat2x2,_.keywords.mat2x3,_.keywords.mat2x4,_.keywords.mat3x2,_.keywords.mat3x3,_.keywords.mat3x4,_.keywords.mat4x2,_.keywords.mat4x3,_.keywords.mat4x4,_.keywords.atomic,_.keywords.bitcast,..._.any_texture_type];f.attribute_name=[_.tokens.ident,_.keywords.block,_.keywords.diagnostic];f.assignment_operators=[_.tokens.equal,_.tokens.plus_equal,_.tokens.minus_equal,_.tokens.times_equal,_.tokens.division_equal,_.tokens.modulo_equal,_.tokens.and_equal,_.tokens.or_equal,_.tokens.xor_equal,_.tokens.shift_right_equal,_.tokens.shift_left_equal];f.increment_operators=[_.tokens.plus_plus,_.tokens.minus_minus];class Ou{constructor(e,n,r){this.type=e,this.lexeme=n,this.line=r}toString(){return this.lexeme}isTemplateType(){return f.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==f.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class Km{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new Ou(f.eof,"",this._line)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}else if(this._peekAhead()=="*"){this._advance();let s=1;for(;s>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),s--,s==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),s++)}return!0}}const n=f.simpleTokens[e];if(n)return this._addToken(n),!0;let r=f.none;const i=this._isAlpha(e),o=e==="_";if(this._isAlphaNumeric(e)){let s=this._peekAhead();for(;this._isAlphaNumeric(s);)e+=this._advance(),s=this._peekAhead()}if(i){const s=f.keywords[e];if(s)return this._addToken(s),!0}if(i||o)return this._addToken(f.tokens.ident),!0;for(;;){let s=this._findType(e);const a=this._peekAhead();if(e==">"&&(a==">"||a=="=")){let l=!1,u=this._tokens.length-1;for(let c=0;c<5&&u>=0;++c,--u)if(this._tokens[u].type===f.tokens.less_than){u>0&&this._tokens[u-1].isArrayOrTemplateType()&&(l=!0);break}if(l)return this._addToken(s),!0}if(s===f.none){let l=e,u=0;const c=2;for(let p=0;p<c;++p)if(l+=this._peekAhead(p),s=this._findType(l),s!==f.none){u=p;break}if(s===f.none)return r===f.none?!1:(this._current--,this._addToken(r),!0);e=l,this._current+=u+1}if(r=s,this._isAtEnd())break;e+=this._advance()}return r===f.none?!1:(this._addToken(r),!0)}_findType(e){for(const r in f.regexTokens){const i=f.regexTokens[r];if(this._match(e,i.rule))return i}const n=f.literalTokens[e];return n||f.none}_match(e,n){const r=n.exec(e);return r&&r.index==0&&r[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}_isAlphaNumeric(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e=="_"||e>="0"&&e<="9"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let n=this._source[this._current];return e=e||0,e++,this._current+=e,n}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const n=this._source.substring(this._start,this._current);this._tokens.push(new Ou(e,n,this._line))}}class Jm{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new Em,this._deferArrayCountEval=[]}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const n=[];for(;!this._isAtEnd();){const r=this._global_decl_or_directive();if(!r)break;n.push(r)}if(this._deferArrayCountEval.length>0){for(const r of this._deferArrayCountEval){const i=r.arrayType,o=r.countNode;if(o instanceof ua){const a=o.name,l=this._context.constants.get(a);if(l)try{const u=l.evaluate(this._context);i.count=u}catch{}}}this._deferArrayCountEval.length=0}return n}_initialize(e){if(e)if(typeof e=="string"){const n=new Km(e);this._tokens=n.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_error(e,n){return{token:e,message:n,toString:function(){return`${n}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==f.eof}_match(e){if(e instanceof g)return this._check(e)?(this._advance(),!0):!1;for(let n=0,r=e.length;n<r;++n){const i=e[n];if(this._check(i))return this._advance(),!0}return!1}_consume(e,n){if(this._check(e))return this._advance();throw this._error(this._peek(),n)}_check(e){if(this._isAtEnd())return!1;const n=this._peek();if(e instanceof Array){const r=n.type;return e.indexOf(r)!=-1}return n.type==e}_advance(){var e,n;return this._currentLine=(n=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&n!==void 0?n:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(f.tokens.semicolon)&&!this._isAtEnd(););if(this._match(f.keywords.alias)){const n=this._type_alias();return this._consume(f.tokens.semicolon,"Expected ';'"),n}if(this._match(f.keywords.diagnostic)){const n=this._diagnostic();return this._consume(f.tokens.semicolon,"Expected ';'"),n}if(this._match(f.keywords.requires)){const n=this._requires_directive();return this._consume(f.tokens.semicolon,"Expected ';'"),n}if(this._match(f.keywords.enable)){const n=this._enable_directive();return this._consume(f.tokens.semicolon,"Expected ';'"),n}const e=this._attribute();if(this._check(f.keywords.var)){const n=this._global_variable_decl();return n!=null&&(n.attributes=e),this._consume(f.tokens.semicolon,"Expected ';'."),n}if(this._check(f.keywords.override)){const n=this._override_variable_decl();return n!=null&&(n.attributes=e),this._consume(f.tokens.semicolon,"Expected ';'."),n}if(this._check(f.keywords.let)){const n=this._global_let_decl();return n!=null&&(n.attributes=e),this._consume(f.tokens.semicolon,"Expected ';'."),n}if(this._check(f.keywords.const)){const n=this._global_const_decl();return n!=null&&(n.attributes=e),this._consume(f.tokens.semicolon,"Expected ';'."),n}if(this._check(f.keywords.struct)){const n=this._struct_decl();return n!=null&&(n.attributes=e),n}if(this._check(f.keywords.fn)){const n=this._function_decl();return n!=null&&(n.attributes=e),n}return null}_function_decl(){if(!this._match(f.keywords.fn))return null;const e=this._currentLine,n=this._consume(f.tokens.ident,"Expected function name.").toString();this._consume(f.tokens.paren_left,"Expected '(' for function arguments.");const r=[];if(!this._check(f.tokens.paren_right))do{if(this._check(f.tokens.paren_right))break;const a=this._attribute(),l=this._consume(f.tokens.ident,"Expected argument name.").toString();this._consume(f.tokens.colon,"Expected ':' for argument type.");const u=this._attribute(),c=this._type_decl();c!=null&&(c.attributes=u,r.push(new Ym(l,c,a)))}while(this._match(f.tokens.comma));this._consume(f.tokens.paren_right,"Expected ')' after function arguments.");let i=null;if(this._match(f.tokens.arrow)){const a=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=a)}const o=this._compound_statement(),s=this._currentLine;return new aa(n,r,i,o,e,s)}_compound_statement(){const e=[];for(this._consume(f.tokens.brace_left,"Expected '{' for block.");!this._check(f.tokens.brace_right);){const n=this._statement();n!==null&&e.push(n)}return this._consume(f.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(f.tokens.semicolon)&&!this._isAtEnd(););if(this._check(f.tokens.attr)&&this._attribute(),this._check(f.keywords.if))return this._if_statement();if(this._check(f.keywords.switch))return this._switch_statement();if(this._check(f.keywords.loop))return this._loop_statement();if(this._check(f.keywords.for))return this._for_statement();if(this._check(f.keywords.while))return this._while_statement();if(this._check(f.keywords.continuing))return this._continuing_statement();if(this._check(f.keywords.static_assert))return this._static_assert_statement();if(this._check(f.tokens.brace_left))return this._compound_statement();let e=null;return this._check(f.keywords.return)?e=this._return_statement():this._check([f.keywords.var,f.keywords.let,f.keywords.const])?e=this._variable_statement():this._match(f.keywords.discard)?e=new Um:this._match(f.keywords.break)?e=new Bm:this._match(f.keywords.continue)?e=new Gm:e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),e!=null&&this._consume(f.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(f.keywords.static_assert))return null;const e=this._optional_paren_expression();return new Tm(e)}_while_statement(){if(!this._match(f.keywords.while))return null;const e=this._optional_paren_expression();this._check(f.tokens.attr)&&this._attribute();const n=this._compound_statement();return new Mm(e,n)}_continuing_statement(){if(!this._match(f.keywords.continuing))return null;const e=this._compound_statement();return new Cm(e)}_for_statement(){if(!this._match(f.keywords.for))return null;this._consume(f.tokens.paren_left,"Expected '('.");const e=this._check(f.tokens.semicolon)?null:this._for_init();this._consume(f.tokens.semicolon,"Expected ';'.");const n=this._check(f.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(f.tokens.semicolon,"Expected ';'.");const r=this._check(f.tokens.paren_right)?null:this._for_increment();this._consume(f.tokens.paren_right,"Expected ')'."),this._check(f.tokens.attr)&&this._attribute();const i=this._compound_statement();return new Pm(e,n,r,i)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(f.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(f.tokens.equal)&&(n=this._short_circuit_or_expression()),new en(e.name,e.type,e.storage,e.access,n)}if(this._match(f.keywords.let)){const e=this._consume(f.tokens.ident,"Expected name for let.").toString();let n=null;if(this._match(f.tokens.colon)){const i=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=i)}this._consume(f.tokens.equal,"Expected '=' for let.");const r=this._short_circuit_or_expression();return new la(e,n,null,null,r)}if(this._match(f.keywords.const)){const e=this._consume(f.tokens.ident,"Expected name for const.").toString();let n=null;if(this._match(f.tokens.colon)){const i=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=i)}this._consume(f.tokens.equal,"Expected '=' for const.");const r=this._short_circuit_or_expression();return new Nu(e,n,null,null,r)}return null}_increment_decrement_statement(){const e=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(f.increment_operators))return this._current=e,null;const r=this._consume(f.increment_operators,"Expected increment operator");return new Nm(r.type===f.tokens.plus_plus?Yn.increment:Yn.decrement,n)}_assignment_statement(){let e=null;if(this._check(f.tokens.brace_right))return null;let n=this._match(f.tokens.underscore);if(n||(e=this._unary_expression()),!n&&e==null)return null;const r=this._consume(f.assignment_operators,"Expected assignment operator."),i=this._short_circuit_or_expression();return new Lm(jr.parse(r.lexeme),e,i)}_func_call_statement(){if(!this._check(f.tokens.ident))return null;const e=this._current,n=this._consume(f.tokens.ident,"Expected function name."),r=this._argument_expression_list();return r===null?(this._current=e,null):new pd(n.lexeme,r)}_loop_statement(){if(!this._match(f.keywords.loop))return null;this._check(f.tokens.attr)&&this._attribute(),this._consume(f.tokens.brace_left,"Expected '{' for loop.");const e=[];let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let i of n)e.push(i);else e.push(n);n=this._statement()}let r=null;return this._match(f.keywords.continuing)&&(r=this._compound_statement()),this._consume(f.tokens.brace_right,"Expected '}' for loop."),new bm(e,r)}_switch_statement(){if(!this._match(f.keywords.switch))return null;const e=this._optional_paren_expression();this._check(f.tokens.attr)&&this._attribute(),this._consume(f.tokens.brace_left,"Expected '{' for switch.");const n=this._switch_body();if(n==null||n.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(f.tokens.brace_right,"Expected '}' for switch."),new zm(e,n)}_switch_body(){const e=[];if(this._match(f.keywords.case)){const n=this._case_selectors();this._match(f.tokens.colon),this._check(f.tokens.attr)&&this._attribute(),this._consume(f.tokens.brace_left,"Exected '{' for switch case.");const r=this._case_body();this._consume(f.tokens.brace_right,"Exected '}' for switch case."),e.push(new $m(n,r))}if(this._match(f.keywords.default)){this._match(f.tokens.colon),this._check(f.tokens.attr)&&this._attribute(),this._consume(f.tokens.brace_left,"Exected '{' for switch default.");const n=this._case_body();this._consume(f.tokens.brace_right,"Exected '}' for switch default."),e.push(new qm(n))}if(this._check([f.keywords.default,f.keywords.case])){const n=this._switch_body();e.push(n[0])}return e}_case_selectors(){const e=[this._shift_expression()];for(;this._match(f.tokens.comma);)e.push(this._shift_expression());return e}_case_body(){if(this._match(f.keywords.fallthrough))return this._consume(f.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const n=this._case_body();return n.length==0?e:[...e,n[0]]}_if_statement(){if(!this._match(f.keywords.if))return null;const e=this._optional_paren_expression();this._check(f.tokens.attr)&&this._attribute();const n=this._compound_statement();let r=[];this._match_elseif()&&(this._check(f.tokens.attr)&&this._attribute(),r=this._elseif_statement(r));let i=null;return this._match(f.keywords.else)&&(this._check(f.tokens.attr)&&this._attribute(),i=this._compound_statement()),new Am(e,n,r,i)}_match_elseif(){return this._tokens[this._current].type===f.keywords.else&&this._tokens[this._current+1].type===f.keywords.if?(this._advance(),this._advance(),!0):!1}_elseif_statement(e=[]){const n=this._optional_paren_expression(),r=this._compound_statement();return e.push(new Qm(n,r)),this._match_elseif()&&(this._check(f.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(f.keywords.return))return null;const e=this._short_circuit_or_expression();return new Rm(e)}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(f.tokens.or_or);)e=new ct(this._previous().toString(),e,this._short_circuit_and_expr());return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(f.tokens.and_and);)e=new ct(this._previous().toString(),e,this._inclusive_or_expression());return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(f.tokens.or);)e=new ct(this._previous().toString(),e,this._exclusive_or_expression());return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(f.tokens.xor);)e=new ct(this._previous().toString(),e,this._and_expression());return e}_and_expression(){let e=this._equality_expression();for(;this._match(f.tokens.and);)e=new ct(this._previous().toString(),e,this._equality_expression());return e}_equality_expression(){const e=this._relational_expression();return this._match([f.tokens.equal_equal,f.tokens.not_equal])?new ct(this._previous().toString(),e,this._relational_expression()):e}_relational_expression(){let e=this._shift_expression();for(;this._match([f.tokens.less_than,f.tokens.greater_than,f.tokens.less_than_equal,f.tokens.greater_than_equal]);)e=new ct(this._previous().toString(),e,this._shift_expression());return e}_shift_expression(){let e=this._additive_expression();for(;this._match([f.tokens.shift_left,f.tokens.shift_right]);)e=new ct(this._previous().toString(),e,this._additive_expression());return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([f.tokens.plus,f.tokens.minus]);)e=new ct(this._previous().toString(),e,this._multiplicative_expression());return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([f.tokens.star,f.tokens.forward_slash,f.tokens.modulo]);)e=new ct(this._previous().toString(),e,this._unary_expression());return e}_unary_expression(){return this._match([f.tokens.minus,f.tokens.bang,f.tokens.tilde,f.tokens.star,f.tokens.and])?new Hm(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),n=this._postfix_expression();return n&&(e.postfix=n),e}_postfix_expression(){if(this._match(f.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(f.tokens.bracket_right,"Expected ']'.");const n=new Wm(e),r=this._postfix_expression();return r&&(n.postfix=r),n}if(this._match(f.tokens.period)){const e=this._consume(f.tokens.ident,"Expected member name."),n=this._postfix_expression(),r=new Lu(e.lexeme);return n&&(r.postfix=n),r}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_primary_expression(){if(this._match(f.tokens.ident)){const r=this._previous().toString();if(this._check(f.tokens.paren_left)){const i=this._argument_expression_list(),o=this._getStruct(r);return o!=null?new bn(o,i):new vd(r,i)}if(this._context.constants.has(r)){const i=this._context.constants.get(r);return new bu(r,i.value)}return new ua(r)}if(this._match(f.const_literal))return new zu(parseFloat(this._previous().toString()));if(this._check(f.tokens.paren_left))return this._paren_expression();if(this._match(f.keywords.bitcast)){this._consume(f.tokens.less_than,"Expected '<'.");const r=this._type_decl();this._consume(f.tokens.greater_than,"Expected '>'.");const i=this._paren_expression();return new Fm(r,i)}const e=this._type_decl(),n=this._argument_expression_list();return new jm(e,n)}_argument_expression_list(){if(!this._match(f.tokens.paren_left))return null;const e=[];do{if(this._check(f.tokens.paren_right))break;const n=this._short_circuit_or_expression();e.push(n)}while(this._match(f.tokens.comma));return this._consume(f.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(f.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(f.tokens.paren_right),new Au([e])}_paren_expression(){this._consume(f.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(f.tokens.paren_right,"Expected ')'."),new Au([e])}_struct_decl(){if(!this._match(f.keywords.struct))return null;const e=this._currentLine,n=this._consume(f.tokens.ident,"Expected name for struct.").toString();this._consume(f.tokens.brace_left,"Expected '{' for struct body.");const r=[];for(;!this._check(f.tokens.brace_right);){const s=this._attribute(),a=this._consume(f.tokens.ident,"Expected variable name.").toString();this._consume(f.tokens.colon,"Expected ':' for struct member type.");const l=this._attribute(),u=this._type_decl();u!=null&&(u.attributes=l),this._check(f.tokens.brace_right)?this._match(f.tokens.comma):this._consume(f.tokens.comma,"Expected ',' for struct member."),r.push(new Xm(a,u,s))}this._consume(f.tokens.brace_right,"Expected '}' after struct body.");const i=this._currentLine,o=new Zt(n,r,e,i);return this._context.structs.set(n,o),o}_global_variable_decl(){const e=this._variable_decl();return e&&this._match(f.tokens.equal)&&(e.value=this._const_expression()),e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(f.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){if(!this._match(f.keywords.const))return null;const e=this._consume(f.tokens.ident,"Expected variable name");let n=null;if(this._match(f.tokens.colon)){const o=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=o)}let r=null;if(this._match(f.tokens.equal)){const o=this._short_circuit_or_expression();if(o instanceof bn)r=o;else if(o instanceof bu&&o.initializer instanceof bn)r=o.initializer;else try{const s=o.evaluate(this._context);r=new zu(s)}catch{r=o}}const i=new Nu(e.toString(),n,"","",r);return this._context.constants.set(i.name,i),i}_global_let_decl(){if(!this._match(f.keywords.let))return null;const e=this._consume(f.tokens.ident,"Expected variable name");let n=null;if(this._match(f.tokens.colon)){const i=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=i)}let r=null;return this._match(f.tokens.equal)&&(r=this._const_expression()),new la(e.toString(),n,"","",r)}_const_expression(){if(this._match(f.const_literal))return new Lu(this._previous().toString());const e=this._type_decl();this._consume(f.tokens.paren_left,"Expected '('.");let n=[];for(;!this._check(f.tokens.paren_right)&&(n.push(this._const_expression()),!!this._check(f.tokens.comma));)this._advance();return this._consume(f.tokens.paren_right,"Expected ')'."),new bn(e,n)}_variable_decl(){if(!this._match(f.keywords.var))return null;let e="",n="";this._match(f.tokens.less_than)&&(e=this._consume(f.storage_class,"Expected storage_class.").toString(),this._match(f.tokens.comma)&&(n=this._consume(f.access_mode,"Expected access_mode.").toString()),this._consume(f.tokens.greater_than,"Expected '>'."));const r=this._consume(f.tokens.ident,"Expected variable name");let i=null;if(this._match(f.tokens.colon)){const o=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=o)}return new en(r.toString(),i,e,n,null)}_override_decl(){if(!this._match(f.keywords.override))return null;const e=this._consume(f.tokens.ident,"Expected variable name");let n=null;if(this._match(f.tokens.colon)){const r=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=r)}return new hd(e.toString(),n,null)}_diagnostic(){this._consume(f.tokens.paren_left,"Expected '('");const e=this._consume(f.tokens.ident,"Expected severity control name.");this._consume(f.tokens.comma,"Expected ','");const n=this._consume(f.tokens.ident,"Expected diagnostic rule name.");return this._consume(f.tokens.paren_right,"Expected ')'"),new Dm(e.toString(),n.toString())}_enable_directive(){const e=this._consume(f.tokens.ident,"identity expected.");return new Om(e.toString())}_requires_directive(){const e=[this._consume(f.tokens.ident,"identity expected.").toString()];for(;this._match(f.tokens.comma);){const n=this._consume(f.tokens.ident,"identity expected.");e.push(n.toString())}return new Im(e)}_type_alias(){const e=this._consume(f.tokens.ident,"identity expected.");this._consume(f.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);const r=new md(e.toString(),n);return this._context.aliases.set(r.name,r),r}_type_decl(){if(this._check([f.tokens.ident,...f.texel_format,f.keywords.bool,f.keywords.f32,f.keywords.i32,f.keywords.u32])){const r=this._advance(),i=r.toString();return this._context.structs.has(i)?this._context.structs.get(i):this._context.aliases.has(i)?this._context.aliases.get(i).type:new mn(r.toString())}let e=this._texture_sampler_types();if(e)return e;if(this._check(f.template_types)){let r=this._advance().toString(),i=null,o=null;return this._match(f.tokens.less_than)&&(i=this._type_decl(),o=null,this._match(f.tokens.comma)&&(o=this._consume(f.access_mode,"Expected access_mode for pointer").toString()),this._consume(f.tokens.greater_than,"Expected '>' for type.")),new gd(r,i,o)}if(this._match(f.keywords.ptr)){let r=this._previous().toString();this._consume(f.tokens.less_than,"Expected '<' for pointer.");const i=this._consume(f.storage_class,"Expected storage_class for pointer");this._consume(f.tokens.comma,"Expected ',' for pointer.");const o=this._type_decl();let s=null;return this._match(f.tokens.comma)&&(s=this._consume(f.access_mode,"Expected access_mode for pointer").toString()),this._consume(f.tokens.greater_than,"Expected '>' for pointer."),new Vm(r,i.toString(),o,s)}const n=this._attribute();if(this._match(f.keywords.array)){let r=null,i=-1;const o=this._previous();let s=null;if(this._match(f.tokens.less_than)){r=this._type_decl(),this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);let l="";if(this._match(f.tokens.comma)){s=this._shift_expression();try{l=s.evaluate(this._context).toString(),s=null}catch{l="1"}}this._consume(f.tokens.greater_than,"Expected '>' for array."),i=l?parseInt(l):0}const a=new yd(o.toString(),n,r,i);return s&&this._deferArrayCountEval.push({arrayType:a,countNode:s}),a}return null}_texture_sampler_types(){if(this._match(f.sampler_type))return new gr(this._previous().toString(),null,null);if(this._match(f.depth_texture_type))return new gr(this._previous().toString(),null,null);if(this._match(f.sampled_texture_type)||this._match(f.multisampled_texture_type)){const e=this._previous();this._consume(f.tokens.less_than,"Expected '<' for sampler type.");const n=this._type_decl();return this._consume(f.tokens.greater_than,"Expected '>' for sampler type."),new gr(e.toString(),n,null)}if(this._match(f.storage_texture_type)){const e=this._previous();this._consume(f.tokens.less_than,"Expected '<' for sampler type.");const n=this._consume(f.texel_format,"Invalid texel format.").toString();this._consume(f.tokens.comma,"Expected ',' after texel format.");const r=this._consume(f.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(f.tokens.greater_than,"Expected '>' for sampler type."),new gr(e.toString(),n,r)}return null}_attribute(){let e=[];for(;this._match(f.tokens.attr);){const n=this._consume(f.attribute_name,"Expected attribute name"),r=new Ru(n.toString(),null);if(this._match(f.tokens.paren_left)){if(r.value=this._consume(f.literal_or_ident,"Expected attribute value").toString(),this._check(f.tokens.comma)){this._advance();do{const i=this._consume(f.literal_or_ident,"Expected attribute value").toString();r.value instanceof Array||(r.value=[r.value]),r.value.push(i)}while(this._match(f.tokens.comma))}this._consume(f.tokens.paren_right,"Expected ')'")}e.push(r)}for(;this._match(f.tokens.attr_left);){if(!this._check(f.tokens.attr_right))do{const n=this._consume(f.attribute_name,"Expected attribute name"),r=new Ru(n.toString(),null);if(this._match(f.tokens.paren_left)){if(r.value=[this._consume(f.literal_or_ident,"Expected attribute value").toString()],this._check(f.tokens.comma)){this._advance();do{const i=this._consume(f.literal_or_ident,"Expected attribute value").toString();r.value.push(i)}while(this._match(f.tokens.comma))}this._consume(f.tokens.paren_right,"Expected ')'")}e.push(r)}while(this._match(f.tokens.comma));this._consume(f.tokens.attr_right,"Expected ']]' after attribute declarations")}return e.length==0?null:e}}class Gn{constructor(e,n){this.name=e,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class Iu{constructor(e,n,r){this.name=e,this.type=n,this.attributes=r,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class yi extends Gn{constructor(e,n){super(e,n),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class rs extends Gn{constructor(e,n){super(e,n),this.count=0,this.stride=0}get isArray(){return!0}}class Du extends Gn{constructor(e,n,r,i){super(e,r),this.format=n,this.access=i}get isTemplate(){return!0}}var ye;(function(t){t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(ye||(ye={}));class vi{constructor(e,n,r,i,o,s,a){this.name=e,this.type=n,this.group=r,this.binding=i,this.attributes=o,this.resourceType=s,this.access=a}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Zm{constructor(e,n){this.name=e,this.type=n}}class _i{constructor(e,n){this.align=e,this.size=n}}class eg{constructor(e,n,r,i){this.name=e,this.type=n,this.locationType=r,this.location=i,this.interpolation=null}}class Uu{constructor(e,n,r,i){this.name=e,this.type=n,this.locationType=r,this.location=i}}class tg{constructor(e,n=null){this.stage=null,this.inputs=[],this.outputs=[],this.resources=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=n}}class ng{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class rg{constructor(e,n,r,i){this.name=e,this.type=n,this.attributes=r,this.id=i}}class ig{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class kt{constructor(e){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new ng,this.functions=[],this._types=new Map,this._functions=new Map,e&&this.update(e)}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}update(e){const r=new Jm().parse(e);for(const i of r)i instanceof aa&&this._functions.set(i.name,new ig(i));for(const i of r)if(i instanceof Zt){const o=this._getTypeInfo(i,null);o instanceof yi&&this.structs.push(o)}for(const i of r){if(i instanceof md){this.aliases.push(this._getAliasInfo(i));continue}if(i instanceof hd){const o=i,s=this._getAttributeNum(o.attributes,"id",0),a=o.type!=null?this._getTypeInfo(o.type,o.attributes):null;this.overrides.push(new rg(o.name,a,o.attributes,s));continue}if(this._isUniformVar(i)){const o=i,s=this._getAttributeNum(o.attributes,"group",0),a=this._getAttributeNum(o.attributes,"binding",0),l=this._getTypeInfo(o.type,o.attributes),u=new vi(o.name,l,s,a,o.attributes,ye.Uniform,o.access);this.uniforms.push(u);continue}if(this._isStorageVar(i)){const o=i,s=this._getAttributeNum(o.attributes,"group",0),a=this._getAttributeNum(o.attributes,"binding",0),l=this._getTypeInfo(o.type,o.attributes),u=this._isStorageTexture(l),c=new vi(o.name,l,s,a,o.attributes,u?ye.StorageTexture:ye.Storage,o.access);this.storage.push(c);continue}if(this._isTextureVar(i)){const o=i,s=this._getAttributeNum(o.attributes,"group",0),a=this._getAttributeNum(o.attributes,"binding",0),l=this._getTypeInfo(o.type,o.attributes),u=this._isStorageTexture(l),c=new vi(o.name,l,s,a,o.attributes,u?ye.StorageTexture:ye.Texture,o.access);u?this.storage.push(c):this.textures.push(c);continue}if(this._isSamplerVar(i)){const o=i,s=this._getAttributeNum(o.attributes,"group",0),a=this._getAttributeNum(o.attributes,"binding",0),l=this._getTypeInfo(o.type,o.attributes),u=new vi(o.name,l,s,a,o.attributes,ye.Sampler,o.access);this.samplers.push(u);continue}if(i instanceof aa){const o=this._getAttribute(i,"vertex"),s=this._getAttribute(i,"fragment"),a=this._getAttribute(i,"compute"),l=o||s||a,u=new tg(i.name,l==null?void 0:l.name);u.startLine=i.startLine,u.endLine=i.endLine,this.functions.push(u),this._functions.get(i.name).info=u,l&&(this._functions.get(i.name).inUse=!0,u.inUse=!0,u.resources=this._findResources(i,!!l),u.inputs=this._getInputs(i.args),u.outputs=this._getOutputs(i.returnType),this.entry[l.name].push(u));continue}}for(const i of this._functions.values())i.info&&(i.info.inUse=i.inUse,this._addCalls(i.node,i.info.calls));for(const i of this.uniforms)this._markStructsInUse(i.type);for(const i of this.storage)this._markStructsInUse(i.type)}_markStructsInUse(e){if(e.isStruct){e.inUse=!0;for(const n of e.members)this._markStructsInUse(n.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)this._markStructsInUse(e.format);else{const n=this._getAlias(e.name);n&&this._markStructsInUse(n)}}_addCalls(e,n){var r;for(const i of e.calls){const o=(r=this._functions.get(i.name))===null||r===void 0?void 0:r.info;o&&n.add(o)}}findResource(e,n){for(const r of this.uniforms)if(r.group==e&&r.binding==n)return r;for(const r of this.storage)if(r.group==e&&r.binding==n)return r;for(const r of this.textures)if(r.group==e&&r.binding==n)return r;for(const r of this.samplers)if(r.group==e&&r.binding==n)return r;return null}_findResource(e){for(const n of this.uniforms)if(n.name==e)return n;for(const n of this.storage)if(n.name==e)return n;for(const n of this.textures)if(n.name==e)return n;for(const n of this.samplers)if(n.name==e)return n;return null}_markStructsFromAST(e){const n=this._getTypeInfo(e,null);this._markStructsInUse(n)}_findResources(e,n){const r=[],i=this,o=[];return e.search(s=>{if(s instanceof so)o.push({});else if(s instanceof ao)o.pop();else if(s instanceof en){const a=s;n&&a.type!==null&&this._markStructsFromAST(a.type),o.length>0&&(o[o.length-1][a.name]=a)}else if(s instanceof bn){const a=s;n&&a.type!==null&&this._markStructsFromAST(a.type)}else if(s instanceof la){const a=s;n&&a.type!==null&&this._markStructsFromAST(a.type),o.length>0&&(o[o.length-1][a.name]=a)}else if(s instanceof ua){const a=s;if(o.length>0&&o[o.length-1][a.name])return;const l=i._findResource(a.name);l&&r.push(l)}else if(s instanceof vd){const a=s,l=i._functions.get(a.name);l&&(n&&(l.inUse=!0),e.calls.add(l.node),l.resources===null&&(l.resources=i._findResources(l.node,n)),r.push(...l.resources))}else if(s instanceof pd){const a=s,l=i._functions.get(a.name);l&&(n&&(l.inUse=!0),e.calls.add(l.node),l.resources===null&&(l.resources=i._findResources(l.node,n)),r.push(...l.resources))}}),[...new Map(r.map(s=>[s.name,s])).values()]}getBindGroups(){const e=[];function n(r,i){r>=e.length&&(e.length=r+1),e[r]===void 0&&(e[r]=[]),i>=e[r].length&&(e[r].length=i+1)}for(const r of this.uniforms){n(r.group,r.binding);const i=e[r.group];i[r.binding]=r}for(const r of this.storage){n(r.group,r.binding);const i=e[r.group];i[r.binding]=r}for(const r of this.textures){n(r.group,r.binding);const i=e[r.group];i[r.binding]=r}for(const r of this.samplers){n(r.group,r.binding);const i=e[r.group];i[r.binding]=r}return e}_getOutputs(e,n=void 0){if(n===void 0&&(n=[]),e instanceof Zt)this._getStructOutputs(e,n);else{const r=this._getOutputInfo(e);r!==null&&n.push(r)}return n}_getStructOutputs(e,n){for(const r of e.members)if(r.type instanceof Zt)this._getStructOutputs(r.type,n);else{const i=this._getAttribute(r,"location")||this._getAttribute(r,"builtin");if(i!==null){const o=this._getTypeInfo(r.type,r.type.attributes),s=this._parseInt(i.value),a=new Uu(r.name,o,i.name,s);n.push(a)}}}_getOutputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this._getTypeInfo(e,e.attributes),i=this._parseInt(n.value);return new Uu("",r,n.name,i)}return null}_getInputs(e,n=void 0){n===void 0&&(n=[]);for(const r of e)if(r.type instanceof Zt)this._getStructInputs(r.type,n);else{const i=this._getInputInfo(r);i!==null&&n.push(i)}return n}_getStructInputs(e,n){for(const r of e.members)if(r.type instanceof Zt)this._getStructInputs(r.type,n);else{const i=this._getInputInfo(r);i!==null&&n.push(i)}}_getInputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this._getAttribute(e,"interpolation"),i=this._getTypeInfo(e.type,e.attributes),o=this._parseInt(n.value),s=new eg(e.name,i,n.name,o);return r!==null&&(s.interpolation=this._parseString(r.value)),s}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const n=parseInt(e);return isNaN(n)?e:n}_getAlias(e){for(const n of this.aliases)if(n.name==e)return n.type;return null}_getAliasInfo(e){return new Zm(e.name,this._getTypeInfo(e.type,null))}_getTypeInfo(e,n){if(this._types.has(e))return this._types.get(e);if(e instanceof yd){const i=e,o=this._getTypeInfo(i.format,i.attributes),s=new rs(i.name,n);return s.format=o,s.count=i.count,this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof Zt){const i=e,o=new yi(i.name,n);o.startLine=i.startLine,o.endLine=i.endLine;for(const s of i.members){const a=this._getTypeInfo(s.type,s.attributes);o.members.push(new Iu(s.name,a,s.attributes))}return this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof gr){const i=e,o=i.format instanceof mn,s=i.format?o?this._getTypeInfo(i.format,null):new Gn(i.format,null):null,a=new Du(i.name,s,n,i.access);return this._types.set(e,a),this._updateTypeInfo(a),a}if(e instanceof gd){const i=e,o=i.format?this._getTypeInfo(i.format,null):null,s=new Du(i.name,o,n,i.access);return this._types.set(e,s),this._updateTypeInfo(s),s}const r=new Gn(e.name,n);return this._types.set(e,r),this._updateTypeInfo(r),r}_updateTypeInfo(e){var n,r;const i=this._getTypeSize(e);if(e.size=(n=i==null?void 0:i.size)!==null&&n!==void 0?n:0,e instanceof rs){const o=this._getTypeSize(e.format);e.stride=(r=o==null?void 0:o.size)!==null&&r!==void 0?r:0,this._updateTypeInfo(e.format)}e instanceof yi&&this._updateStructInfo(e)}_updateStructInfo(e){var n;let r=0,i=0,o=0,s=0;for(let a=0,l=e.members.length;a<l;++a){const u=e.members[a],c=this._getTypeSize(u);if(!c)continue;(n=this._getAlias(u.type.name))!==null&&n!==void 0||u.type;const p=c.align,v=c.size;r=this._roundUp(p,r+i),i=v,o=r,s=Math.max(s,p),u.offset=r,u.size=v,this._updateTypeInfo(u.type)}e.size=this._roundUp(s,o+i),e.align=s}_getTypeSize(e){var n;if(e==null)return null;const r=this._getAttributeNum(e.attributes,"size",0),i=this._getAttributeNum(e.attributes,"align",0);if(e instanceof Iu&&(e=e.type),e instanceof Gn){const o=this._getAlias(e.name);o!==null&&(e=o)}{const o=kt._typeInfo[e.name];if(o!==void 0){const s=e.format==="f16"?2:1;return new _i(Math.max(i,o.align/s),Math.max(r,o.size/s))}}{const o=kt._typeInfo[e.name.substring(0,e.name.length-1)];if(o){const s=e.name[e.name.length-1]==="h"?2:1;return new _i(Math.max(i,o.align/s),Math.max(r,o.size/s))}}if(e instanceof rs){let o=e,s=8,a=8;const l=this._getTypeSize(o.format);l!==null&&(a=l.size,s=l.align);const u=o.count,c=this._getAttributeNum((n=e==null?void 0:e.attributes)!==null&&n!==void 0?n:null,"stride",this._roundUp(s,a));return a=u*c,r&&(a=r),new _i(Math.max(i,s),Math.max(r,a))}if(e instanceof yi){let o=0,s=0,a=0,l=0,u=0;for(const c of e.members){const p=this._getTypeSize(c.type);p!==null&&(o=Math.max(p.align,o),a=this._roundUp(p.align,a+l),l=p.size,u=a)}return s=this._roundUp(o,u+l),new _i(Math.max(i,o),Math.max(r,s))}return null}_isUniformVar(e){return e instanceof en&&e.storage=="uniform"}_isStorageVar(e){return e instanceof en&&e.storage=="storage"}_isTextureVar(e){return e instanceof en&&e.type!==null&&kt._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof en&&e.type!==null&&kt._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,n){const r=e;if(!r||!r.attributes)return null;const i=r.attributes;for(let o of i)if(o.name==n)return o;return null}_getAttributeNum(e,n,r){if(e===null)return r;for(let i of e)if(i.name==n){let o=i!==null&&i.value!==null?i.value:r;return o instanceof Array&&(o=o[0]),typeof o=="number"?o:typeof o=="string"?parseInt(o):r}return r}_roundUp(e,n){return Math.ceil(n/e)*e}}kt._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}};kt._textureTypes=f.any_texture_type.map(t=>t.name);kt._samplerTypes=f.sampler_type.map(t=>t.name);function yn(t,e){return Object.fromEntries(e.map(n=>{const r=cg(t,n,0);return[n.name,{typeDefinition:r,group:n.group,binding:n.binding,size:r.size}]}))}function xd(t,e,n){return{fields:Object.fromEntries(e.members.map(i=>[i.name,{offset:i.offset,type:cl(t,i.type,0)}])),size:e.size,offset:n}}function og(t){var e;if(t.name.includes("depth"))return"depth";switch((e=t.format)==null?void 0:e.name){case"f32":return"float";case"i32":return"sint";case"u32":return"uint";default:throw new Error("unknown texture sample type")}}function Bu(t){return t.name.includes("2d_array")?"2d-array":t.name.includes("cube_array")?"cube-array":t.name.includes("3d")?"3d":t.name.includes("1d")?"1d":t.name.includes("cube")?"cube":"2d"}function sg(t){switch(t.access){case"read":return"read-only";case"write":return"write-only";case"read_write":return"read-write";default:throw new Error("unknonw storage texture access")}}function ag(t){return t.name.endsWith("_comparison")?"comparison":"filtering"}function lg(t,e){const{binding:n,access:r,type:i}=t;switch(t.resourceType){case ye.Uniform:return{binding:n,visibility:e,buffer:{...t.size&&{minBindingSize:t.size}}};case ye.Storage:return{binding:n,visibility:e,buffer:{type:r===""||r==="read"?"read-only-storage":"storage",...t.size&&{minBindingSize:t.size}}};case ye.Texture:{if(i.name==="texture_external")return{binding:n,visibility:e,externalTexture:{}};const o=i.name.includes("multisampled");return{binding:n,visibility:e,texture:{sampleType:og(i),viewDimension:Bu(i),multisampled:o}}}case ye.Sampler:return{binding:n,visibility:e,sampler:{type:ag(i)}};case ye.StorageTexture:return{binding:n,visibility:e,storageTexture:{access:sg(i),format:i.format.name,viewDimension:Bu(i)}};default:throw new Error("unknown resource type")}}function is(t,e){const n={};for(const r of t)n[r.name]={stage:e,resources:r.resources.map(i=>{const{name:o,group:s}=i;return{name:o,group:s,entry:lg(i,e)}})};return n}function ug(t){const e=new kt(t),n=Object.fromEntries(e.structs.map(c=>[c.name,xd(e,c,0)])),r=yn(e,e.uniforms),i=yn(e,e.storage.filter(c=>c.resourceType===ye.Storage)),o=yn(e,e.storage.filter(c=>c.resourceType===ye.StorageTexture)),s=yn(e,e.textures.filter(c=>c.type.name!=="texture_external")),a=yn(e,e.textures.filter(c=>c.type.name==="texture_external")),l=yn(e,e.samplers),u={...is(e.entry.vertex,GPUShaderStage.VERTEX),...is(e.entry.fragment,GPUShaderStage.FRAGMENT),...is(e.entry.compute,GPUShaderStage.COMPUTE)};return{externalTextures:a,samplers:l,structs:n,storages:i,storageTextures:o,textures:s,uniforms:r,entryPoints:u}}function os(t,e=""){if(!t)throw new Error(e)}function cg(t,e,n){switch(e.resourceType){case ye.Uniform:case ye.Storage:case ye.StorageTexture:return cl(t,e.type,n);default:return{size:0,type:e.type.name}}}function cl(t,e,n){if(e.isArray){os(!e.isStruct,"struct array is invalid"),os(!e.isStruct,"template array is invalid");const r=e;return{size:r.size,elementType:cl(t,r.format,n),numElements:r.count}}else{if(e.isStruct)return os(!e.isTemplate,"template struct is invalid"),xd(t,e,n);{const r=e,i=e.isTemplate?`${r.name}<${r.format.name}>`:e.name;return{size:e.size,type:i}}}}const fg=new Map([[Int8Array,{formats:["sint8","snorm8"],defaultForType:1}],[Uint8Array,{formats:["uint8","unorm8"],defaultForType:1}],[Int16Array,{formats:["sint16","snorm16"],defaultForType:1}],[Uint16Array,{formats:["uint16","unorm16"],defaultForType:1}],[Int32Array,{formats:["sint32","snorm32"],defaultForType:0}],[Uint32Array,{formats:["uint32","unorm32"],defaultForType:0}],[Float32Array,{formats:["float32","float32"],defaultForType:0}]]);new Map([...fg.entries()].map(([t,{formats:[e,n]}])=>[[e,t],[n,t]]).flat());async function cr(t){const n=await(await fetch(t)).blob();return await createImageBitmap(n,{colorSpaceConversion:"none"})}const ss=4,Gu=4,Vu=ug(ld),kd=[{name:"None",bitmap:await cr("/src/assets/cat_square.png")},{name:"kitty",bitmap:await cr("/src/assets/cat_square.png")},{name:"DogVideo",videoURL:"/src/assets/dog_swimming.webm",video:document.createElement("video")},{name:"GranitePaving",bitmap:await cr("https://webgpufundamentals.org/webgpu/resources/images/Granite_paving_tileable_512x512.jpeg")},{name:"WhiteWoodPlank",bitmap:await cr("/src/assets/WhiteWoodPlank.jpg")},{name:"WoodPlank2",bitmap:await cr("/src/assets/WoodPlank2.jpg")}];kd.forEach(t=>{const e=t.video,n=t.videoURL;e&&n&&(e.muted=!0,e.loop=!0,e.preload="auto",e.autoplay=!0,e.src=t.videoURL,e.play())});class dg{constructor(e,n,r,i){lt(this,"device");lt(this,"contexts");lt(this,"pingPongIndex");lt(this,"gridSize");lt(this,"pipelines");lt(this,"bindGroupLayouts");lt(this,"textureBitmap");const o=navigator.gpu.getPreferredCanvasFormat();n.forEach(w=>{w.configure({device:e,format:o,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST})});const s=e.createShaderModule({label:"Render Geometry Shader module",code:ld}),a=e.createBindGroupLayout({label:"Render Geometry Bind Group layout",entries:[{binding:1,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{type:"read-only-storage"}},{binding:2,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{}},{binding:3,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},{binding:4,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:5,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{type:"read-only-storage"}},{binding:6,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{type:"read-only-storage"}},{binding:7,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:9,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{type:"read-only-storage"}},{binding:10,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"depth",viewDimension:"2d-array"}},{binding:11,visibility:GPUShaderStage.FRAGMENT,sampler:{}},{binding:12,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"read-only-storage"}},{binding:13,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:14,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},{binding:15,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}]}),l=e.createBindGroupLayout({label:"Textures Bind Group layout",entries:[{binding:0,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{}},{binding:1,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{}}]}),u=e.createBindGroupLayout({label:"DirectionalLightMatrix Bind Group layout",entries:[{binding:0,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{}}]}),c=e.createPipelineLayout({bindGroupLayouts:[a,l]}),p=e.createRenderPipeline({label:"Render Geometry pipeline",layout:c,vertex:{module:s,entryPoint:"vertexMain",buffers:[{arrayStride:4*3,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]},{arrayStride:4*2,attributes:[{shaderLocation:1,offset:0,format:"float32x2"}]},{arrayStride:4*6,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float32x4"},{shaderLocation:3,offset:16,format:"float32"},{shaderLocation:4,offset:20,format:"float32"}]}]},fragment:{module:s,entryPoint:"fragmentMain",targets:[{format:o,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"src-alpha"}}},{format:"bgra8unorm"}]},primitive:{cullMode:"back"},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"}});this.device=e,this.contexts=n,this.pingPongIndex=0,this.gridSize=r;const[v,k]=this.CreateBasicPipeline(sm,"PostProcess",[{binding:0,visibility:GPUShaderStage.FRAGMENT,sampler:{}},{binding:1,visibility:GPUShaderStage.FRAGMENT,texture:{}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{}},{binding:3,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"depth",viewDimension:"2d-array"}}]),[S,x]=this.CreateBasicPipeline(im,"BlurFilter",[{binding:0,visibility:GPUShaderStage.FRAGMENT,sampler:{}},{binding:1,visibility:GPUShaderStage.FRAGMENT,texture:{}},{binding:2,visibility:GPUShaderStage.FRAGMENT,buffer:{}}]),R=e.createShaderModule({label:"ShadowMap Module",code:om}),d=e.createBindGroupLayout({label:"ShadowMap Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"read-only-storage"}}]}),h=e.createPipelineLayout({bindGroupLayouts:[d,u]}),y=e.createRenderPipeline({label:"ShadowMap pipeline",layout:h,vertex:{module:R,entryPoint:"vertexMain",buffers:[{arrayStride:4*3,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]},{arrayStride:4*6,stepMode:"instance",attributes:[{shaderLocation:1,offset:16,format:"float32"}]}]},fragment:void 0,primitive:{cullMode:"front"},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"}});this.pipelines={RenderGeometryPipeline:p,BlurFilterPipeline:S,PostProcessPipeline:v,ShadowMapPipeline:y},this.bindGroupLayouts={RenderGeometryBindGroupLayout:a,TexturesBindGroupLayout:l,BlurFilterBindGroupLayout:x,PostProcessBindGroupLayout:k,ShadowMapBindGroupLayout:d,DirectionalLightMatrixBindGroupLayout:u},this.textureBitmap=i}Render(){const e=this.CreateBuffersAndBindGroups(),n=this.device.createCommandEncoder(),r=e.buffers,i=e.bindGroups,o=e.textures,s=this.contexts[0].getCurrentTexture();if(C.ShadowsEnabled)for(let u=0;u<C.ShadowCascadeLevels.length+1;u++){const c=n.beginRenderPass({colorAttachments:[],depthStencilAttachment:{view:o.ShadowMapAttachment.createView({baseArrayLayer:u,arrayLayerCount:1}),depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}});c.setPipeline(this.pipelines.ShadowMapPipeline),c.setBindGroup(0,i.ShadowMapBindGroup),c.setBindGroup(1,i.DirectionalLightMatrixBindGroups[u]),e.OffsetData.forEach(p=>{c.setVertexBuffer(0,r.GeometryVertex,p.VertexOffset,p.VertexSize),c.setVertexBuffer(1,r.GeometryInstanceData,p.InstanceDataOffset,p.InstanceDataSize),c.setIndexBuffer(r.GeometryIndex,"uint32",p.IndexOffset,p.IndexSize),c.drawIndexed(p.IndexSize/4)}),c.end()}n.copyTextureToTexture({texture:o.ShadowMapAttachment},{texture:o.ShadowMapBindable},{width:1024,height:1024,depthOrArrayLayers:C.ShadowCascadeLevels.length+1});{const u=n.beginRenderPass({colorAttachments:[{view:o.RenderGeometryAttachment.createView(),loadOp:"clear",clearValue:{r:.08,g:.08,b:.08,a:1},storeOp:"store"},{view:o.BlurFilterAttachment.createView(),loadOp:"clear",clearValue:{r:0,g:0,b:0,a:1},storeOp:"store"}],depthStencilAttachment:{view:this.device.createTexture({size:[s.width,s.height],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}).createView(),depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}});u.setPipeline(this.pipelines.RenderGeometryPipeline),u.setBindGroup(0,i.RenderGeometryBindGroup),e.OffsetData.forEach(c=>{u.setVertexBuffer(0,r.GeometryVertex,c.VertexOffset,c.VertexSize),u.setVertexBuffer(1,r.GeometryVertexData,c.VertexDataOffset,c.VertexDataSize),u.setVertexBuffer(2,r.GeometryInstanceData,c.InstanceDataOffset,c.InstanceDataSize),u.setIndexBuffer(r.GeometryIndex,"uint32",c.IndexOffset,c.IndexSize),u.setBindGroup(1,i.TexturesBindGroups[c.TextureId]),u.drawIndexed(c.IndexSize/4)}),u.end()}n.copyTextureToTexture({texture:o.RenderGeometryAttachment},{texture:o.RenderGeometryBindable},{width:C.Width,height:C.Height}),n.copyTextureToTexture({texture:o.BlurFilterAttachment},{texture:o.BlurFilterBrightColorsBindable},{width:C.Width,height:C.Height});const a=u=>{const c=n.beginRenderPass({colorAttachments:[{view:o.BlurFilterAttachment.createView(),loadOp:"load",clearValue:{r:0,g:0,b:0,a:1},storeOp:"store"}]});c.setPipeline(this.pipelines.BlurFilterPipeline),c.setBindGroup(0,u),c.draw(6),c.end()};a(i.BlurFilterBindGroupVertical);const l=10;for(let u=0;u<l;u++)n.copyTextureToTexture({texture:o.BlurFilterAttachment},{texture:o.BlurFilterBrightColorsBindable},{width:C.Width,height:C.Height}),a(u%2===0?i.BlurFilterBindGroupVertical:i.BlurFilterBindGroupHorizontal);n.copyTextureToTexture({texture:o.BlurFilterAttachment},{texture:o.BlurFilterBloomBindable},{width:C.Width,height:C.Height});{const u=n.beginRenderPass({colorAttachments:[{view:o.PostProcessAttachment.createView(),loadOp:"clear",clearValue:{r:0,g:1,b:0,a:1},storeOp:"store"}]});u.setPipeline(this.pipelines.PostProcessPipeline),u.setBindGroup(0,i.PostProcessBindGroup),u.draw(6),u.end()}n.copyTextureToTexture({texture:o.PostProcessAttachment},{texture:o.PostProcessBindable},{width:C.Width,height:C.Height}),n.copyTextureToTexture({texture:o.PostProcessAttachment},{texture:s},{width:C.Width,height:C.Height}),this.device.queue.submit([n.finish()]),this.pingPongIndex++,this.DestroyGPUObjects(Object.values(r)),this.DestroyGPUObjects(Object.values(o))}ReloadGeometryBuffers(){}CreateBuffersAndBindGroups(){const e=this.device,n=pm(),r=Sm(Vu.storages.pointLights),i=km(Vu.storages.pointLights,new ArrayBuffer(r.size*n.NumPointLights));i.set(n.PointLights);const o=To(),s=new Float32Array(C.ShadowCascadeLevels),a=new Float32Array(C.CameraFarPlane),l=new Uint32Array([C.ShadowsEnabled?1:0]),u=e.createBuffer({label:"Geometry instance data buffer",size:n.Data.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST}),c=e.createBuffer({label:"Geometry Vertex data buffer",size:n.VertexData.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST}),p=e.createBuffer({label:"Geometry vertices",size:n.Vertices.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST}),v=e.createBuffer({label:"Geometry Index buffer",size:n.Index.byteLength,usage:GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST}),k=e.createBuffer({label:"Transformation matrix buffer",size:n.Transformation.byteLength,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),S=e.createBuffer({label:"World Transformation matrix buffer",size:n.Transformation.byteLength,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),x=e.createBuffer({label:"Point Lights buffer",size:i.arrayBuffer.byteLength,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),R=e.createBuffer({label:"Num point lights buffer",size:new Uint32Array(n.NumPointLights).byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),d=e.createBuffer({label:"Light Direction Buffer",size:12,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),h=e.createTexture({label:"Test Texture",size:[ss,Gu],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"rgba8unorm"}),y=n.DirectionalLightMatrices.map(fe=>fe.byteLength).reduce((fe,gt)=>fe+gt),w=e.createBuffer({label:"Directional Light Matrix Buffer",size:y,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),E=e.createBuffer({label:"Cascade Plane distances buffer",size:s.byteLength,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),M=e.createBuffer({label:"Camera View Matrix buffer",size:o.matrix.length*4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),b=e.createBuffer({label:"Camera Far Plane buffer",size:a.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),T=e.createBuffer({label:"Shadows Enabled buffer",size:l.byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),O=[255,0,0,255],z=[0,255,0,255],V=[0,0,255,255];e.queue.writeTexture({texture:h},new Uint8Array([O,O,O,O,V,V,V,V,z,z,z,z,V,V,V,V].flat()),{bytesPerRow:ss*4},{width:ss,height:Gu});const q=e.createSampler({label:"Sampler",magFilter:"nearest",addressModeU:"mirror-repeat",addressModeV:"mirror-repeat"}),U=e.createSampler({label:"ShadowMap Sampler",magFilter:"nearest",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}),K=this.CreateAttachmentTexture(),Y=this.CreateBindableTexture();e.queue.writeBuffer(p,0,n.Vertices),e.queue.writeBuffer(u,0,n.Data),e.queue.writeBuffer(v,0,n.Index),e.queue.writeBuffer(c,0,n.VertexData),e.queue.writeBuffer(k,0,n.Transformation),e.queue.writeBuffer(S,0,n.WorldTransformation),e.queue.writeBuffer(d,0,new Float32Array(C.LightDirection)),e.queue.writeBuffer(x,0,i.arrayBuffer),e.queue.writeBuffer(R,0,new Uint32Array([n.NumPointLights])),e.queue.writeBuffer(E,0,s),e.queue.writeBuffer(w,0,new Float32Array(al().map(fe=>fe.matrix).reduce((fe,gt)=>[...fe,...gt]))),e.queue.writeBuffer(M,0,new Float32Array(o.matrix)),e.queue.writeBuffer(b,0,a),e.queue.writeBuffer(T,0,l);const ne=[];for(let fe=0;fe<C.ShadowCascadeLevels.length+1;fe++){const gt=e.createBuffer({label:"Directional Light Matrix Buffer",size:n.DirectionalLightMatrices[fe].byteLength,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});e.queue.writeBuffer(gt,0,n.DirectionalLightMatrices[fe]);const er=e.createBindGroup({label:"directionalLightMatrixBindGroup Bind Group",layout:this.bindGroupLayouts.DirectionalLightMatrixBindGroupLayout,entries:[{binding:0,resource:{buffer:gt}}]});ne.push(er)}const oe=this.CreateAttachmentTexture("depth24plus",[1024,1024,C.ShadowCascadeLevels.length+1]),L=this.CreateBindableTexture("depth24plus",[1024,1024,C.ShadowCascadeLevels.length+1]),I=e.createBindGroup({label:"ShadowMap Bind Group",layout:this.bindGroupLayouts.ShadowMapBindGroupLayout,entries:[{binding:0,resource:{buffer:S}}]}),D=e.createBindGroup({label:"Render Geometry bind group",layout:this.bindGroupLayouts.RenderGeometryBindGroupLayout,entries:[{binding:1,resource:{buffer:k}},{binding:2,resource:h.createView()},{binding:3,resource:q},{binding:4,resource:{buffer:d}},{binding:5,resource:{buffer:S}},{binding:6,resource:{buffer:x}},{binding:7,resource:{buffer:R}},{binding:9,resource:{buffer:w}},{binding:10,resource:L.createView({arrayLayerCount:C.ShadowCascadeLevels.length+1})},{binding:11,resource:U},{binding:12,resource:{buffer:E}},{binding:13,resource:{buffer:M}},{binding:14,resource:{buffer:b}},{binding:15,resource:{buffer:T}}]}),H=this.CreateAttachmentTexture(),Q=this.CreateBindableTexture(),We=this.CreateBindableTexture(),ke=e.createBuffer({label:"BlurFilter Horizontal buffer",size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),Ze=e.createBuffer({label:"BlurFilter Horizontal buffer",size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});e.queue.writeBuffer(ke,0,new Uint32Array([1])),e.queue.writeBuffer(Ze,0,new Uint32Array([0]));const He=e.createBindGroup({label:"Blur Filter Bind Group",layout:this.bindGroupLayouts.BlurFilterBindGroupLayout,entries:[{binding:0,resource:q},{binding:1,resource:Q.createView()},{binding:2,resource:{buffer:ke}}]}),mt=e.createBindGroup({label:"Blur Filter Bind Group 2",layout:this.bindGroupLayouts.BlurFilterBindGroupLayout,entries:[{binding:0,resource:q},{binding:1,resource:Q.createView()},{binding:2,resource:{buffer:Ze}}]}),Jr=this.CreateAttachmentTexture(),Zr=this.CreateBindableTexture(),me=e.createBindGroup({label:"PostProcess Bind Group",layout:this.bindGroupLayouts.PostProcessBindGroupLayout,entries:[{binding:0,resource:q},{binding:1,resource:Y.createView()},{binding:2,resource:We.createView()},{binding:3,resource:L.createView({arrayLayerCount:C.ShadowCascadeLevels.length+1})}]}),Cd=kd.map((fe,gt)=>{const er=fe.video?fe.video:fe.bitmap,dl=fe.video?fe.video.videoWidth:er.width,hl=fe.video?fe.video.videoHeight:er.height,pl=e.createTexture({label:`Texture ${gt}`,size:[dl,hl],usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT,format:"rgba8unorm"});e.queue.copyExternalImageToTexture({source:er,flipY:!0},{texture:pl},{width:dl,height:hl});const ml=e.createBuffer({label:"Has Texture Buffer",size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});return e.queue.writeBuffer(ml,0,new Uint32Array([gt>0?1:0])),e.createBindGroup({label:"Textures bind group",layout:this.bindGroupLayouts.TexturesBindGroupLayout,entries:[{binding:0,resource:pl.createView()},{binding:1,resource:{buffer:ml}}]})});return{buffers:{GeometryInstanceData:u,GeometryVertex:p,GeometryIndex:v,GeometryVertexData:c,GeometryTransformationMatrix:k,GeometryLightDirection:d,GeometryWorldTransformationMatrix:S,GeometryPointLights:x,GeometryNumPointLights:R,BlurFilterHorizontal:ke},textures:{RenderGeometryAttachment:K,RenderGeometryBindable:Y,BlurFilterBrightColorsBindable:Q,BlurFilterAttachment:H,BlurFilterBloomBindable:We,PostProcessAttachment:Jr,PostProcessBindable:Zr,ShadowMapAttachment:oe,ShadowMapBindable:L},bindGroups:{RenderGeometryBindGroup:D,TexturesBindGroups:Cd,BlurFilterBindGroupHorizontal:He,BlurFilterBindGroupVertical:mt,PostProcessBindGroup:me,ShadowMapBindGroup:I,DirectionalLightMatrixBindGroups:ne},OffsetData:n.OffsetData}}CreateAttachmentTexture(e,n){return this.device.createTexture({size:n||[C.Width,C.Height],format:e||"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC})}CreateBindableTexture(e,n){return this.device.createTexture({size:n||[C.Width,C.Height],format:e||"bgra8unorm",usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING})}CreateBasicPipeline(e,n,r){const i=this.device,o=i.createShaderModule({label:`${n} module`,code:e}),s=i.createBindGroupLayout({label:`${n} Bindgroup Layout`,entries:r||[{binding:0,visibility:GPUShaderStage.FRAGMENT,sampler:{}},{binding:1,visibility:GPUShaderStage.FRAGMENT,texture:{}}]}),a=i.createPipelineLayout({label:`${n} Pipeline Layout`,bindGroupLayouts:[s]});return[i.createRenderPipeline({label:`${n} pipeline`,layout:a,vertex:{module:o},fragment:{module:o,targets:[{format:"bgra8unorm"}]}}),s]}DestroyGPUObjects(e){e.forEach(n=>{n.destroy()})}}const ca=new Map;function fl(t,e,n,r,i){const o=[];return Jn().forEach(a=>{if(a.Data.IgnoreRaycast)return;let l=ca.get(a);l===void 0&&(l={Offset:Array.from(a.Data.Offset),Scale:Array.from(a.Data.Scale),Rotation:Array.from(a.Data.Rotation),WorldVertices:Xr(a)},ca.set(a,l)),pg(a,l);const u=cd(a,l.WorldVertices),c=fd(a,l.WorldVertices),p=a.Data.Scale[0]+a.Data.Scale[1]+a.Data.Scale[2];if(t.SubtractVector(u).GetMagnitude()>n*2+p&&t.SubtractVector(c).GetMagnitude()>n*2+p)return;const k=l.WorldVertices,S=[[9,9,9],[9,9,9],[9,9,9]];a.Index.forEach((x,R)=>{if(S[R%3]=k[x],R%3!==2)return;const d=new G(S[0]),h=new G(S[1]),y=new G(S[2]),w=h.SubtractVector(d),E=y.SubtractVector(d),M=w.CrossProduct(E).GetUnitVector(),b=M.DotProduct(e);if(Math.abs(b)<1e-4)return;const O=M.DotProduct(d.SubtractVector(t))/b;if(O<0)return;const z=t.AddVector(e.MultiplyScalar(O));if(z.SubtractVector(t).GetMagnitude()>n)return;const V=h.SubtractVector(d),q=y.SubtractVector(h),U=d.SubtractVector(y),K=z.SubtractVector(d),Y=z.SubtractVector(h),ne=z.SubtractVector(y),oe=V.CrossProduct(K).GetUnitVector(),L=q.CrossProduct(Y).GetUnitVector(),I=U.CrossProduct(ne).GetUnitVector(),D=oe.DotProduct(M)>0,H=L.DotProduct(M)>0,Q=I.DotProduct(M)>0;D&&H&&Q&&o.push({HitPosition:z,HitNormal:M,HitObject:a})})}),o.sort((a,l)=>a.HitPosition.SubtractVector(t).GetMagnitude()-l.HitPosition.SubtractVector(t).GetMagnitude()),o[0]}function hg(t,e){const n=[e.Offset,e.Scale,e.Rotation].flat(),r=[t.Data.Offset,t.Data.Scale,t.Data.Rotation].flat();let i=!1;return n.forEach((o,s)=>{o!==r[s]&&(i=!0)}),i}function pg(t,e){hg(t,e)&&(e.Offset=Array.from(t.Data.Offset),e.Scale=Array.from(t.Data.Scale),e.Rotation=Array.from(t.Data.Rotation),e.WorldVertices=Xr(t),ca.set(t,e))}function fa(t,e,n,r,i,o){const s=n.MultiplyScalar(r).AddVector(e),l=new B([]).lookAt(e,s).RotationMatrixToEulerAngles();let u=fm(t)[0];u===void 0&&(u=Ln({Name:t,Scale:[2.5,2.5,2.5],Color:i||[1,1,1,1],DontSave:!0,IgnoreRaycast:!0,IgnoreLighting:!0})),u.Data.Scale=[o||2.5,o||2.5,r],u.Data.Rotation=[l[0],l[1],l[2]],u.Data.Offset=s.SubtractVector(e).MultiplyScalar(.5).AddVector(e).vector}function as(t,e,n,r,i){const o=new G([0,0,0]),s=o.AddVector(e),l=new B([]).lookAt(o,s).RotationMatrixToEulerAngles(),u=new G(l).GetLookVector();fa(t,e.AddVector(o),u,e.GetMagnitude(),n,i)}const mg=[[],()=>[]],Mo=$.createContext(mg),gg=32,Fu=1;function yg(t){const[e,n]=$.useContext(Mo),r=$.useRef([C.Width,C.Height]),[i,o]=$.useReducer(T=>T+1,0),s=$.useRef(null);$.useRef(null);const a=$.useRef([s]),l=$.useRef(!1),u=$.useRef(!1),c=$.useRef(!1),p=$.useRef(),v={width:r.current[0],height:r.current[1]},k=()=>{c.current=!0},S=()=>{c.current=!1,p.current=void 0},x=(T,O)=>{const z=Ye[0]+-O*(.01*Fu),V=Ye[1]+-T*(.01*Fu);Ye[0]=Math.abs(z)<Math.PI/2?z:z<0?-Math.PI/2:Math.PI/2,Ye[1]=V},R=async T=>{c.current&&x(T.movementX,T.movementY)},d=async T=>{if(c.current){const O=T.touches[0];if(p.current){const z=O.pageX-p.current[0],V=O.pageY-p.current[1];x(z,V)}p.current=[O.pageX,O.pageY]}},h=T=>{T.button===2?k():b(T)},y=T=>{T.button===2&&S()},w=T=>{k()},E=()=>{a.current.forEach(T=>{const O=T.current;O.width=C.Width,O.height=C.Height})},M=async()=>{let T,O=l.current;if(s.current,O===!1){if(!navigator.gpu)throw new Error("WebGPU not supported on this browser.");l.current=!0;const z=await navigator.gpu.requestAdapter();if(!z)throw new Error("No appropriate GPUAdapter found.");T=await z.requestDevice();const V=a.current.map(q=>{const K=q.current.getContext("webgpu");return K===null&&console.warn("Error getting context"),K});E(),O=new dg(T,V,gg),l.current=O,O.Render()}else typeof O!="boolean"&&((r.current[0]!==C.Width||r.current[1]!==C.Height)&&(r.current=[C.Width,C.Height],E(),o()),O.Render())},b=T=>{const z=new G(Array.from(Be)),V=Tu([T.nativeEvent.offsetX,T.nativeEvent.offsetY]);Tu([C.Width/2,C.Height/2]);const q=V;fa("DirectionRay",z,q,1e5,[1,.1,.1,.5],10),as("xAxis",new G([25,0,0]),[1,0,0,1]),as("yAxis",new G([0,25,0]),[0,1,0,1]),as("zAxis",new G([0,0,25]),[0,0,1,1]);const U=C.ShadowCascadeLevels;for(let Y=0;Y<U.length+1;Y++){let ne=0,oe=0;Y==0?(ne=C.CameraNearPlane,oe=U[Y]):Y<U.length?(ne=U[Y-1],oe=U[Y]):(ne=U[Y-1],oe=C.CameraFarPlane);const L=new B([]).PerspectiveMatrix(C.FOV,C.Width,C.Height,ne,oe),I=ia(L,To());let D=new G([0,0,0]);I.forEach(H=>{D=D.AddVector(H)}),D=D.DivideScalar(I.length)}al().forEach((Y,ne)=>{ia(Y).forEach((L,I)=>{})});const K=fl(z,q,1e5);if(console.log(Ye),K){const Y=z.SubtractVector(K.HitPosition).GetMagnitude();fa("HitRay",z,q,Y,[.1,.1,1,1]),n([K.HitObject])}else e.length>0&&n([])};return $.useEffect(()=>{if(!u.current){u.current=!0;const T=()=>{M(),requestAnimationFrame(T)};T()}},[]),N.jsx(N.Fragment,{children:N.jsx("canvas",{ref:s,className:"renderer-canvas",style:v,...t,onContextMenu:T=>{T.preventDefault()},onMouseMove:R,onTouchMove:d,onMouseDown:h,onMouseUp:y,onTouchStart:w,onTouchEnd:S})})}var Sd={},Co={},Kr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.JoystickShape=void 0,function(e){e.Circle="circle",e.Square="square",e.AxisY="axisY",e.AxisX="axisX"}(t.JoystickShape||(t.JoystickShape={}))})(Kr);var Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.shapeFactory=void 0;var ju=Kr,vg=function(t,e){switch(t){case ju.JoystickShape.Square:return{borderRadius:Math.sqrt(e)};case ju.JoystickShape.Circle:default:return{borderRadius:e}}};Po.shapeFactory=vg;var No={};Object.defineProperty(No,"__esModule",{value:!0});No.shapeBoundsFactory=void 0;var ls=Kr,_g=function(t,e,n,r,i,o,s,a,l){switch(t){case ls.JoystickShape.Square:return r=wi(e-l.left-a/2,a),i=wi(n-l.top-a/2,a),{relativeX:r,relativeY:i};case ls.JoystickShape.AxisX:return r=wi(e-l.left-a/2,a),i=0,{relativeX:r,relativeY:i};case ls.JoystickShape.AxisY:return r=0,i=wi(n-l.top-a/2,a),{relativeX:r,relativeY:i};default:return o>s&&(r*=s/o,i*=s/o),{relativeX:r,relativeY:i}}};No.shapeBoundsFactory=_g;var wi=function(t,e){var n=e/2;return t>n?n:t<-n?n*-1:t},wg=Ai&&Ai.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zn=Ai&&Ai.__assign||function(){return zn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zn.apply(this,arguments)};Object.defineProperty(Co,"__esModule",{value:!0});Co.Joystick=void 0;var fr=$,Wu=Kr,Hu=Po,xg=No,At;(function(t){t.PointerDown="pointerdown",t.PointerMove="pointermove",t.PointerUp="pointerup"})(At||(At={}));var tn;(function(t){t[t.TopRight=2.35619449]="TopRight",t[t.TopLeft=-2.35619449]="TopLeft",t[t.BottomRight=.785398163]="BottomRight",t[t.BottomLeft=-.785398163]="BottomLeft"})(tn||(tn={}));var kg=function(t){wg(e,t);function e(n){var r=t.call(this,n)||this;return r._stickRef=fr.createRef(),r._baseRef=fr.createRef(),r.frameId=null,r._pointerId=null,r._mounted=!1,r._pointerMove=function(i){if(i.preventDefault(),r.state.dragging){if(!r.props.followCursor&&i.pointerId!==r._pointerId)return;var o=i.clientX,s=i.clientY,a=o-r._parentRect.left-r._radius,l=s-r._parentRect.top-r._radius,u=r._distance(a,l),c=(0,xg.shapeBoundsFactory)(r.props.controlPlaneShape||r.props.baseShape,o,s,a,l,u,r._radius,r._baseSize,r._parentRect);a=c.relativeX,l=c.relativeY;var p=Math.atan2(a,l);r._updatePos({relativeX:a,relativeY:l,distance:r._distanceToPercentile(u),direction:r._getDirection(p),axisX:o-r._parentRect.left,axisY:s-r._parentRect.top})}},r._pointerUp=function(i){if(i.pointerId===r._pointerId){var o={dragging:!1};r.props.sticky||(o.coordinates=void 0),r.frameId=window.requestAnimationFrame(function(){r._mounted&&r.setState(o)}),window.removeEventListener(At.PointerUp,r._pointerUp),window.removeEventListener(At.PointerMove,r._pointerMove),r._pointerId=null,r.props.stop&&r.props.stop({type:"stop",x:r.props.sticky?r.state.coordinates.relativeX*2/r._baseSize:null,y:r.props.sticky?r.state.coordinates.relativeY*2/r._baseSize:null,direction:r.props.sticky?r.state.coordinates.direction:null,distance:r.props.sticky?r.state.coordinates.distance:null})}},r.state={dragging:!1},r._throttleMoveCallback=function(){var i=0;return function(o){var s=new Date().getTime(),a=r.props.throttle||0;if(!(s-i<a)&&(i=s,r.props.move))return r.props.move(o)}}(),r}return e.prototype.componentWillUnmount=function(){var n=this;this._mounted=!1,this.props.followCursor&&window.removeEventListener(At.PointerMove,function(r){return n._pointerMove(r)}),this.frameId!==null&&window.cancelAnimationFrame(this.frameId)},e.prototype.componentDidMount=function(){var n=this;this._mounted=!0,this.props.followCursor&&(this._parentRect=this._baseRef.current.getBoundingClientRect(),this.setState({dragging:!0}),window.addEventListener(At.PointerMove,function(r){return n._pointerMove(r)}),this.props.start&&this.props.start({type:"start",x:null,y:null,distance:null,direction:null}))},e.prototype._updatePos=function(n){var r=this;this.frameId=window.requestAnimationFrame(function(){r._mounted&&r.setState({coordinates:n})}),!(typeof this.props.minDistance=="number"&&n.distance<this.props.minDistance)&&this._throttleMoveCallback({type:"move",x:n.relativeX*2/this._baseSize,y:-(n.relativeY*2/this._baseSize),direction:n.direction,distance:n.distance})},e.prototype._pointerDown=function(n){this.props.disabled||this.props.followCursor||(this._parentRect=this._baseRef.current.getBoundingClientRect(),this.setState({dragging:!0}),window.addEventListener(At.PointerUp,this._pointerUp),window.addEventListener(At.PointerMove,this._pointerMove),this._pointerId=n.pointerId,this._stickRef.current.setPointerCapture(n.pointerId),this.props.start&&this.props.start({type:"start",x:null,y:null,distance:null,direction:null}))},e.prototype._getDirection=function(n){return n>tn.TopRight||n<tn.TopLeft?"FORWARD":n<tn.TopRight&&n>tn.BottomRight?"RIGHT":n<tn.BottomLeft?"LEFT":"BACKWARD"},e.prototype._distance=function(n,r){return Math.hypot(n,r)},e.prototype._distanceToPercentile=function(n){var r=n/(this._baseSize/2)*100;return r>100?100:r},e.prototype.getBaseShapeStyle=function(){var n=this.props.baseShape||Wu.JoystickShape.Circle;return(0,Hu.shapeFactory)(n,this._baseSize)},e.prototype.getStickShapeStyle=function(){var n=this.props.stickShape||Wu.JoystickShape.Circle;return(0,Hu.shapeFactory)(n,this._baseSize)},e.prototype._getBaseStyle=function(){var n=this.props.baseColor!==void 0?this.props.baseColor:"#000033",r="".concat(this._baseSize,"px"),i=zn(zn({},this.getBaseShapeStyle()),{height:r,width:r,background:n,display:"flex",justifyContent:"center",alignItems:"center"});return this.props.baseImage&&(i.background="url(".concat(this.props.baseImage,")"),i.backgroundSize="100%"),i},e.prototype._getStickStyle=function(){var n=this.props.stickColor!==void 0?this.props.stickColor:"#3D59AB",r=this._stickSize?"".concat(this._stickSize,"px"):"".concat(this._baseSize/1.5,"px"),i=zn(zn({},this.getStickShapeStyle()),{background:n,cursor:"move",height:r,width:r,border:"none",flexShrink:0,touchAction:"none"});return this.props.stickImage&&(i.background="url(".concat(this.props.stickImage,")"),i.backgroundSize="100%"),this.props.pos&&(i=Object.assign({},i,{position:"absolute",transform:"translate3d(".concat(this.props.pos.x*this._baseSize/2,"px, ").concat(-(this.props.pos.y*this._baseSize)/2,"px, 0)")})),this.state.coordinates!==void 0&&(i=Object.assign({},i,{position:"absolute",transform:"translate3d(".concat(this.state.coordinates.relativeX,"px, ").concat(this.state.coordinates.relativeY,"px, 0)")})),i},e.prototype.render=function(){var n=this;this._baseSize=this.props.size||100,this._stickSize=this.props.stickSize,this._radius=this._baseSize/2;var r=this._getBaseStyle(),i=this._getStickStyle();return fr.createElement("div",{"data-testid":"joystick-base",className:this.props.disabled?"joystick-base-disabled":"",ref:this._baseRef,style:r},fr.createElement("button",{ref:this._stickRef,disabled:this.props.disabled,onPointerDown:function(o){return n._pointerDown(o)},className:this.props.disabled?"joystick-disabled":"",style:i}))},e}(fr.Component);Co.Joystick=kg;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.JoystickShape=t.Joystick=void 0;var e=Co;Object.defineProperty(t,"Joystick",{enumerable:!0,get:function(){return e.Joystick}});var n=Kr;Object.defineProperty(t,"JoystickShape",{enumerable:!0,get:function(){return n.JoystickShape}})})(Sd);const _t={a:!1,d:!1,w:!1,s:!1," ":!1,Shift:!1,Jumping:!1},An={a:[-2,0,0],d:[2,0,0],w:[0,0,-2],s:[0,0,2]," ":[0,2,0],Shift:[0,-2,0]},ee={a:[0,0,0],d:[0,0,0],w:[0,0,0],s:[0,0,0]," ":[0,0,0],Shift:[0,0,0]},Sg=3,Eg=new G([0,1,0]),Tg=1.03,Mg=1.03,Ed=new G(Be),Cg=Eg.GetInverse(),Td=50;function Md(){return fl(Ed,Cg,Td)}function Pg(){if(!_t.Jumping&&C.Gamemode==="Ingame"){const t=Md();if(t)Ed.SubtractVector(t.HitPosition).GetMagnitude()<Td-5?ee.Shift[1]=2:ee.Shift[1]=0,Wr(new G(ee.Shift));else{const e=ee.Shift[1];ee.Shift[1]=Math.max(An.Shift[1]*2,e-.02),Wr(new G(ee.Shift))}}}setInterval(Pg,C.MoveCooldown);function us(t){const e=t===" ";let n=typeof t=="string"?t:t.current;const r=n==="Shift"&&C.Gamemode==="Ingame";if(!(ee[n]===void 0||r)){if(e&&C.Gamemode==="Ingame"){const i=Md()!==void 0;if(_t.Jumping||!i)return;_t.Jumping=!0;let o=0,s=0;s=setInterval(()=>{o>=50&&(clearInterval(s),_t.Jumping=!1),ee[" "][1]=(1-o/50)*Sg,Wr(new G(ee[" "]),!0),o++},C.MoveCooldown)}else if(!_t[n]){_t[n]=!0,ee[n]=[ee[n][0]+An[n][0]/10,ee[n][1]+An[n][1]/10,ee[n][2]+An[n][2]/10];let i=0;i=setInterval(()=>{_t[n]||clearInterval(i),n=typeof t=="string"?t:t.current;const o=ee[n],s=An[n],a=C.Gamemode==="Edit"?99999:Tg,l=s[0]<0?Math.max(s[0],o[0]*a):Math.min(s[0],o[0]*a),u=s[1]<0?Math.max(s[1],o[1]*a):Math.min(s[1],o[1]*a),c=s[2]<0?Math.max(s[2],o[2]*a):Math.min(s[2],o[2]*a);ee[n]=[l,u,c],Wr(new G(ee[n]),!0)},C.MoveCooldown)}}}function Wr(t,e){const n=C.Gamemode==="Edit"?C.EditMoveSpeed:C.IngameMoveSpeed,r=t.MultiplyScalar(n).vector,i=new B([]).RotationXMatrix(C.Gamemode==="Edit"?Ye[0]:0),o=new B([]).RotationYMatrix(Ye[1]),s=new B([]).RotationZMatrix(C.Gamemode==="Edit"?Ye[2]:0),a=new B([]).TranslationMatrix(r[0],r[1],r[2]),l=o.Multiply(i).Multiply(s).Multiply(a),u=l.matrix[12],c=l.matrix[13],p=l.matrix[14];if(C.Gamemode==="Ingame"&&e){const v=new G(Be),k=new G([u,c,p]).GetUnitVector();if(fl(v,k,3))return}Be[0]+=u,Be[1]+=c,Be[2]+=p}function cs(t){const e=t==="Shift"&&C.Gamemode==="Ingame";if(ee[t]===void 0||C.Gamemode==="Ingame"&&t===" "||e)return;_t[t]!==void 0&&(_t[t]=!1);let n=ee[t],r=0;const i=setInterval(()=>{r===0&&(n=ee[t]),(new G(ee[t]).GetMagnitude()<=.01||new G(n).GetMagnitude()-new G(ee[t]).GetMagnitude()<0)&&clearInterval(i);const o=ee[t],s=An[t],a=C.Gamemode==="Edit"?99999:Mg,l=s[0]<0?Math.min(0,o[0]/a):Math.max(0,o[0]/a),u=s[1]<0?Math.min(0,o[1]/a):Math.max(0,o[1]/a),c=s[2]<0?Math.min(0,o[2]/a):Math.max(0,o[2]/a);ee[t]=[l,u,c],n=o,Wr(new G(ee[t]),!0),r++},C.MoveCooldown)}function $u(){Object.values(ee).forEach(t=>{t[0]=0,t[1]=0,t[2]=0})}const Ng=5;function Lg(){const t=$.useRef(!1),e=$.useRef("w"),n=o=>{const a={LEFT:"a",RIGHT:"d",FORWARD:"w",BACKWARD:"s"}[o.direction];a!==e.current&&(cs(e.current),us(a)),e.current=a},r=o=>{cs(e.current)},i=()=>{us(e)};return $.useEffect(()=>{t.current||(t.current=!0,document.addEventListener("keydown",o=>{if(o.repeat)return;const s=o.key,a=o.target;a&&a.tagName==="INPUT"||us(s)}),document.addEventListener("keyup",o=>{const s=o.key;cs(s)}))},[]),N.jsxs("div",{className:"flex mt2",children:[N.jsx(Sd.Joystick,{size:100,throttle:Ng,sticky:!1,baseColor:"#71be71",stickColor:"#085127",move:n,stop:r,start:i}),N.jsx("br",{}),N.jsx("p",{className:"b mr2 ml3 pt3",children:"PC Controls:"}),N.jsx("p",{className:"pt3",children:"W / A / S / D / Space / Left Shift"})]})}const bg={Color:["0","0","0","1"],Offset:["0","0","0"],Scale:["1","1","1"],Rotation:["0","0","0"],Name:"???",IsPointLight:!1,Light:{Radius:"0",Color:["1","1","1","1"],Brightness:"1"},TextureId:"0",IgnoreLighting:!1};function zg(){const[t,e]=$.useContext(Mo),[n,r]=$.useState(bg),i={overflowY:"scroll",height:C.Height},o=()=>{cm("SelectedObjectVisual"),t.forEach(c=>{const p=ud(c).vector,v=cd(c),k=fd(c),S=v.SubtractVector(k),x=[Math.abs(S.vector[0])+5,Math.abs(S.vector[1])+5,Math.abs(S.vector[2])+5],R=Ln({Offset:p,Scale:x,DontSave:!0,IgnoreRaycast:!0,IgnoreLighting:!0,Color:[0,.917,1,.1]});R.Data.DontShowInExplorer=!0,R.Data.InternalName="SelectedObjectVisual"})};$.useEffect(()=>{o();const c=t[0];c!==void 0&&r({Color:[c.Data.Color[0].toString(),c.Data.Color[1].toString(),c.Data.Color[2].toString(),c.Data.Color[3].toString()],Offset:[c.Data.Offset[0].toString(),c.Data.Offset[1].toString(),c.Data.Offset[2].toString()],Scale:[c.Data.Scale[0].toString(),c.Data.Scale[1].toString(),c.Data.Scale[2].toString()],Rotation:[(c.Data.Rotation[0]/(Math.PI/180)).toString(),(c.Data.Rotation[1]/(Math.PI/180)).toString(),(c.Data.Rotation[2]/(Math.PI/180)).toString()],Name:c.Data.Name,IsPointLight:!!(c.Data.Light&&c.Data.Light.Radius>=1),Light:{Radius:c.Data.Light?c.Data.Light.Radius.toString():"0",Color:c.Data.Light?[c.Data.Light.Color[0].toString(),c.Data.Light.Color[1].toString(),c.Data.Light.Color[2].toString(),c.Data.Light.Color[3].toString()]:["1","1","1","1"],Brightness:c.Data.Light?c.Data.Light.Brightness.toString():"1"},TextureId:c.Data.TextureId?c.Data.TextureId.toString():"0",IgnoreLighting:c.Data.IgnoreLighting||!1})},[t]);const s=()=>{um(t),e([])},a=()=>{const c=[];t.forEach(p=>{const v=structuredClone(p);v.Data.Offset[1]+=5,oo(v),c.push(v)}),e(c)},l=c=>{t.forEach(p=>{const v=p.Data;v.Color=[Number(c.Color[0]),Number(c.Color[1]),Number(c.Color[2]),Number(c.Color[3])],v.Offset=[Number(c.Offset[0]),Number(c.Offset[1]),Number(c.Offset[2])],v.Scale=[Number(c.Scale[0]),Number(c.Scale[1]),Number(c.Scale[2])],v.Rotation=[Number(c.Rotation[0])*Math.PI/180,Number(c.Rotation[1])*Math.PI/180,Number(c.Rotation[2])*Math.PI/180],v.Name=c.Name,v.Light=c.IsPointLight?{Radius:Number(c.Light.Radius),Color:[Number(c.Light.Color[0]),Number(c.Light.Color[1]),Number(c.Light.Color[2]),Number(c.Light.Color[3])],Brightness:Number(c.Light.Brightness)}:void 0,v.TextureId=Number(c.TextureId),v.IgnoreLighting=c.IgnoreLighting}),o()},u=(c,p,v,k)=>{const S=structuredClone(n),x=typeof S[p]=="boolean"?c.target.checked:c.target.value;p==="Light"&&k?k==="Color"&&v!==void 0?S[p][k][v]=x:k!=="Color"&&(S[p][k]=x):v!==void 0?S[p][v]=x:S[p]=x,r(S),l(S)};return N.jsx(N.Fragment,{children:N.jsxs("div",{className:`mr2 bg-navy br4 ${t.length>0?"o-100":"o-0"} `,style:i,children:[N.jsxs("div",{className:"flex justify-center mt1",children:[N.jsx("button",{className:"bg-red",onClick:s,children:"Delete"}),N.jsx("button",{onClick:a,children:"Duplicate"})]}),N.jsxs("div",{children:[N.jsx("p",{className:"mb1 b",children:"Name"}),N.jsx("input",{className:"w4 bg-grey b--grey",onChange:c=>{u(c,"Name")},value:n.Name})]}),N.jsxs("div",{children:[N.jsx("p",{className:"mb1 b",children:"Color"}),N.jsx("input",{className:"w2 bg-red b--red",onChange:c=>{u(c,"Color",0)},value:n.Color[0].slice(0,4)}),N.jsx("input",{className:"w2 bg-green b--green",onChange:c=>{u(c,"Color",1)},value:n.Color[1].slice(0,4)}),N.jsx("input",{className:"w2 bg-blue b--blue",onChange:c=>{u(c,"Color",2)},value:n.Color[2].slice(0,4)}),N.jsx("input",{className:"w2 bg-grey b--grey",onChange:c=>{u(c,"Color",3)},value:n.Color[3].slice(0,4)})]}),N.jsxs("div",{children:[N.jsx("p",{className:"mb1 b",children:"Position"}),N.jsx("input",{className:"w3 bg-dark-red b--dark-red",onChange:c=>{u(c,"Offset",0)},value:n.Offset[0].slice(0,n.Offset[0].indexOf(".")>-1?n.Offset[0].indexOf("."):7)}),N.jsx("input",{className:"w3 bg-dark-green b--dark-green",onChange:c=>{u(c,"Offset",1)},value:n.Offset[1].slice(0,n.Offset[1].indexOf(".")>-1?n.Offset[1].indexOf("."):7)}),N.jsx("input",{className:"w3 bg-dark-blue b--dark-blue",onChange:c=>{u(c,"Offset",2)},value:n.Offset[2].slice(0,n.Offset[2].indexOf(".")>-1?n.Offset[2].indexOf("."):7)})]}),N.jsxs("div",{children:[N.jsx("p",{className:"mb1 b",children:"Scale"}),N.jsx("input",{className:"w3 bg-dark-red b--dark-red",onChange:c=>{u(c,"Scale",0)},value:n.Scale[0].slice(0,n.Scale[0].indexOf(".")>-1?n.Scale[0].indexOf("."):7)}),N.jsx("input",{className:"w3 bg-dark-green b--dark-green",onChange:c=>{u(c,"Scale",1)},value:n.Scale[1].slice(0,n.Scale[1].indexOf(".")>-1?n.Scale[1].indexOf("."):7)}),N.jsx("input",{className:"w3 bg-dark-blue b--dark-blue",onChange:c=>{u(c,"Scale",2)},value:n.Scale[2].slice(0,n.Scale[2].indexOf(".")>-1?n.Scale[2].indexOf("."):7)})]}),N.jsxs("div",{children:[N.jsx("p",{className:"mb1 b",children:"Rotation"}),N.jsx("input",{className:"w3 bg-dark-red b--dark-red",onChange:c=>{u(c,"Rotation",0)},value:n.Rotation[0].slice(0,n.Rotation[0].indexOf(".")>-1?n.Rotation[0].indexOf("."):7)}),N.jsx("input",{className:"w3 bg-dark-green b--dark-green",onChange:c=>{u(c,"Rotation",1)},value:n.Rotation[1].slice(0,n.Rotation[1].indexOf(".")>-1?n.Rotation[1].indexOf("."):7)}),N.jsx("input",{className:"w3 bg-dark-blue b--dark-blue",onChange:c=>{u(c,"Rotation",2)},value:n.Rotation[2].slice(0,n.Rotation[2].indexOf(".")>-1?n.Rotation[2].indexOf("."):7)})]}),N.jsxs("div",{children:[N.jsx("p",{className:"mb1 b",children:"Texture Id"}),N.jsx("input",{className:"w4 bg-grey b--grey",onChange:c=>{u(c,"TextureId")},value:n.TextureId})]}),N.jsxs("div",{children:[N.jsx("p",{className:"mb1 b",children:"Ignore Lighting"}),N.jsx("input",{className:"w4 h1 bg-grey b--grey",type:"checkbox",onChange:c=>{u(c,"IgnoreLighting")},checked:!!n.IgnoreLighting})]}),N.jsxs("div",{children:[N.jsx("p",{className:"mb1 b",children:"Point Light"}),N.jsx("input",{className:"w4 h1 bg-grey b--grey",type:"checkbox",onChange:c=>{u(c,"IsPointLight")},checked:!!n.IsPointLight})]}),N.jsxs("div",{className:`${n.IsPointLight?"":"dn"} mb2`,children:[N.jsx("p",{className:"mb1 b",children:"Light Radius"}),N.jsx("input",{className:"w4 h1 bg-grey b--grey",onChange:c=>{u(c,"Light",void 0,"Radius")},value:n.Light.Radius}),N.jsx("p",{className:"mb1 b",children:"Light Brightness"}),N.jsx("input",{className:"w4 h1 bg-grey b--grey",onChange:c=>{u(c,"Light",void 0,"Brightness")},value:n.Light.Brightness}),N.jsx("p",{className:"mb1 b",children:"Light Color"}),N.jsx("input",{className:"w2 bg-red b--red",onChange:c=>{u(c,"Light",0,"Color")},value:n.Light.Color[0].slice(0,4)}),N.jsx("input",{className:"w2 bg-green b--green",onChange:c=>{u(c,"Light",1,"Color")},value:n.Light.Color[1].slice(0,4)}),N.jsx("input",{className:"w2 bg-blue b--blue",onChange:c=>{u(c,"Light",2,"Color")},value:n.Light.Color[2].slice(0,4)}),N.jsx("input",{className:"w2 bg-grey b--grey",onChange:c=>{u(c,"Light",3,"Color")},value:n.Light.Color[3].slice(0,4)})]})]})})}function Ag(t){const e={Vertices:[],Index:[],Normals:[],Data:{Color:[1,1,1,1],Offset:[0,0,0],Scale:[100,100,100],Rotation:[0,0,0],Name:"OBJMesh"}};let n=t.indexOf("mtllib");n=t.indexOf("v ",n);let r=t[n]+" ";for(;r==="v ";){n+=2;const i=[];for(let o=0;o<3;o++){const s=t[n]==="-"?9:8;i[o]=Number(t.slice(n,n+s)),n+=s+1}e.Vertices.push(...i),r=t[n]+t[n+1]}for(n=t.indexOf("usemtl",n),n=t.indexOf("f ",n),r=t[n]+" ";r==="f ";){n+=2;const i=[],o=[];for(let s=0;s<4&&!Number.isNaN(Number(t[n]));s++){let a=1,l=1,u=!1;for(let c=1;c<99;c++){if(t[n+c]==="f"){a--;break}if(t[n+c]===" ")break;!Number.isNaN(Number(t[n+c]))&&!u?l++:u=!0,a++}s===3?(o[0]=i[0],o[1]=i[2],o[2]=Number(t.slice(n,n+l))-1):i[s]=Number(t.slice(n,n+l))-1,n+=a+1}e.Index.push(...i),e.Index.push(...o),r=t[n]+t[n+1]}return e}function Rg({items:t,onItemSelected:e,buttonText:n}){const[r,i]=$.useState(!1),o=()=>{i(!r)};return $.useEffect(()=>{i(r)},[r]),N.jsx(N.Fragment,{children:N.jsxs("button",{className:r?"active":void 0,onClick:o,onBlur:()=>i(!1),children:[N.jsx("div",{className:`dropdown ${r?"":"dn"}`,children:t.map((s,a)=>N.jsx("p",{className:"br1",onClick:()=>{i(!1),e(s)},children:s},a))}),n]})})}let qu=!1;function Og(){const t=$.useRef(!1),[e,n]=$.useState(C.Gamemode),[r,i]=$.useState("blue"),[o,s]=$.useContext(Mo),[a,l]=$.useState("1"),[u,c]=$.useState(C.ShadowsEnabled);$.useEffect(()=>{if(t.current||qu)return;t.current=!0,qu=!0,console.log("loaded!");const w=localStorage.getItem("WorldObjects"),E=localStorage.getItem("ViewScale");w&&w!==""&&(Mu(),JSON.parse(w).forEach(M=>{oo(M)})),E&&E!==""&&(l(E),Yu(Number(E))),setInterval(()=>{localStorage.setItem("WorldObjects",JSON.stringify(dm())),localStorage.setItem("ViewScale",String(C.Width/500))},3e3)},[]);const p={marginTop:"15px"},v=w=>{if(!w.target.files)return;const E=w.target.files[0],M=new FileReader;M.readAsText(E,"UTF-8"),M.onload=b=>{if(b.target){var T=b.target.result;if(typeof T=="string"){const O=Ag(T);O.Data.Offset=[Be[0],Be[1],Be[2]],oo(O),s([O])}else console.warn("Unexpected content type")}}},k=()=>{localStorage.setItem("WorldObjects",""),Mu()},S=()=>{C.Gamemode==="Edit"?($u(),C.Gamemode="Ingame",i("light-green")):C.Gamemode==="Ingame"&&($u(),C.Gamemode="Edit",i("blue")),n(C.Gamemode)},x=w=>{const E=w.target.value;l(E),Yu(Number(E))},R=()=>{const w=!u;c(!u),C.ShadowsEnabled=w},d={Cube:()=>Ln({UseCameraOffset:!0,RandomColor:!0}),Light:()=>{const w=Array.from(be.Data.Scale),E=[w[0]/2.5,w[1]/2.5,w[2]/2.5],M=Ln({UseCameraOffset:!0,Scale:E,Name:"Light"});return M.Data.Light={Radius:750,Color:[1,1,1,1],Brightness:1},M},Kitty:()=>{const w=Array.from(be.Data.Scale),E=[w[0]*1.5,w[1]*1.5,w[2]*1.5],M=Ln({UseCameraOffset:!0,Scale:E,Name:"Kitty"});return M.Data.TextureId=1,M},"Dog Video":()=>{const w=Array.from(be.Data.Scale),E=[w[0]*1.5,w[1]*1.5,w[2]*1.5],M=Ln({UseCameraOffset:!0,Scale:E,Name:"DogVideo"});return M.Data.TextureId=2,M}},h=Object.keys(d),y=w=>{const E=d[w]();s([E])};return N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"flex",children:[N.jsx(zg,{}),N.jsx(yg,{})]}),N.jsx(Lg,{}),N.jsxs("p",{className:"b mr",children:["Add Object from .OBJ:",N.jsx("input",{className:"ml2 bg-light-red br2",type:"file",style:p,onChange:v})]}),N.jsxs("div",{className:"flex items-center justify-center",children:[N.jsx("button",{className:"bg-red",onClick:k,children:"Clear World"}),N.jsx(Rg,{buttonText:"Add Object",onItemSelected:y,items:h}),N.jsx("button",{onClick:S,children:"Toggle Gamemode"}),N.jsxs("p",{className:`w4 h2 b br3 tc v-mid ml2 ${r}`,children:["Gamemode: ",e]})]}),N.jsxs("div",{className:"flex items-center justify-center",children:[N.jsxs("div",{className:"ml2",children:[N.jsx("p",{className:"b",children:"View Scale"}),N.jsx("input",{className:"w3",onChange:x,value:a})]}),N.jsxs("div",{className:"ml2",children:[N.jsx("p",{className:"b yellow",children:"Sun Shadows - WIP"}),N.jsx("input",{className:"w4 h1 bg-grey b--grey",type:"checkbox",onChange:R,checked:u})]})]})]})}function Yu(t){if(!isNaN(t)){const e=Math.min(2,Math.max(.5,t));C.Width=500*e,C.Height=500*e}}function Ig(){const[t,e]=$.useState([]);return N.jsx(Mo.Provider,{value:[t,e],children:N.jsx(Og,{})})}fs.createRoot(document.getElementById("root")).render(N.jsx($d.StrictMode,{children:N.jsx(Ig,{})}));
